---
title: 厳密な名前付きアセンブリの作成と使用
description: この記事では、.NET で厳密な名前のアセンブリに署名した後にそれをその名前で参照するプロセスを示します。
ms.date: 08/19/2019
helpviewer_keywords:
- strong-name bypass feature
- strong-named assemblies, about strong-named assemblies
- strong-named assemblies
- signing assemblies
- assemblies [.NET], signing
- strong-named assemblies, scenarios
- assemblies [.NET], strong-named
- strong-named assemblies, loading into trusted application domains
- assembly binding, strong-named
ms.assetid: ffbf6d9e-4a88-4a8a-9645-4ce0ee1ee5f9
ms.openlocfilehash: 68a927d97716ad6ee04602aa8968ca01629697ac
ms.sourcegitcommit: c7f0beaa2bd66ebca86362ca17d673f7e8256ca6
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/23/2021
ms.locfileid: "104874005"
---
# <a name="create-and-use-strong-named-assemblies"></a><span data-ttu-id="d9a2f-103">厳密な名前付きアセンブリの作成と使用</span><span class="sxs-lookup"><span data-stu-id="d9a2f-103">Create and use strong-named assemblies</span></span>

<span data-ttu-id="d9a2f-104">厳密な名前は、単純テキスト名、バージョン番号、カルチャ情報 (設定されている場合) から成るアセンブリの識別子と、公開キーおよびデジタル署名で構成されます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-104">A strong name consists of the assembly's identity—its simple text name, version number, and culture information (if provided)—plus a public key and a digital signature.</span></span> <span data-ttu-id="d9a2f-105">このデジタル署名は、対応する秘密キーを使用してアセンブリ ファイルから生成されます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-105">It is generated from an assembly file using the corresponding private key.</span></span> <span data-ttu-id="d9a2f-106">(アセンブリ ファイルにはアセンブリ マニフェストが格納されており、そこに、アセンブリを構成するすべてのファイルの名前とハッシュが含まれます。)</span><span class="sxs-lookup"><span data-stu-id="d9a2f-106">(The assembly file contains the assembly manifest, which contains the names and hashes of all the files that make up the assembly.)</span></span>

> [!WARNING]
> <span data-ttu-id="d9a2f-107">セキュリティに関しては、厳格な名前に依存しないでください。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-107">Do not rely on strong names for security.</span></span> <span data-ttu-id="d9a2f-108">厳格な名前は、一意の ID を提供するだけです。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-108">They provide a unique identity only.</span></span>

<span data-ttu-id="d9a2f-109">厳密な名前のアセンブリは、他の厳密な名前のアセンブリでのタイプだけを使用できます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-109">A strong-named assembly can only use types from other strong-named assemblies.</span></span> <span data-ttu-id="d9a2f-110">それ以外の場合は、厳密な名前のアセンブリの整合性が損なわれます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-110">Otherwise, the integrity of the strong-named assembly would be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="d9a2f-111">.NET Core では厳密な名前のアセンブリがサポートされており、.NET Core ライブラリ内のすべてのアセンブリは署名されていますが、ほとんどのサードパーティ アセンブリには厳密な名前は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-111">Although .NET Core supports strong-named assemblies, and all assemblies in the .NET Core library are signed, the majority of third-party assemblies do not need strong names.</span></span> <span data-ttu-id="d9a2f-112">詳細については、GitHub の「[厳密な名前の署名](https://github.com/dotnet/runtime/blob/main/docs/project/strong-name-signing.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-112">For more information, see [Strong Name Signing](https://github.com/dotnet/runtime/blob/main/docs/project/strong-name-signing.md) on GitHub.</span></span>

## <a name="strong-name-scenario"></a><span data-ttu-id="d9a2f-113">厳密な名前のシナリオ</span><span class="sxs-lookup"><span data-stu-id="d9a2f-113">Strong name scenario</span></span>

<span data-ttu-id="d9a2f-114">次のシナリオは、厳密な名前のアセンブリに署名した後にそれをその名前で参照するプロセスの概要を示しています。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-114">The following scenario outlines the process of signing an assembly with a strong name and later referencing it by that name.</span></span>

1. <span data-ttu-id="d9a2f-115">アセンブリ A は、次のいずれかの方法を使用して厳密な名前で作成されます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-115">Assembly A is created with a strong name using one of the following methods:</span></span>

    - <span data-ttu-id="d9a2f-116">Visual Studio など、厳密な名前の作成をサポートする開発環境を使用する。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-116">Using a development environment that supports creating strong names, such as Visual Studio.</span></span>

    - <span data-ttu-id="d9a2f-117">[厳密名ツール (Sn.exe)](../../framework/tools/sn-exe-strong-name-tool.md) を使用して暗号化キー ペアを作成し、コマンド ライン コンパイラまたは[アセンブリ リンカー (Al.exe)](../../framework/tools/al-exe-assembly-linker.md) のいずれかを使用してそのキー ペアをアセンブリに割り当てる。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-117">Creating a cryptographic key pair using the [Strong Name tool (Sn.exe)](../../framework/tools/sn-exe-strong-name-tool.md) and assigning that key pair to the assembly using either a command-line compiler or the [Assembly Linker (Al.exe)](../../framework/tools/al-exe-assembly-linker.md).</span></span> <span data-ttu-id="d9a2f-118">Windows SDK には、Sn.exe と Al.exe の両方が用意されています。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-118">The Windows SDK provides both Sn.exe and Al.exe.</span></span>

2. <span data-ttu-id="d9a2f-119">開発環境またはツールは、アセンブリのマニフェストを含むファイルのハッシュに、開発者の秘密キーで署名します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-119">The development environment or tool signs the hash of the file containing the assembly's manifest with the developer's private key.</span></span> <span data-ttu-id="d9a2f-120">このデジタル署名は、アセンブリ A のマニフェストを含むポータブル実行可能 (PE) ファイルに格納されます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-120">This digital signature is stored in the portable executable (PE) file that contains Assembly A's manifest.</span></span>

3. <span data-ttu-id="d9a2f-121">アセンブリ B はアセンブリ A のコンシューマーです。アセンブリ B のマニフェストの参照セクションには、アセンブリ A の公開キーを表すトークンが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-121">Assembly B is a consumer of Assembly A. The reference section of Assembly B's manifest includes a token that represents Assembly A's public key.</span></span> <span data-ttu-id="d9a2f-122">トークンは完全な公開キーの一部であり、スペースを節約するために、キー自体ではなくこれが使用されます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-122">A token is a portion of the full public key and is used rather than the key itself to save space.</span></span>

4. <span data-ttu-id="d9a2f-123">共通言語ランタイムは、アセンブリがグローバル アセンブリ キャッシュに入れられる際に、厳密な名前の署名を確認します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-123">The common language runtime verifies the strong name signature when the assembly is placed in the global assembly cache.</span></span> <span data-ttu-id="d9a2f-124">実行時に厳密な名前でバインドするとき、共通言語ランタイムは、アセンブリ B のマニフェストに格納されているキーと、アセンブリ A の厳密な名前を生成するために使用されたキーを比較します。 .NET のセキュリティ チェックに合格してバインドが成功すると、アセンブリ B は、アセンブリ A のビットが改ざんされていないことと、これらのビットが実際にアセンブリ A の開発者からのものであることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-124">When binding by strong name at run time, the common language runtime compares the key stored in Assembly B's manifest with the key used to generate the strong name for Assembly A. If the .NET security checks pass and the bind succeeds, Assembly B has a guarantee that Assembly A's bits have not been tampered with and that these bits actually come from the developers of Assembly A.</span></span>

> [!NOTE]
> <span data-ttu-id="d9a2f-125">このシナリオは、信頼の問題を扱っていません。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-125">This scenario doesn't address trust issues.</span></span> <span data-ttu-id="d9a2f-126">厳密な名前に加えて、完全な Microsoft Authenticode 署名をアセンブリに持たせることができます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-126">Assemblies can carry full Microsoft Authenticode signatures in addition to a strong name.</span></span> <span data-ttu-id="d9a2f-127">Authenticode 署名には、信頼を確立するための証明書が含まれます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-127">Authenticode signatures include a certificate that establishes trust.</span></span> <span data-ttu-id="d9a2f-128">厳密な名前を使用すると、コードにこのように署名する必要がないということに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-128">It's important to note that strong names don't require code to be signed in this way.</span></span> <span data-ttu-id="d9a2f-129">厳密な名前は、一意の ID を提供するだけです。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-129">Strong names only provide a unique identity.</span></span>

## <a name="bypass-signature-verification-of-trusted-assemblies"></a><span data-ttu-id="d9a2f-130">信頼されたアセンブリの署名検証をバイパスする</span><span class="sxs-lookup"><span data-stu-id="d9a2f-130">Bypass signature verification of trusted assemblies</span></span>

<span data-ttu-id="d9a2f-131">.NET Framework 3.5 Service Pack 1 以降、たとえば `MyComputer` ゾーンの既定のアプリケーション ドメインなど、完全に信頼されたアプリケーション ドメインにアセンブリが読み込まれるときに、厳密な名前の署名は検証されなくなりました。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-131">Starting with the .NET Framework 3.5 Service Pack 1, strong-name signatures are not validated when an assembly is loaded into a full-trust application domain, such as the default application domain for the `MyComputer` zone.</span></span> <span data-ttu-id="d9a2f-132">これは厳密な名前のバイパス機能と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-132">This is referred to as the strong-name bypass feature.</span></span> <span data-ttu-id="d9a2f-133">完全に信頼された環境では、<xref:System.Security.Permissions.StrongNameIdentityPermission> に対する完全に信頼された署名済みアセンブリの要求は、その署名に関係なく、常に成功します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-133">In a full-trust environment, demands for <xref:System.Security.Permissions.StrongNameIdentityPermission> always succeed for signed, full-trust assemblies, regardless of their signature.</span></span> <span data-ttu-id="d9a2f-134">このような場合、厳密な名前のバイパス機能は、完全に信頼されたアセンブリの厳密名署名検証という不要なオーバーヘッドを回避するので、アセンブリを高速で読み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-134">The strong-name bypass feature avoids the unnecessary overhead of strong-name signature verification of full-trust assemblies in this situation, allowing the assemblies to load faster.</span></span>

<span data-ttu-id="d9a2f-135">バイ パス機能は、厳密な名前で署名されていて、次の特性を持つアセンブリに適用されます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-135">The bypass feature applies to any assembly that is signed with a strong name and that has the following characteristics:</span></span>

- <span data-ttu-id="d9a2f-136"><xref:System.Security.Policy.StrongName> 証拠なしで完全に信頼されている (たとえば、`MyComputer` ゾーン証拠を持っている)。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-136">Fully trusted without <xref:System.Security.Policy.StrongName> evidence (for example, has `MyComputer` zone evidence).</span></span>

- <span data-ttu-id="d9a2f-137">完全に信頼された <xref:System.AppDomain> に読み込まれる。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-137">Loaded into a fully trusted <xref:System.AppDomain>.</span></span>

- <span data-ttu-id="d9a2f-138">その <xref:System.AppDomain> の <xref:System.AppDomainSetup.ApplicationBase%2A> プロパティに基づいた場所から読み込まれる。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-138">Loaded from a location under the <xref:System.AppDomainSetup.ApplicationBase%2A> property of that <xref:System.AppDomain>.</span></span>

- <span data-ttu-id="d9a2f-139">遅延署名されていない。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-139">Not delay-signed.</span></span>

<span data-ttu-id="d9a2f-140">この機能は、個々のアプリケーションに対して、またはコンピューターに対して無効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-140">This feature can be disabled for individual applications or for a computer.</span></span> <span data-ttu-id="d9a2f-141">「[方法:厳密な名前のバイパス機能を無効にする](disable-strong-name-bypass-feature.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-141">See [How to: Disable the strong-name bypass feature](disable-strong-name-bypass-feature.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="d9a2f-142">関連トピック</span><span class="sxs-lookup"><span data-stu-id="d9a2f-142">Related topics</span></span>

|<span data-ttu-id="d9a2f-143">Title</span><span class="sxs-lookup"><span data-stu-id="d9a2f-143">Title</span></span>|<span data-ttu-id="d9a2f-144">説明</span><span class="sxs-lookup"><span data-stu-id="d9a2f-144">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="d9a2f-145">方法: 公開キーと秘密キーのキー ペアを作成する</span><span class="sxs-lookup"><span data-stu-id="d9a2f-145">How to: Create a public-private key pair</span></span>](create-public-private-key-pair.md)|<span data-ttu-id="d9a2f-146">署名とアセンブリの暗号化キー ペアを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-146">Describes how to create a cryptographic key pair for signing an assembly.</span></span>|
|[<span data-ttu-id="d9a2f-147">方法: 厳密な名前でアセンブリに署名する</span><span class="sxs-lookup"><span data-stu-id="d9a2f-147">How to: Sign an assembly with a strong name</span></span>](sign-strong-name.md)|<span data-ttu-id="d9a2f-148">厳密な名前のアセンブリを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-148">Describes how to create a strong-named assembly.</span></span>|
|[<span data-ttu-id="d9a2f-149">拡張された厳密な名前付け</span><span class="sxs-lookup"><span data-stu-id="d9a2f-149">Enhanced strong naming</span></span>](enhanced-strong-naming.md)|<span data-ttu-id="d9a2f-150">.NET Framework 4.5 での厳密な名前の拡張について説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-150">Describes enhancements to strong-names in the .NET Framework 4.5.</span></span>|
|[<span data-ttu-id="d9a2f-151">方法: 厳密な名前のアセンブリを参照する</span><span class="sxs-lookup"><span data-stu-id="d9a2f-151">How to: Reference a strong-named assembly</span></span>](reference-strong-named.md)|<span data-ttu-id="d9a2f-152">コンパイル時または実行時に厳密な名前のアセンブリでタイプまたはリソースを参照する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-152">Describes how to reference types or resources in a strong-named assembly at compile time or run time.</span></span>|
|[<span data-ttu-id="d9a2f-153">方法: 厳密な名前のバイパス機能を無効にする</span><span class="sxs-lookup"><span data-stu-id="d9a2f-153">How to: Disable the strong-name bypass feature</span></span>](disable-strong-name-bypass-feature.md)|<span data-ttu-id="d9a2f-154">厳密な名前の署名の検証をバイパスする機能を無効にする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-154">Describes how to disable the feature that bypasses the validation of strong-name signatures.</span></span> <span data-ttu-id="d9a2f-155">すべてのまたは特定のアプリケーションに対して、この機能を無効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-155">This feature can be disabled for all or for specific applications.</span></span>|
|[<span data-ttu-id="d9a2f-156">アセンブリを作成する</span><span class="sxs-lookup"><span data-stu-id="d9a2f-156">Create assemblies</span></span>](create.md)|<span data-ttu-id="d9a2f-157">単一ファイル アセンブリおよびマルチファイル アセンブリの概要を示します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-157">Provides an overview of single-file and multifile assemblies.</span></span>|
|[<span data-ttu-id="d9a2f-158">Visual Studio 内でアセンブリに遅延署名する方法</span><span class="sxs-lookup"><span data-stu-id="d9a2f-158">How to delay sign an assembly in Visual Studio</span></span>](/visualstudio/ide/managing-assembly-and-manifest-signing#how-to-sign-an-assembly-in-visual-studio)|<span data-ttu-id="d9a2f-159">アセンブリを作成した後に厳密な名前でアセンブリに署名する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-159">Explains how to sign an assembly with a strong name after the assembly has been created.</span></span>|
|[<span data-ttu-id="d9a2f-160">Sn.exe (厳密名ツール)</span><span class="sxs-lookup"><span data-stu-id="d9a2f-160">Sn.exe (Strong Name tool)</span></span>](../../framework/tools/sn-exe-strong-name-tool.md)|<span data-ttu-id="d9a2f-161">厳密な名前のアセンブリの作成に役立つ、.NET Framework に付属のツールについて説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-161">Describes the tool included in the .NET Framework that helps create assemblies with strong names.</span></span> <span data-ttu-id="d9a2f-162">このツールには、キーの管理、署名の生成、署名の検査に関する各オプションが用意されています。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-162">This tool provides options for key management, signature generation, and signature verification.</span></span>|
|[<span data-ttu-id="d9a2f-163">Al.exe (アセンブリ リンカー)</span><span class="sxs-lookup"><span data-stu-id="d9a2f-163">Al.exe (Assembly linker)</span></span>](../../framework/tools/al-exe-assembly-linker.md)|<span data-ttu-id="d9a2f-164">モジュールまたはリソース ファイルからアセンブリ マニフェストを含むファイルを生成する、.NET Framework に付属のツールについて説明します。</span><span class="sxs-lookup"><span data-stu-id="d9a2f-164">Describes the tool included in the .NET Framework that generates a file that has an assembly manifest from modules or resource files.</span></span>|
