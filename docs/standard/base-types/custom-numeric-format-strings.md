---
title: カスタム数値形式文字列
description: .NET で数値データを書式設定するためのカスタム数値書式設定文字列を作成する方法について説明します。 カスタム数値書式設定文字列には、1 つ以上のカスタム数値指定子があります。
ms.date: 06/25/2018
ms.topic: reference
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- numeric format strings [.NET]
- formatting [.NET], numbers
- format strings
- custom numeric format strings
- numbers [.NET], formatting
- format specifiers, numeric
- formatting numbers [.NET]
- format specifiers, custom numeric format strings
ms.assetid: 6f74fd32-6c6b-48ed-8241-3c2b86dea5f4
ms.openlocfilehash: 52cdf8a28a43239d5c218b7154d67a1d0b3c210d
ms.sourcegitcommit: 4313614f57690f9a5119a37314f0a1fd738ebda2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/22/2021
ms.locfileid: "98693008"
---
# <a name="custom-numeric-format-strings"></a><span data-ttu-id="ad698-104">カスタム数値形式文字列</span><span class="sxs-lookup"><span data-stu-id="ad698-104">Custom numeric format strings</span></span>

<span data-ttu-id="ad698-105">1 つ以上のカスタム数値指定子で構成されるカスタム数値書式指定文字列を作成して、数値データの書式設定方法を定義できます。</span><span class="sxs-lookup"><span data-stu-id="ad698-105">You can create a custom numeric format string, which consists of one or more custom numeric specifiers, to define how to format numeric data.</span></span> <span data-ttu-id="ad698-106">カスタム数値書式指定文字列は、 [標準の数値形式文字列](standard-numeric-format-strings.md)ではない任意の書式指定文字列です。</span><span class="sxs-lookup"><span data-stu-id="ad698-106">A custom numeric format string is any format string that is not a [standard numeric format string](standard-numeric-format-strings.md).</span></span>

<span data-ttu-id="ad698-107">カスタム数値書式指定文字列は、すべての数値型の `ToString` メソッドの一部のオーバーロードでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="ad698-107">Custom numeric format strings are supported by some overloads of the `ToString` method of all numeric types.</span></span> <span data-ttu-id="ad698-108">たとえば、 <xref:System.Int32.ToString%28System.String%29> 型の <xref:System.Int32.ToString%28System.String%2CSystem.IFormatProvider%29> メソッドおよび <xref:System.Int32> メソッドに数値書式指定文字列を指定できます。</span><span class="sxs-lookup"><span data-stu-id="ad698-108">For example, you can supply a numeric format string to the <xref:System.Int32.ToString%28System.String%29> and <xref:System.Int32.ToString%28System.String%2CSystem.IFormatProvider%29> methods of the <xref:System.Int32> type.</span></span> <span data-ttu-id="ad698-109">カスタム数値書式指定文字列は、.NET の[複合書式指定機能](composite-formatting.md)でもサポートされています。この機能を使用するメソッドには、<xref:System.Console> クラスおよび <xref:System.IO.StreamWriter> クラスの一部の `Write` メソッドと `WriteLine` メソッド、<xref:System.String.Format%2A?displayProperty=nameWithType> メソッド、<xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType> メソッドがあります。</span><span class="sxs-lookup"><span data-stu-id="ad698-109">Custom numeric format strings are also supported by the .NET [composite formatting feature](composite-formatting.md), which is used by some `Write` and `WriteLine` methods of the <xref:System.Console> and <xref:System.IO.StreamWriter> classes, the <xref:System.String.Format%2A?displayProperty=nameWithType> method, and the <xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ad698-110">[文字列補間](../../csharp/language-reference/tokens/interpolated.md)機能は、カスタム数値書式指定文字列もサポートしています。</span><span class="sxs-lookup"><span data-stu-id="ad698-110">[String interpolation](../../csharp/language-reference/tokens/interpolated.md) feature also supports custom numeric format strings.</span></span>

> [!TIP]
> <span data-ttu-id="ad698-111">**書式指定ユーティリティ** である .NET Core Windows Forms をダウンロードできます。このアプリケーションを使用すると、書式指定文字列を数値または日付と時刻の値に適用して、結果の文字列を表示できます。</span><span class="sxs-lookup"><span data-stu-id="ad698-111">You can download the **Formatting Utility**, a .NET Core Windows Forms application that lets you apply format strings to either numeric or date and time values and displays the result string.</span></span> <span data-ttu-id="ad698-112">ソース コードは [C#](/samples/dotnet/samples/windowsforms-formatting-utility-cs) と [Visual Basic](/samples/dotnet/samples/windowsforms-formatting-utility-vb) で利用できます。</span><span class="sxs-lookup"><span data-stu-id="ad698-112">Source code is available for [C#](/samples/dotnet/samples/windowsforms-formatting-utility-cs) and [Visual Basic](/samples/dotnet/samples/windowsforms-formatting-utility-vb).</span></span>

<a name="table"></a> <span data-ttu-id="ad698-113">次の表に、カスタム数値書式指定子の説明および書式指定子ごとのサンプル出力を示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-113">The following table describes the custom numeric format specifiers and displays sample output produced by each format specifier.</span></span> <span data-ttu-id="ad698-114">カスタム数値書式指定文字列の使用方法については、「 [メモ](#NotesCustomFormatting) 」を参照してください。それらを使用する包括的な例については、「 [例](#example) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad698-114">See the [Notes](#NotesCustomFormatting) section for additional information about using custom numeric format strings, and the [Example](#example) section for a comprehensive illustration of their use.</span></span>

|<span data-ttu-id="ad698-115">書式指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-115">Format specifier</span></span>|<span data-ttu-id="ad698-116">名前</span><span class="sxs-lookup"><span data-stu-id="ad698-116">Name</span></span>|<span data-ttu-id="ad698-117">説明</span><span class="sxs-lookup"><span data-stu-id="ad698-117">Description</span></span>|<span data-ttu-id="ad698-118">使用例</span><span class="sxs-lookup"><span data-stu-id="ad698-118">Examples</span></span>|
|----------------------|----------|-----------------|--------------|
|<span data-ttu-id="ad698-119">"0"</span><span class="sxs-lookup"><span data-stu-id="ad698-119">"0"</span></span>|<span data-ttu-id="ad698-120">ゼロ プレースホルダー</span><span class="sxs-lookup"><span data-stu-id="ad698-120">Zero placeholder</span></span>|<span data-ttu-id="ad698-121">対応する数字でゼロを置き換えます。置き換えが行われるのは、対応する数字が存在する場合です。それ以外の場合は、結果の文字列にはゼロが表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-121">Replaces the zero with the corresponding digit if one is present; otherwise, zero appears in the result string.</span></span><br /><br /> <span data-ttu-id="ad698-122">詳細情報:["0" カスタム指定子](#Specifier0)。</span><span class="sxs-lookup"><span data-stu-id="ad698-122">More information: [The "0" Custom Specifier](#Specifier0).</span></span>|<span data-ttu-id="ad698-123">1234.5678 ("00000") -> 01235</span><span class="sxs-lookup"><span data-stu-id="ad698-123">1234.5678 ("00000") -> 01235</span></span><br /><br /> <span data-ttu-id="ad698-124">0.45678 ("0.00", en-US) -> 0.46</span><span class="sxs-lookup"><span data-stu-id="ad698-124">0.45678 ("0.00", en-US) -> 0.46</span></span><br /><br /> <span data-ttu-id="ad698-125">0.45678 ("0.00", fr-FR) -> 0,46</span><span class="sxs-lookup"><span data-stu-id="ad698-125">0.45678 ("0.00", fr-FR) -> 0,46</span></span>|
|<span data-ttu-id="ad698-126">"#"</span><span class="sxs-lookup"><span data-stu-id="ad698-126">"#"</span></span>|<span data-ttu-id="ad698-127">桁プレースホルダー</span><span class="sxs-lookup"><span data-stu-id="ad698-127">Digit placeholder</span></span>|<span data-ttu-id="ad698-128">対応する数字で "#" 記号を置き換えます。置き換えが行われるのは、対応する数字が存在する場合です。それ以外の場合は、結果の文字列に数字は表示されません。</span><span class="sxs-lookup"><span data-stu-id="ad698-128">Replaces the "#" symbol with the corresponding digit if one is present; otherwise, no digit appears in the result string.</span></span><br /><br /> <span data-ttu-id="ad698-129">入力文字列の対応する数字が意味を持たない 0 の場合、結果の文字列に数字は表示されません。</span><span class="sxs-lookup"><span data-stu-id="ad698-129">Note that no digit appears in the result string if the corresponding digit in the input string is a non-significant 0.</span></span> <span data-ttu-id="ad698-130">たとえば、0003 ("####") -> 3 です。</span><span class="sxs-lookup"><span data-stu-id="ad698-130">For example, 0003 ("####") -> 3.</span></span><br /><br /> <span data-ttu-id="ad698-131">詳細情報:["#" カスタム指定子](#SpecifierD)。</span><span class="sxs-lookup"><span data-stu-id="ad698-131">More information: [The "#" Custom Specifier](#SpecifierD).</span></span>|<span data-ttu-id="ad698-132">1234.5678 ("#####") -> 1235</span><span class="sxs-lookup"><span data-stu-id="ad698-132">1234.5678 ("#####") -> 1235</span></span><br /><br /> <span data-ttu-id="ad698-133">0.45678 ("#.##", en-US) -> .46</span><span class="sxs-lookup"><span data-stu-id="ad698-133">0.45678 ("#.##", en-US) -> .46</span></span><br /><br /> <span data-ttu-id="ad698-134">0.45678 ("#.##", fr-FR) -> ,46</span><span class="sxs-lookup"><span data-stu-id="ad698-134">0.45678 ("#.##", fr-FR) -> ,46</span></span>|
|<span data-ttu-id="ad698-135">"."</span><span class="sxs-lookup"><span data-stu-id="ad698-135">"."</span></span>|<span data-ttu-id="ad698-136">小数点</span><span class="sxs-lookup"><span data-stu-id="ad698-136">Decimal point</span></span>|<span data-ttu-id="ad698-137">結果の文字列の小数点位置を決定します。</span><span class="sxs-lookup"><span data-stu-id="ad698-137">Determines the location of the decimal separator in the result string.</span></span><br /><br /> <span data-ttu-id="ad698-138">詳細情報:["."カスタム指定子](#SpecifierPt)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad698-138">More information: [The "." Custom Specifier](#SpecifierPt).</span></span>|<span data-ttu-id="ad698-139">0.45678 ("0.00", en-US) -> 0.46</span><span class="sxs-lookup"><span data-stu-id="ad698-139">0.45678 ("0.00", en-US) -> 0.46</span></span><br /><br /> <span data-ttu-id="ad698-140">0.45678 ("0.00", fr-FR) -> 0,46</span><span class="sxs-lookup"><span data-stu-id="ad698-140">0.45678 ("0.00", fr-FR) -> 0,46</span></span>|
|<span data-ttu-id="ad698-141">","</span><span class="sxs-lookup"><span data-stu-id="ad698-141">","</span></span>|<span data-ttu-id="ad698-142">桁区切り記号および数値の位取り</span><span class="sxs-lookup"><span data-stu-id="ad698-142">Group separator and number scaling</span></span>|<span data-ttu-id="ad698-143">桁区切り記号および数値位取り指定子の両方として機能します。</span><span class="sxs-lookup"><span data-stu-id="ad698-143">Serves as both a group separator and a number scaling specifier.</span></span> <span data-ttu-id="ad698-144">桁区切り記号としては、各グループの間に、ローカライズされた桁区切り記号文字を挿入します。</span><span class="sxs-lookup"><span data-stu-id="ad698-144">As a group separator, it inserts a localized group separator character between each group.</span></span> <span data-ttu-id="ad698-145">数値位取り指定子としては、指定されたコンマごとに、数値を 1000 で除算します。</span><span class="sxs-lookup"><span data-stu-id="ad698-145">As a number scaling specifier, it divides a number by 1000 for each comma specified.</span></span><br /><br /> <span data-ttu-id="ad698-146">詳細情報:["," カスタム指定子](#SpecifierTh)。</span><span class="sxs-lookup"><span data-stu-id="ad698-146">More information: [The "," Custom Specifier](#SpecifierTh).</span></span>|<span data-ttu-id="ad698-147">桁区切り記号:</span><span class="sxs-lookup"><span data-stu-id="ad698-147">Group separator specifier:</span></span><br /><br /> <span data-ttu-id="ad698-148">2147483647 ("##,#", en-US) -> 2,147,483,647</span><span class="sxs-lookup"><span data-stu-id="ad698-148">2147483647 ("##,#", en-US) -> 2,147,483,647</span></span><br /><br /> <span data-ttu-id="ad698-149">2147483647 ("##,#", es-ES) -> 2.147.483.647</span><span class="sxs-lookup"><span data-stu-id="ad698-149">2147483647 ("##,#", es-ES) -> 2.147.483.647</span></span><br /><br /> <span data-ttu-id="ad698-150">位取り指定子:</span><span class="sxs-lookup"><span data-stu-id="ad698-150">Scaling specifier:</span></span><br /><br /> <span data-ttu-id="ad698-151">2147483647 ("#,#,,", en-US) -> 2,147</span><span class="sxs-lookup"><span data-stu-id="ad698-151">2147483647 ("#,#,,", en-US) -> 2,147</span></span><br /><br /> <span data-ttu-id="ad698-152">2147483647 ("#,#,,", es-ES) -> 2.147</span><span class="sxs-lookup"><span data-stu-id="ad698-152">2147483647 ("#,#,,", es-ES) -> 2.147</span></span>|
|<span data-ttu-id="ad698-153">"%"</span><span class="sxs-lookup"><span data-stu-id="ad698-153">"%"</span></span>|<span data-ttu-id="ad698-154">パーセント プレースホルダー</span><span class="sxs-lookup"><span data-stu-id="ad698-154">Percentage placeholder</span></span>|<span data-ttu-id="ad698-155">数値に 100 を乗算し、結果の文字列に、ローカライズされたパーセント記号を挿入します。</span><span class="sxs-lookup"><span data-stu-id="ad698-155">Multiplies a number by 100 and inserts a localized percentage symbol in the result string.</span></span><br /><br /> <span data-ttu-id="ad698-156">詳細情報:["%" カスタム指定子](#SpecifierPct)。</span><span class="sxs-lookup"><span data-stu-id="ad698-156">More information: [The "%" Custom Specifier](#SpecifierPct).</span></span>|<span data-ttu-id="ad698-157">0.3697 ("%#0.00", en-US) -> %36.97</span><span class="sxs-lookup"><span data-stu-id="ad698-157">0.3697 ("%#0.00", en-US) -> %36.97</span></span><br /><br /> <span data-ttu-id="ad698-158">0.3697 ("%#0.00", el-GR) -> %36,97</span><span class="sxs-lookup"><span data-stu-id="ad698-158">0.3697 ("%#0.00", el-GR) -> %36,97</span></span><br /><br /> <span data-ttu-id="ad698-159">0.3697 ("##.0 %", en-US) -> 37.0 %</span><span class="sxs-lookup"><span data-stu-id="ad698-159">0.3697 ("##.0 %", en-US) -> 37.0 %</span></span><br /><br /> <span data-ttu-id="ad698-160">0.3697 ("##.0 %", el-GR) -> 37,0 %</span><span class="sxs-lookup"><span data-stu-id="ad698-160">0.3697 ("##.0 %", el-GR) -> 37,0 %</span></span>|
|<span data-ttu-id="ad698-161">"‰"</span><span class="sxs-lookup"><span data-stu-id="ad698-161">"‰"</span></span>|<span data-ttu-id="ad698-162">パーミル プレースホルダー</span><span class="sxs-lookup"><span data-stu-id="ad698-162">Per mille placeholder</span></span>|<span data-ttu-id="ad698-163">数値に 1000 を乗算し、結果の文字列にローカライズされたパーミル記号を挿入します。</span><span class="sxs-lookup"><span data-stu-id="ad698-163">Multiplies a number by 1000 and inserts a localized per mille symbol in the result string.</span></span><br /><br /> <span data-ttu-id="ad698-164">詳細情報:["‰" カスタム指定子](#SpecifierPerMille)。</span><span class="sxs-lookup"><span data-stu-id="ad698-164">More information: [The "‰" Custom Specifier](#SpecifierPerMille).</span></span>|<span data-ttu-id="ad698-165">0.03697 ("#0.00‰", en-US) -> 36.97‰</span><span class="sxs-lookup"><span data-stu-id="ad698-165">0.03697 ("#0.00‰", en-US) -> 36.97‰</span></span><br /><br /> <span data-ttu-id="ad698-166">0.03697 ("#0.00‰", ru-RU) -> 36,97‰</span><span class="sxs-lookup"><span data-stu-id="ad698-166">0.03697 ("#0.00‰", ru-RU) -> 36,97‰</span></span>|
|<span data-ttu-id="ad698-167">"E0"</span><span class="sxs-lookup"><span data-stu-id="ad698-167">"E0"</span></span><br /><br /> <span data-ttu-id="ad698-168">"E+0"</span><span class="sxs-lookup"><span data-stu-id="ad698-168">"E+0"</span></span><br /><br /> <span data-ttu-id="ad698-169">"E-0"</span><span class="sxs-lookup"><span data-stu-id="ad698-169">"E-0"</span></span><br /><br /> <span data-ttu-id="ad698-170">"E0"</span><span class="sxs-lookup"><span data-stu-id="ad698-170">"e0"</span></span><br /><br /> <span data-ttu-id="ad698-171">"E+0"</span><span class="sxs-lookup"><span data-stu-id="ad698-171">"e+0"</span></span><br /><br /> <span data-ttu-id="ad698-172">"E-0"</span><span class="sxs-lookup"><span data-stu-id="ad698-172">"e-0"</span></span>|<span data-ttu-id="ad698-173">指数表記</span><span class="sxs-lookup"><span data-stu-id="ad698-173">Exponential notation</span></span>|<span data-ttu-id="ad698-174">後に 0 (ゼロ) が 1 つ以上続く場合に、指数表記を使用して結果の書式を設定します。</span><span class="sxs-lookup"><span data-stu-id="ad698-174">If followed by at least one 0 (zero), formats the result using exponential notation.</span></span> <span data-ttu-id="ad698-175">大文字 "E" と小文字 "e" は、結果の文字列の指数記号を大文字にするか小文字にするかを示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-175">The case of "E" or "e" indicates the case of the exponent symbol in the result string.</span></span> <span data-ttu-id="ad698-176">"E" 文字または "e" 文字の後に続くゼロの数によって、指数部の最小桁数が決まります。</span><span class="sxs-lookup"><span data-stu-id="ad698-176">The number of zeros following the "E" or "e" character determines the minimum number of digits in the exponent.</span></span> <span data-ttu-id="ad698-177">正符号 (+) は、符号文字が指数部の前に常に挿入されることを示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-177">A plus sign (+) indicates that a sign character always precedes the exponent.</span></span> <span data-ttu-id="ad698-178">負符号 (-) は、指数部が負の値の場合にだけその前に符号文字が挿入されることを示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-178">A minus sign (-) indicates that a sign character precedes only negative exponents.</span></span><br /><br /> <span data-ttu-id="ad698-179">詳細情報:["E" カスタム指定子と "e" カスタム指定子](#SpecifierExponent)。</span><span class="sxs-lookup"><span data-stu-id="ad698-179">More information: [The "E" and "e" Custom Specifiers](#SpecifierExponent).</span></span>|<span data-ttu-id="ad698-180">987654 ("#0.0e0") -> 98.8e4</span><span class="sxs-lookup"><span data-stu-id="ad698-180">987654 ("#0.0e0") -> 98.8e4</span></span><br /><br /> <span data-ttu-id="ad698-181">1503.92311 ("0.0##e+00") -> 1.504e+03</span><span class="sxs-lookup"><span data-stu-id="ad698-181">1503.92311 ("0.0##e+00") -> 1.504e+03</span></span><br /><br /> <span data-ttu-id="ad698-182">1.8901385E-16 ("0.0e+00") -> 1.9e-16</span><span class="sxs-lookup"><span data-stu-id="ad698-182">1.8901385E-16 ("0.0e+00") -> 1.9e-16</span></span>|
|<span data-ttu-id="ad698-183">"\\"</span><span class="sxs-lookup"><span data-stu-id="ad698-183">"\\"</span></span>|<span data-ttu-id="ad698-184">エスケープ文字</span><span class="sxs-lookup"><span data-stu-id="ad698-184">Escape character</span></span>|<span data-ttu-id="ad698-185">この文字の次の文字はカスタム書式指定子ではなくリテラルとして解釈されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-185">Causes the next character to be interpreted as a literal rather than as a custom format specifier.</span></span><br /><br /> <span data-ttu-id="ad698-186">詳細情報:["\\" エスケープ文字](#SpecifierEscape)。</span><span class="sxs-lookup"><span data-stu-id="ad698-186">More information: [The "\\" Escape Character](#SpecifierEscape).</span></span>|<span data-ttu-id="ad698-187">987654 ("\\###00\\#") -> #987654#</span><span class="sxs-lookup"><span data-stu-id="ad698-187">987654 ("\\###00\\#") -> #987654#</span></span>|
|<span data-ttu-id="ad698-188">'*文字列*'</span><span class="sxs-lookup"><span data-stu-id="ad698-188">'*string*'</span></span><br /><br /> <span data-ttu-id="ad698-189">"*文字列*"</span><span class="sxs-lookup"><span data-stu-id="ad698-189">"*string*"</span></span>|<span data-ttu-id="ad698-190">リテラル文字列区切り記号</span><span class="sxs-lookup"><span data-stu-id="ad698-190">Literal string delimiter</span></span>|<span data-ttu-id="ad698-191">囲まれた文字列が結果の文字列にそのままコピーされることを示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-191">Indicates that the enclosed characters should be copied to the result string unchanged.</span></span><br/><br/><span data-ttu-id="ad698-192">詳細情報:[文字リテラル](#character-literals)。</span><span class="sxs-lookup"><span data-stu-id="ad698-192">More information: [Character literals](#character-literals).</span></span>|<span data-ttu-id="ad698-193">68 ("# 'degrees'") -> 68 degrees</span><span class="sxs-lookup"><span data-stu-id="ad698-193">68 ("# 'degrees'") -> 68 degrees</span></span><br /><br /> <span data-ttu-id="ad698-194">68 ("#' degrees'") -> 68 degrees</span><span class="sxs-lookup"><span data-stu-id="ad698-194">68 ("#' degrees'") -> 68 degrees</span></span>|
|<span data-ttu-id="ad698-195">;</span><span class="sxs-lookup"><span data-stu-id="ad698-195">;</span></span>|<span data-ttu-id="ad698-196">セクション区切り記号</span><span class="sxs-lookup"><span data-stu-id="ad698-196">Section separator</span></span>|<span data-ttu-id="ad698-197">正の数値、負の数値、およびゼロの数値に対して、別々の書式指定文字列を使用してセクションを定義します。</span><span class="sxs-lookup"><span data-stu-id="ad698-197">Defines sections with separate format strings for positive, negative, and zero numbers.</span></span><br /><br /> <span data-ttu-id="ad698-198">詳細情報:[";" セクション区切り記号](#SectionSeparator)。</span><span class="sxs-lookup"><span data-stu-id="ad698-198">More information: [The ";" Section Separator](#SectionSeparator).</span></span>|<span data-ttu-id="ad698-199">12.345 ("#0.0#;(#0.0#);-\0-") -> 12.35</span><span class="sxs-lookup"><span data-stu-id="ad698-199">12.345 ("#0.0#;(#0.0#);-\0-") -> 12.35</span></span><br /><br /> <span data-ttu-id="ad698-200">0 ("#0.0#;(#0.0#);-\0-") -> -0-</span><span class="sxs-lookup"><span data-stu-id="ad698-200">0 ("#0.0#;(#0.0#);-\0-") -> -0-</span></span><br /><br /> <span data-ttu-id="ad698-201">-12.345 ("#0.0#;(#0.0#);-\0-") -> (12.35)</span><span class="sxs-lookup"><span data-stu-id="ad698-201">-12.345 ("#0.0#;(#0.0#);-\0-") -> (12.35)</span></span><br /><br /> <span data-ttu-id="ad698-202">12.345 ("#0.0#;(#0.0#)") -> 12.35</span><span class="sxs-lookup"><span data-stu-id="ad698-202">12.345 ("#0.0#;(#0.0#)") -> 12.35</span></span><br /><br /> <span data-ttu-id="ad698-203">0 ("#0.0#;(#0.0#)") -> 0.0</span><span class="sxs-lookup"><span data-stu-id="ad698-203">0 ("#0.0#;(#0.0#)") -> 0.0</span></span><br /><br /> <span data-ttu-id="ad698-204">-12.345 ("#0.0#;(#0.0#)") -> (12.35)</span><span class="sxs-lookup"><span data-stu-id="ad698-204">-12.345 ("#0.0#;(#0.0#)") -> (12.35)</span></span>|
|<span data-ttu-id="ad698-205">その他</span><span class="sxs-lookup"><span data-stu-id="ad698-205">Other</span></span>|<span data-ttu-id="ad698-206">上記以外のすべての文字</span><span class="sxs-lookup"><span data-stu-id="ad698-206">All other characters</span></span>|<span data-ttu-id="ad698-207">文字が結果の文字列にそのままコピーされます。</span><span class="sxs-lookup"><span data-stu-id="ad698-207">The character is copied to the result string unchanged.</span></span><br/><br/><span data-ttu-id="ad698-208">詳細情報:[文字リテラル](#character-literals)。</span><span class="sxs-lookup"><span data-stu-id="ad698-208">More information: [Character literals](#character-literals).</span></span>|<span data-ttu-id="ad698-209">68 ("# °") -> 68 °</span><span class="sxs-lookup"><span data-stu-id="ad698-209">68 ("# °") -> 68 °</span></span>|

<span data-ttu-id="ad698-210">以降では、それぞれのカスタム数値書式指定子について詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="ad698-210">The following sections provide detailed information about each of the custom numeric format specifiers.</span></span>

[!INCLUDE[C# interactive-note](~/includes/csharp-interactive-partial-note.md)]

<a name="Specifier0"></a>

## <a name="the-0-custom-specifier"></a><span data-ttu-id="ad698-211">"0" カスタム指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-211">The "0" custom specifier</span></span>

<span data-ttu-id="ad698-212">"0" カスタム書式指定子は、ゼロ プレースホルダー記号として機能します。</span><span class="sxs-lookup"><span data-stu-id="ad698-212">The "0" custom format specifier serves as a zero-placeholder symbol.</span></span> <span data-ttu-id="ad698-213">書式が設定される値で、書式指定文字列のゼロに対応する位置に数字がある場合には、この数字が結果の文字列にコピーされます。それ以外の場合は、結果の文字列にゼロが表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-213">If the value that is being formatted has a digit in the position where the zero appears in the format string, that digit is copied to the result string; otherwise, a zero appears in the result string.</span></span> <span data-ttu-id="ad698-214">整数部の左端のゼロの位置と、小数部の右端のゼロの位置によって、常に結果の文字列に示される桁数が決まります。</span><span class="sxs-lookup"><span data-stu-id="ad698-214">The position of the leftmost zero before the decimal point and the rightmost zero after the decimal point determines the range of digits that are always present in the result string.</span></span>

<span data-ttu-id="ad698-215">指定子が "00" の場合、値は一の位で丸められ、小数点以下のゼロは常に切り捨てられます。</span><span class="sxs-lookup"><span data-stu-id="ad698-215">The "00" specifier causes the value to be rounded to the nearest digit preceding the decimal, where rounding away from zero is always used.</span></span> <span data-ttu-id="ad698-216">たとえば、"00" を指定して 34.5 を書式設定すると、結果の値は 35 になります。</span><span class="sxs-lookup"><span data-stu-id="ad698-216">For example, formatting 34.5 with "00" would result in the value 35.</span></span>

<span data-ttu-id="ad698-217">次の例では、ゼロ プレースホルダーを含むカスタム書式指定文字列を使って書式設定された複数の値を表示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-217">The following example displays several values that are formatted by using custom format strings that include zero placeholders.</span></span>

[!code-cpp[Formatting.Numeric.Custom#1](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#1)]
[!code-csharp[Formatting.Numeric.Custom#1](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#1)]
[!code-vb[Formatting.Numeric.Custom#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#1)]

[<span data-ttu-id="ad698-218">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-218">Back to table</span></span>](#table)

<a name="SpecifierD"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="ad698-219">"#" カスタム指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-219">The "#" custom specifier</span></span>

<span data-ttu-id="ad698-220">"#" カスタム書式指定子は、桁プレースホルダー記号として機能します。</span><span class="sxs-lookup"><span data-stu-id="ad698-220">The "#" custom format specifier serves as a digit-placeholder symbol.</span></span> <span data-ttu-id="ad698-221">書式が指定される値で、書式指定文字列の "#" 記号に対応する位置に数字がある場合には、この数字が結果の文字列にコピーされます。</span><span class="sxs-lookup"><span data-stu-id="ad698-221">If the value that is being formatted has a digit in the position where the "#" symbol appears in the format string, that digit is copied to the result string.</span></span> <span data-ttu-id="ad698-222">それ以外の場合は、結果の文字列のこの位置には何も格納されません。</span><span class="sxs-lookup"><span data-stu-id="ad698-222">Otherwise, nothing is stored in that position in the result string.</span></span>

<span data-ttu-id="ad698-223">この指定子では、文字列の唯一の桁の値がゼロであっても、この桁が有効桁でない場合には、ゼロは表示されません。</span><span class="sxs-lookup"><span data-stu-id="ad698-223">Note that this specifier never displays a zero that is not a significant digit, even if zero is the only digit in the string.</span></span> <span data-ttu-id="ad698-224">表示される数値の有効桁である場合にのみゼロが表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-224">It will display zero only if it is a significant digit in the number that is being displayed.</span></span>

<span data-ttu-id="ad698-225">書式指定文字列が "##" の場合は、値は一の位で丸められ、小数点以下のゼロは常に切り捨てられます。</span><span class="sxs-lookup"><span data-stu-id="ad698-225">The "##" format string causes the value to be rounded to the nearest digit preceding the decimal, where rounding away from zero is always used.</span></span> <span data-ttu-id="ad698-226">たとえば、"##" を指定して 34.5 を書式設定すると、結果の値は 35 になります。</span><span class="sxs-lookup"><span data-stu-id="ad698-226">For example, formatting 34.5 with "##" would result in the value 35.</span></span>

<span data-ttu-id="ad698-227">次の例では、桁プレースホルダーを含むカスタム書式指定文字列を使って書式設定された複数の値を表示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-227">The following example displays several values that are formatted by using custom format strings that include digit placeholders.</span></span>

[!code-cpp[Formatting.Numeric.Custom#2](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#2)]
[!code-csharp[Formatting.Numeric.Custom#2](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#2)]
[!code-vb[Formatting.Numeric.Custom#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#2)]

<span data-ttu-id="ad698-228">欠落している数字や先頭のゼロをスペースに置き換える結果の文字列を戻すには、次の例に示すように、 [複合書式指定機能](composite-formatting.md) を使用して、フィールド幅を指定します。</span><span class="sxs-lookup"><span data-stu-id="ad698-228">To return a result string in which absent digits or leading zeroes are replaced by spaces, use the [composite formatting feature](composite-formatting.md) and specify a field width, as the following example illustrates.</span></span>

[!code-cpp[Formatting.Numeric.Custom#12](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/SpaceOrDigit1.cpp#12)]
[!code-csharp[Formatting.Numeric.Custom#12](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/SpaceOrDigit1.cs#12)]
[!code-vb[Formatting.Numeric.Custom#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/SpaceOrDigit1.vb#12)]

[<span data-ttu-id="ad698-229">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-229">Back to table</span></span>](#table)

<a name="SpecifierPt"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="ad698-230">"." カスタム指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-230">The "." custom specifier</span></span>

<span data-ttu-id="ad698-231">"." カスタム書式指定子は、ローカライズされた小数点を結果の文字列に挿入します。</span><span class="sxs-lookup"><span data-stu-id="ad698-231">The "." custom format specifier inserts a localized decimal separator into the result string.</span></span> <span data-ttu-id="ad698-232">書式指定文字列の 1 番目のピリオドによって、書式設定後の値での小数点の位置が決定します。指定されている他のピリオドは無視されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-232">The first period in the format string determines the location of the decimal separator in the formatted value; any additional periods are ignored.</span></span>

<span data-ttu-id="ad698-233">結果の文字列の中で小数点として使用される文字は、ピリオドであるとは限りません。書式設定を制御する <xref:System.Globalization.NumberFormatInfo.NumberDecimalSeparator%2A> オブジェクトの <xref:System.Globalization.NumberFormatInfo> プロパティによって決定されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-233">The character that is used as the decimal separator in the result string is not always a period; it is determined by the <xref:System.Globalization.NumberFormatInfo.NumberDecimalSeparator%2A> property of the <xref:System.Globalization.NumberFormatInfo> object that controls formatting.</span></span>

<span data-ttu-id="ad698-234">次の例では、結果として得られるさまざまな文字列の小数点位置を、"." 書式指定子を使って定義しています。</span><span class="sxs-lookup"><span data-stu-id="ad698-234">The following example uses the "." format specifier to define the location of the decimal point in several result strings.</span></span>

[!code-cpp[Formatting.Numeric.Custom#3](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#3)]
[!code-csharp[Formatting.Numeric.Custom#3](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#3)]
[!code-vb[Formatting.Numeric.Custom#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#3)]

[<span data-ttu-id="ad698-235">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-235">Back to table</span></span>](#table)

<a name="SpecifierTh"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="ad698-236">"," カスタム指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-236">The "," custom specifier</span></span>

<span data-ttu-id="ad698-237">"," 文字は、桁区切り記号および数値位取り指定子の両方として機能します。</span><span class="sxs-lookup"><span data-stu-id="ad698-237">The "," character serves as both a group separator and a number scaling specifier.</span></span>

- <span data-ttu-id="ad698-238">桁区切り記号: 数値の整数部の桁を書式設定する 2 つの桁プレースホルダー (0 または #) の間に 1 つ以上のコンマが指定されている場合は、出力の整数部分で各数値グループの間に桁区切り記号文字が挿入されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-238">Group separator: If one or more commas are specified between two digit placeholders (0 or #) that format the integral digits of a number, a group separator character is inserted between each number group in the integral part of the output.</span></span>

  <span data-ttu-id="ad698-239">現在の <xref:System.Globalization.NumberFormatInfo.NumberGroupSeparator%2A> オブジェクトの <xref:System.Globalization.NumberFormatInfo.NumberGroupSizes%2A> プロパティと <xref:System.Globalization.NumberFormatInfo> プロパティによって、桁区切り記号として使用される文字および各数値グループのサイズが決まります。</span><span class="sxs-lookup"><span data-stu-id="ad698-239">The <xref:System.Globalization.NumberFormatInfo.NumberGroupSeparator%2A> and <xref:System.Globalization.NumberFormatInfo.NumberGroupSizes%2A> properties of the current <xref:System.Globalization.NumberFormatInfo> object determine the character used as the number group separator and the size of each number group.</span></span> <span data-ttu-id="ad698-240">たとえば、文字列 "#,#" およびインバリアント カルチャを使用して数値 1000 が書式設定される場合は、出力が "1,000" となります。</span><span class="sxs-lookup"><span data-stu-id="ad698-240">For example, if the string "#,#" and the invariant culture are used to format the number 1000, the output is "1,000".</span></span>

- <span data-ttu-id="ad698-241">数値位取り指定子: 明示的または暗黙的な小数点のすぐ左側に 1 つ以上のコンマが指定されている場合は、コンマごとに書式設定対象の数値が 1000 で除算されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-241">Number scaling specifier: If one or more commas are specified immediately to the left of the explicit or implicit decimal point, the number to be formatted is divided by 1000 for each comma.</span></span> <span data-ttu-id="ad698-242">たとえば、"0,," 文字列を使用して数値 1 億が書式設定された場合、出力は "100" となります。</span><span class="sxs-lookup"><span data-stu-id="ad698-242">For example, if the string "0,," is used to format the number 100 million, the output is "100".</span></span>

<span data-ttu-id="ad698-243">桁区切り記号および数値位取り指定子は、同じ書式指定文字列で使用できます。</span><span class="sxs-lookup"><span data-stu-id="ad698-243">You can use group separator and number scaling specifiers in the same format string.</span></span> <span data-ttu-id="ad698-244">たとえば、"#,0,," 文字列およびインバリアント カルチャを使用して 10 億の数値を書式設定した場合、出力は "1,000" となります。</span><span class="sxs-lookup"><span data-stu-id="ad698-244">For example, if the string "#,0,," and the invariant culture are used to format the number one billion, the output is "1,000".</span></span>

<span data-ttu-id="ad698-245">桁区切り記号としてコンマを使用する例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-245">The following example illustrates the use of the comma as a group separator.</span></span>

[!code-cpp[Formatting.Numeric.Custom#4](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#4)]
[!code-csharp[Formatting.Numeric.Custom#4](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#4)]
[!code-vb[Formatting.Numeric.Custom#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#4)]

<span data-ttu-id="ad698-246">数値の位取り指定子としてコンマを使用する例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-246">The following example illustrates the use of the comma as a specifier for number scaling.</span></span>

[!code-cpp[Formatting.Numeric.Custom#5](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#5)]
[!code-csharp[Formatting.Numeric.Custom#5](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#5)]
[!code-vb[Formatting.Numeric.Custom#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#5)]

[<span data-ttu-id="ad698-247">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-247">Back to table</span></span>](#table)

<a name="SpecifierPct"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="ad698-248">"%" カスタム指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-248">The "%" custom specifier</span></span>

<span data-ttu-id="ad698-249">書式指定文字列にパーセント記号 (%) があると、書式設定前に数値に 100 が乗算されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-249">A percent sign (%) in a format string causes a number to be multiplied by 100 before it is formatted.</span></span> <span data-ttu-id="ad698-250">数値では、書式指定文字列の % に対応する位置にローカライズされたパーセント記号が挿入されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-250">The localized percent symbol is inserted in the number at the location where the % appears in the format string.</span></span> <span data-ttu-id="ad698-251">使用されるパーセント記号は、現在の <xref:System.Globalization.NumberFormatInfo.PercentSymbol%2A> オブジェクトの <xref:System.Globalization.NumberFormatInfo> プロパティによって定義されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-251">The percent character used is defined by the <xref:System.Globalization.NumberFormatInfo.PercentSymbol%2A> property of the current <xref:System.Globalization.NumberFormatInfo> object.</span></span>

<span data-ttu-id="ad698-252">次の例では、"%" カスタム指定子を含むさまざまなカスタム書式指定文字列を定義します。</span><span class="sxs-lookup"><span data-stu-id="ad698-252">The following example defines several custom format strings that include the "%" custom specifier.</span></span>

[!code-cpp[Formatting.Numeric.Custom#6](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#6)]
[!code-csharp[Formatting.Numeric.Custom#6](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#6)]
[!code-vb[Formatting.Numeric.Custom#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#6)]

[<span data-ttu-id="ad698-253">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-253">Back to table</span></span>](#table)

<a name="SpecifierPerMille"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="ad698-254">"‰" カスタム指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-254">The "‰" custom specifier</span></span>

<span data-ttu-id="ad698-255">書式指定文字列にパーミル文字 (‰ または \u2030) があると、書式設定前に数値に 1000 が乗算されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-255">A per mille character (‰ or \u2030) in a format string causes a number to be multiplied by 1000 before it is formatted.</span></span> <span data-ttu-id="ad698-256">返される文字列では、書式指定文字列の ‰ に対応する位置に適切なパーミル記号が挿入されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-256">The appropriate per mille symbol is inserted in the returned string at the location where the ‰ symbol appears in the format string.</span></span> <span data-ttu-id="ad698-257">使用されるパーミル文字は、カルチャ固有の書式設定情報を指定するオブジェクトの <xref:System.Globalization.NumberFormatInfo.PerMilleSymbol%2A?displayProperty=nameWithType> プロパティによって定義されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-257">The per mille character used is defined by the <xref:System.Globalization.NumberFormatInfo.PerMilleSymbol%2A?displayProperty=nameWithType> property of the object that provides culture-specific formatting information.</span></span>

<span data-ttu-id="ad698-258">次の例では、"‰" カスタム指定子を含むカスタム書式指定文字列を定義します。</span><span class="sxs-lookup"><span data-stu-id="ad698-258">The following example defines a custom format string that includes the "‰" custom specifier.</span></span>

[!code-cpp[Formatting.Numeric.Custom#9](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#9)]
[!code-csharp[Formatting.Numeric.Custom#9](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#9)]
[!code-vb[Formatting.Numeric.Custom#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#9)]

[<span data-ttu-id="ad698-259">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-259">Back to table</span></span>](#table)

<a name="SpecifierExponent"></a>

## <a name="the-e-and-e-custom-specifiers"></a><span data-ttu-id="ad698-260">"E" カスタム指定子と "e" カスタム指定子</span><span class="sxs-lookup"><span data-stu-id="ad698-260">The "E" and "e" custom specifiers</span></span>

<span data-ttu-id="ad698-261">書式指定文字列に "E"、"E+"、"E-"、"e"、"e+"、または "e-" が含まれており、これらの文字の直後にゼロが 1 つ以上続く場合には、指数表記を使用して数値の書式が設定されます。また、数値と指数の間に "E" または "e" が挿入されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-261">If any of the strings "E", "E+", "E-", "e", "e+", or "e-" are present in the format string and are followed immediately by at least one zero, the number is formatted by using scientific notation with an "E" or "e" inserted between the number and the exponent.</span></span> <span data-ttu-id="ad698-262">指数表記インジケーターの後に続くゼロの数によって、出力の指数部の最小桁数が決まります。</span><span class="sxs-lookup"><span data-stu-id="ad698-262">The number of zeros following the scientific notation indicator determines the minimum number of digits to output for the exponent.</span></span> <span data-ttu-id="ad698-263">書式 "E+" または "e+" は、正符号または負符号が指数部の前に常に挿入されることを示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-263">The "E+" and "e+" formats indicate that a plus sign or minus sign should always precede the exponent.</span></span> <span data-ttu-id="ad698-264">書式 "E"、"E-"、"e"、または "e-" は、指数部が負の値の場合にだけその前に符号文字が挿入されることを示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-264">The "E", "E-", "e", or "e-" formats indicate that a sign character should precede only negative exponents.</span></span>

<span data-ttu-id="ad698-265">次の例では、指数表記の指定子を使用して、さまざまな数値の書式を設定します。</span><span class="sxs-lookup"><span data-stu-id="ad698-265">The following example formats several numeric values using the specifiers for scientific notation.</span></span>

[!code-cpp[Formatting.Numeric.Custom#7](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#7)]
[!code-csharp[Formatting.Numeric.Custom#7](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#7)]
[!code-vb[Formatting.Numeric.Custom#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#7)]

[<span data-ttu-id="ad698-266">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-266">Back to table</span></span>](#table)

<a name="SpecifierEscape"></a>

## <a name="the--escape-character"></a><span data-ttu-id="ad698-267">"\\" エスケープ文字</span><span class="sxs-lookup"><span data-stu-id="ad698-267">The "\\" escape character</span></span>

<span data-ttu-id="ad698-268">書式指定文字列内の "#"、"0"、"."、","、"%"、"‰" の各記号は、リテラル文字ではなく書式指定子として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-268">The "#", "0", ".", ",", "%", and "‰" symbols in a format string are interpreted as format specifiers rather than as literal characters.</span></span> <span data-ttu-id="ad698-269">カスタム書式指定文字列内での位置によっては、大文字および小文字の "E"、および + 記号と - 記号も書式指定子として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-269">Depending on their position in a custom format string, the uppercase and lowercase "E" as well as the + and - symbols may also be interpreted as format specifiers.</span></span>

<span data-ttu-id="ad698-270">文字が書式指定子として解釈されないようにするには、その文字の前に、エスケープ文字の円記号を付けます。</span><span class="sxs-lookup"><span data-stu-id="ad698-270">To prevent a character from being interpreted as a format specifier, you can precede it with a backslash, which is the escape character.</span></span> <span data-ttu-id="ad698-271">エスケープ文字は、その後に続く文字が、そのまま結果の文字列に含める必要がある文字リテラルであることを示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-271">The escape character signifies that the following character is a character literal that should be included in the result string unchanged.</span></span>

<span data-ttu-id="ad698-272">結果の文字列に円記号を含める場合は、円記号をもう 1 つ付加して、円記号自体をエスケープする必要があります (`\\`)。</span><span class="sxs-lookup"><span data-stu-id="ad698-272">To include a backslash in a result string, you must escape it with another backslash (`\\`).</span></span>

> [!NOTE]
> <span data-ttu-id="ad698-273">C++ コンパイラや C# コンパイラなど、一部のコンパイラでは、同様に、1 つの円記号がエスケープ文字として解釈されることがあります。</span><span class="sxs-lookup"><span data-stu-id="ad698-273">Some compilers, such as the C++ and C# compilers, may also interpret a single backslash character as an escape character.</span></span> <span data-ttu-id="ad698-274">書式設定時に文字列が正しく解釈されるようにするには、C# では、逐語的文字列リテラル文字 (@ 文字) を文字列の前に使用します。また、C# および C++ では、円記号の前にもう 1 つ円記号を付ける方法もあります。</span><span class="sxs-lookup"><span data-stu-id="ad698-274">To ensure that a string is interpreted correctly when formatting, you can use the verbatim string literal character (the @ character) before the string in C#, or add another backslash character before each backslash in C# and C++.</span></span> <span data-ttu-id="ad698-275">両方の方法を次の C# の例に示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-275">The following C# example illustrates both approaches.</span></span>

<span data-ttu-id="ad698-276">次の例では、エスケープ文字を使用して、書式設定操作で "#"、"0"、"\\" の各文字がエスケープ文字としても書式指定子としても解釈されないようにします。</span><span class="sxs-lookup"><span data-stu-id="ad698-276">The following example uses the escape character to prevent the formatting operation from interpreting the "#", "0", and "\\" characters as either escape characters or format specifiers.</span></span> <span data-ttu-id="ad698-277">この C# の例では、円記号をもう 1 つ付けて、円記号がリテラル文字として解釈されるようにしています。</span><span class="sxs-lookup"><span data-stu-id="ad698-277">The C# examples uses an additional backslash to ensure that a backslash is interpreted as a literal character.</span></span>

[!code-cpp[Formatting.Numeric.Custom#11](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/escape1.cpp#11)]
[!code-csharp-interactive[Formatting.Numeric.Custom#11](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/escape1.cs#11)]
[!code-vb[Formatting.Numeric.Custom#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/escape1.vb#11)]

[<span data-ttu-id="ad698-278">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-278">Back to table</span></span>](#table)

<a name="SectionSeparator"></a>

## <a name="the--section-separator"></a><span data-ttu-id="ad698-279">";" セクション区切り記号</span><span class="sxs-lookup"><span data-stu-id="ad698-279">The ";" section separator</span></span>

<span data-ttu-id="ad698-280">セミコロン (;) は、値が正、負、ゼロのいずれであるかに応じて異なる書式設定を数値に適用する条件付き書式指定子です。</span><span class="sxs-lookup"><span data-stu-id="ad698-280">The semicolon (;) is a conditional format specifier that applies different formatting to a number depending on whether its value is positive, negative, or zero.</span></span> <span data-ttu-id="ad698-281">このように数値の内容によって適用する書式を変更するには、カスタム書式指定文字列に、セミコロンで区切ったセクションを最大 3 つまで作成します。</span><span class="sxs-lookup"><span data-stu-id="ad698-281">To produce this behavior, a custom format string can contain up to three sections separated by semicolons.</span></span> <span data-ttu-id="ad698-282">これらのセクションの説明を次に示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-282">These sections are described in the following table.</span></span>

|<span data-ttu-id="ad698-283">セクションの数</span><span class="sxs-lookup"><span data-stu-id="ad698-283">Number of sections</span></span>|<span data-ttu-id="ad698-284">説明</span><span class="sxs-lookup"><span data-stu-id="ad698-284">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="ad698-285">1 つ</span><span class="sxs-lookup"><span data-stu-id="ad698-285">One section</span></span>|<span data-ttu-id="ad698-286">書式指定文字列はすべての値に適用されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-286">The format string applies to all values.</span></span>|
|<span data-ttu-id="ad698-287">2 つ</span><span class="sxs-lookup"><span data-stu-id="ad698-287">Two sections</span></span>|<span data-ttu-id="ad698-288">最初のセクションが正の値とゼロに適用され、2 番目のセクションが負の値に適用されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-288">The first section applies to positive values and zeros, and the second section applies to negative values.</span></span><br /><br /> <span data-ttu-id="ad698-289">書式設定対象の数値が負の数値であるが、2 番目のセクションの書式指定に従って丸めた結果ゼロになる場合には、1 番目のセクションの書式に従ってこのゼロが書式設定されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-289">If the number to be formatted is negative, but becomes zero after rounding according to the format in the second section, the resulting zero is formatted according to the first section.</span></span>|
|<span data-ttu-id="ad698-290">3 つ</span><span class="sxs-lookup"><span data-stu-id="ad698-290">Three sections</span></span>|<span data-ttu-id="ad698-291">最初のセクションが正の値、2 番目のセクションが負の値、3 番目のセクションがゼロに適用されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-291">The first section applies to positive values, the second section applies to negative values, and the third section applies to zeros.</span></span><br /><br /> <span data-ttu-id="ad698-292">ゼロ以外の値すべてに 1 番目のセクションが適用される場合には、2 番目のセクションが空になる (セミコロンの間に何も表示されない) ことがあります。</span><span class="sxs-lookup"><span data-stu-id="ad698-292">The second section can be left empty (by having nothing between the semicolons), in which case the first section applies to all nonzero values.</span></span><br /><br /> <span data-ttu-id="ad698-293">書式設定対象の数値がゼロ以外の負の数値であるが、1 番目または 2 番目のセクションの書式に従って丸めた結果ゼロになる場合には、3 番目のセクションの書式に従ってこのゼロが書式設定されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-293">If the number to be formatted is nonzero, but becomes zero after rounding according to the format in the first or second section, the resulting zero is formatted according to the third section.</span></span>|

<span data-ttu-id="ad698-294">セクション区切り記号は、最後の値が書式設定されるときに、数値に関連付けられた既存の書式設定をすべて無視します。</span><span class="sxs-lookup"><span data-stu-id="ad698-294">Section separators ignore any preexisting formatting associated with a number when the final value is formatted.</span></span> <span data-ttu-id="ad698-295">たとえば、セクション区切り記号を使用する場合、負の値はマイナス記号を付けずに表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-295">For example, negative values are always displayed without a minus sign when section separators are used.</span></span> <span data-ttu-id="ad698-296">最終的に書式設定された値にマイナス記号を付ける場合は、カスタム書式指定子の中に明示的にマイナス記号を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad698-296">If you want the final formatted value to have a minus sign, you should explicitly include the minus sign as part of the custom format specifier.</span></span>

<span data-ttu-id="ad698-297">次の例では、";" 書式指定子を使用して、正数、負数、ゼロの各部分に対し、それぞれ異なる書式を設定します。</span><span class="sxs-lookup"><span data-stu-id="ad698-297">The following example uses the ";" format specifier to format positive, negative, and zero numbers differently.</span></span>

[!code-cpp[Formatting.Numeric.Custom#8](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#8)]
[!code-csharp-interactive[Formatting.Numeric.Custom#8](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#8)]
[!code-vb[Formatting.Numeric.Custom#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#8)]

[<span data-ttu-id="ad698-298">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-298">Back to table</span></span>](#table)

## <a name="character-literals"></a><span data-ttu-id="ad698-299">文字リテラル</span><span class="sxs-lookup"><span data-stu-id="ad698-299">Character literals</span></span>

<span data-ttu-id="ad698-300">カスタム数値書式指定文字列に含まれる書式指定子は、常に書式設定文字として解釈され、決してリテラル文字としては解釈されません。</span><span class="sxs-lookup"><span data-stu-id="ad698-300">Format specifiers that appear in a custom numeric format string are always interpreted as formatting characters and never as literal characters.</span></span> <span data-ttu-id="ad698-301">これには以下の文字が含まれます。</span><span class="sxs-lookup"><span data-stu-id="ad698-301">This includes the following characters:</span></span>

- [<span data-ttu-id="ad698-302">0</span><span class="sxs-lookup"><span data-stu-id="ad698-302">0</span></span>](#Specifier0)
- [\#](#SpecifierD)
- [%](#SpecifierPct)
- [<span data-ttu-id="ad698-303">‰</span><span class="sxs-lookup"><span data-stu-id="ad698-303">‰</span></span>](#SpecifierPerMille)
- <span data-ttu-id="ad698-304">'</span><span class="sxs-lookup"><span data-stu-id="ad698-304">'</span></span>
- [\\](#SpecifierEscape)
- [<span data-ttu-id="ad698-305">.</span><span class="sxs-lookup"><span data-stu-id="ad698-305">.</span></span>](#SpecifierPt)
- [<span data-ttu-id="ad698-306">,</span><span class="sxs-lookup"><span data-stu-id="ad698-306">,</span></span>](#SpecifierTh)
- <span data-ttu-id="ad698-307">[E または e](#SpecifierExponent)。書式指定文字列の位置によって変わります。</span><span class="sxs-lookup"><span data-stu-id="ad698-307">[E or e](#SpecifierExponent), depending on its position in the format string.</span></span>

<span data-ttu-id="ad698-308">その他の文字はすべて、文字リテラルとして常に解釈され、書式設定操作では、変更されずに結果の文字列に含まれます。</span><span class="sxs-lookup"><span data-stu-id="ad698-308">All other characters are always interpreted as character literals and, in a formatting operation, are included in the result string unchanged.</span></span>  <span data-ttu-id="ad698-309">解析操作では、これらは入力文字列の文字と完全に一致している必要があります。比較では大文字小文字を区別します。</span><span class="sxs-lookup"><span data-stu-id="ad698-309">In a parsing operation, they must match the characters in the input string exactly; the comparison is case-sensitive.</span></span>

<span data-ttu-id="ad698-310">次の例は、リテラル文字の単位 (この場合は千単位) の一般的な使用例を示しています。</span><span class="sxs-lookup"><span data-stu-id="ad698-310">The following example illustrates one common use of literal character units (in this case, thousands):</span></span>

[!code-csharp-interactive[literal characters](~/samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/literal2.cs#1)]
[!code-vb[literal characters](~/samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/literal2.vb#1)]

<span data-ttu-id="ad698-311">文字が結果の文字列に含まれるように、または入力文字列で正常に解析されるように、文字が書式指定文字としてではなく、リテラル文字として解釈されることを示すには、次の 2 つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="ad698-311">There are two ways to indicate that characters are to be interpreted as literal characters and not as formatting characters, so that they can be included in a result string or successfully parsed in an input string:</span></span>

- <span data-ttu-id="ad698-312">書式指定文字をエスケープします。</span><span class="sxs-lookup"><span data-stu-id="ad698-312">By escaping a formatting character.</span></span> <span data-ttu-id="ad698-313">詳細については、["\\" 文字](#SpecifierEscape)のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad698-313">For more information, see [The "\\" escape character](#SpecifierEscape).</span></span>

- <span data-ttu-id="ad698-314">リテラル文字列全体を引用符のアポストロフィで囲みます。</span><span class="sxs-lookup"><span data-stu-id="ad698-314">By enclosing the entire literal string in quotation apostrophes.</span></span>

<span data-ttu-id="ad698-315">次の例では、両方のアプローチを使用して、カスタム数値書式指定文字列に予約文字を含めています。</span><span class="sxs-lookup"><span data-stu-id="ad698-315">The following example uses both approaches to include reserved characters in a custom numeric format string.</span></span>

[!code-csharp-interactive[including reserved characters](~/samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/literal1.cs#1)]
[!code-vb[including reserved characters](~/samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/literal1.vb#1)]

<a name="NotesCustomFormatting"></a>

## <a name="notes"></a><span data-ttu-id="ad698-316">メモ</span><span class="sxs-lookup"><span data-stu-id="ad698-316">Notes</span></span>

### <a name="floating-point-infinities-and-nan"></a><span data-ttu-id="ad698-317">浮動小数点の無限大値と NaN (非数) 値</span><span class="sxs-lookup"><span data-stu-id="ad698-317">Floating-Point infinities and NaN</span></span>

<span data-ttu-id="ad698-318"><xref:System.Single> の浮動小数点型または <xref:System.Double> の浮動小数点型が正の無限大、負の無限大、または NaN (非数) である場合は、書式指定文字列とは関係なく、現在適用可能な <xref:System.Globalization.NumberFormatInfo.PositiveInfinitySymbol%2A>オブジェクトによって指定される <xref:System.Globalization.NumberFormatInfo.NegativeInfinitySymbol%2A>、 <xref:System.Globalization.NumberFormatInfo.NaNSymbol%2A> 、または <xref:System.Globalization.NumberFormatInfo> の各プロパティの値は、書式設定された文字列となります。</span><span class="sxs-lookup"><span data-stu-id="ad698-318">Regardless of the format string, if the value of a <xref:System.Single> or <xref:System.Double> floating-point type is positive infinity, negative infinity, or not a number (NaN), the formatted string is the value of the respective <xref:System.Globalization.NumberFormatInfo.PositiveInfinitySymbol%2A>, <xref:System.Globalization.NumberFormatInfo.NegativeInfinitySymbol%2A>, or <xref:System.Globalization.NumberFormatInfo.NaNSymbol%2A> property specified by the currently applicable <xref:System.Globalization.NumberFormatInfo> object.</span></span>

### <a name="control-panel-settings"></a><span data-ttu-id="ad698-319">コントロール パネルの設定</span><span class="sxs-lookup"><span data-stu-id="ad698-319">Control Panel settings</span></span>

<span data-ttu-id="ad698-320">コントロール パネルの **[地域と言語のオプション]** での設定は、書式設定操作によって生成される結果の文字列に影響します。</span><span class="sxs-lookup"><span data-stu-id="ad698-320">The settings in the **Regional and Language Options** item in Control Panel influence the result string produced by a formatting operation.</span></span> <span data-ttu-id="ad698-321">これらの設定は、現在のスレッド カルチャに関連付けられた <xref:System.Globalization.NumberFormatInfo> オブジェクトを初期化するために使用され、現在のスレッド カルチャから書式設定の制御に使用される値が提供されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-321">Those settings are used to initialize the <xref:System.Globalization.NumberFormatInfo> object associated with the current thread culture, and the current thread culture provides values used to govern formatting.</span></span> <span data-ttu-id="ad698-322">コンピューターで使用する設定が異なる場合は、生成される文字列も異なります。</span><span class="sxs-lookup"><span data-stu-id="ad698-322">Computers that use different settings generate different result strings.</span></span>

<span data-ttu-id="ad698-323">また、 <xref:System.Globalization.CultureInfo.%23ctor%28System.String%29> コンストラクターを使用して、現在のシステム カルチャと同じカルチャを表す新しい <xref:System.Globalization.CultureInfo> オブジェクトをインスタンス化した場合、コントロール パネルの **[地域と言語のオプション]** 項目で設定されたカスタマイズが新しい <xref:System.Globalization.CultureInfo> オブジェクトに適用されます。</span><span class="sxs-lookup"><span data-stu-id="ad698-323">In addition, if you use the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%29> constructor to instantiate a new <xref:System.Globalization.CultureInfo> object that represents the same culture as the current system culture, any customizations established by the **Regional and Language Options** item in Control Panel will be applied to the new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="ad698-324"><xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29> コンストラクターを使用すると、システムに対するカスタマイズが反映されない <xref:System.Globalization.CultureInfo> オブジェクトを作成できます。</span><span class="sxs-lookup"><span data-stu-id="ad698-324">You can use the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29> constructor to create a <xref:System.Globalization.CultureInfo> object that does not reflect a system's customizations.</span></span>

### <a name="rounding-and-fixed-point-format-strings"></a><span data-ttu-id="ad698-325">丸めと固定小数点の書式指定文字列</span><span class="sxs-lookup"><span data-stu-id="ad698-325">Rounding and fixed-point format strings</span></span>

<span data-ttu-id="ad698-326">固定小数点の書式指定文字列 (つまり指数表記の書式指定文字を含まない書式指定文字列) の場合は、小数点以下の桁数が小数点の右側にある桁プレースホルダーの数と同じである数値に丸められます。</span><span class="sxs-lookup"><span data-stu-id="ad698-326">For fixed-point format strings (that is, format strings that do not contain scientific notation format characters), numbers are rounded to as many decimal places as there are digit placeholders to the right of the decimal point.</span></span> <span data-ttu-id="ad698-327">書式指定文字列に小数点が含まれていない場合には、最も近い整数に丸められます。</span><span class="sxs-lookup"><span data-stu-id="ad698-327">If the format string does not contain a decimal point, the number is rounded to the nearest integer.</span></span> <span data-ttu-id="ad698-328">数値の桁数が、整数部の桁プレースホルダーの数よりも大きい場合には、桁プレースホルダーに収まらない桁が、結果の文字列の 1 番目の桁プレースホルダーの直前にコピーされます。</span><span class="sxs-lookup"><span data-stu-id="ad698-328">If the number has more digits than there are digit placeholders to the left of the decimal point, the extra digits are copied to the result string immediately before the first digit placeholder.</span></span>

[<span data-ttu-id="ad698-329">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-329">Back to table</span></span>](#table)

<a name="example"></a>

## <a name="example"></a><span data-ttu-id="ad698-330">例</span><span class="sxs-lookup"><span data-stu-id="ad698-330">Example</span></span>

<span data-ttu-id="ad698-331">2 つのカスタム数値書式指定文字列の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="ad698-331">The following example demonstrates two custom numeric format strings.</span></span> <span data-ttu-id="ad698-332">どちらの場合も、桁プレースホルダー (`#`) によって数値データが表示され、それ以外の文字はすべて結果の文字列にコピーされます。</span><span class="sxs-lookup"><span data-stu-id="ad698-332">In both cases, the digit placeholder (`#`) displays the numeric data, and all other characters are copied to the result string.</span></span>

[!code-cpp[Formatting.Numeric.Custom#10](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/example1.cpp#10)]
[!code-csharp-interactive[Formatting.Numeric.Custom#10](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/example1.cs#10)]
[!code-vb[Formatting.Numeric.Custom#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/example1.vb#10)]

[<span data-ttu-id="ad698-333">表のトップへ</span><span class="sxs-lookup"><span data-stu-id="ad698-333">Back to table</span></span>](#table)

## <a name="see-also"></a><span data-ttu-id="ad698-334">関連項目</span><span class="sxs-lookup"><span data-stu-id="ad698-334">See also</span></span>

- <xref:System.Globalization.NumberFormatInfo?displayProperty=nameWithType>
- [<span data-ttu-id="ad698-335">型の書式設定</span><span class="sxs-lookup"><span data-stu-id="ad698-335">Formatting Types</span></span>](formatting-types.md)
- [<span data-ttu-id="ad698-336">標準の数値書式指定文字列</span><span class="sxs-lookup"><span data-stu-id="ad698-336">Standard Numeric Format Strings</span></span>](standard-numeric-format-strings.md)
- [<span data-ttu-id="ad698-337">方法: 数値に先行するゼロを埋め込む</span><span class="sxs-lookup"><span data-stu-id="ad698-337">How to: Pad a Number with Leading Zeros</span></span>](how-to-pad-a-number-with-leading-zeros.md)
- [<span data-ttu-id="ad698-338">サンプル: .NET Core WinForms 書式設定ユーティリティ (C#)</span><span class="sxs-lookup"><span data-stu-id="ad698-338">Sample: .NET Core WinForms Formatting Utility (C#)</span></span>](/samples/dotnet/samples/windowsforms-formatting-utility-cs)
- [<span data-ttu-id="ad698-339">サンプル: .NET Core WinForms 書式設定ユーティリティ (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="ad698-339">Sample: .NET Core WinForms Formatting Utility (Visual Basic)</span></span>](/samples/dotnet/samples/windowsforms-formatting-utility-vb)
