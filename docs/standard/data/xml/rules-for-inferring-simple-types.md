---
description: '詳細情報: 単純型を推論するときの規則'
title: 単純型を推論するときの規則
ms.date: 03/30/2017
ms.assetid: 394624d6-4da0-430a-8a88-46efe40f14de
ms.openlocfilehash: 4b7c212f262d3c24a3bd4e677ee04bd169c6dd3e
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/06/2021
ms.locfileid: "99783015"
---
# <a name="rules-for-inferring-simple-types"></a><span data-ttu-id="2ff11-103">単純型を推論するときの規則</span><span class="sxs-lookup"><span data-stu-id="2ff11-103">Rules for Inferring Simple Types</span></span>

<span data-ttu-id="2ff11-104"><xref:System.Xml.Schema.XmlSchemaInference> クラスが属性と要素のデータ型を推論する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-104">Describes how the <xref:System.Xml.Schema.XmlSchemaInference> class infers the data type for attributes and elements.</span></span>  
  
 <span data-ttu-id="2ff11-105"><xref:System.Xml.Schema.XmlSchemaInference> クラスは、属性と要素のデータ型を単純型として推論します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-105">The <xref:System.Xml.Schema.XmlSchemaInference> class infers the data type for attributes and elements as simple types.</span></span> <span data-ttu-id="2ff11-106">このセクションでは、推論される可能性がある型、複数の異なる値を 1 つの型に調整する方法、スキーマ定義 `xsi` 属性の取り扱いについて説明します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-106">This section describes the potential inferred types, how multiple differing values are reconciled to a single type, and how schema-defining `xsi` attributes are handled.</span></span>  
  
## <a name="inferred-types"></a><span data-ttu-id="2ff11-107">推論型</span><span class="sxs-lookup"><span data-stu-id="2ff11-107">Inferred Types</span></span>  

 <span data-ttu-id="2ff11-108"><xref:System.Xml.Schema.XmlSchemaInference> クラスは、要素値と属性値を単純型として推論し、生成されるスキーマに型属性をインクルードします。</span><span class="sxs-lookup"><span data-stu-id="2ff11-108">The <xref:System.Xml.Schema.XmlSchemaInference> class infers element and attribute values as simple types and includes a type attribute in the resulting schema.</span></span> <span data-ttu-id="2ff11-109">推論型はすべて単純型です。</span><span class="sxs-lookup"><span data-stu-id="2ff11-109">All inferred types are simple types.</span></span> <span data-ttu-id="2ff11-110">生成されるスキーマの一部として基本型またはファセットがインクルードされることはありません。</span><span class="sxs-lookup"><span data-stu-id="2ff11-110">No base types or facets are included as part of the resulting schema.</span></span>  
  
 <span data-ttu-id="2ff11-111">XML ドキュメントで値が検出されるたびに、その値が個別に調べられます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-111">Values are examined individually as they are encountered in the XML document.</span></span> <span data-ttu-id="2ff11-112">値が調べられるときに、その値の型が推論されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-112">The type is inferred for a value at the time it is examined.</span></span> <span data-ttu-id="2ff11-113">属性または要素の型が既に推論されており、その属性または要素に対して新たに検出された値が現在推論されている型と一致しない場合、<xref:System.Xml.Schema.XmlSchemaInference> クラスは、一定の規則に基づいてその型を昇格させます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-113">If a type has been inferred for an attribute or element, and a value for the attribute or element is encountered that does not match the currently inferred type, the <xref:System.Xml.Schema.XmlSchemaInference> class promotes the type for each of a set of rules.</span></span> <span data-ttu-id="2ff11-114">型を昇格させるときの規則については、このトピックの「型の昇格」のセクションで説明します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-114">These rules are discussed in the Type Promotion section, later in this topic.</span></span>  
  
 <span data-ttu-id="2ff11-115">生成されるスキーマに含まれる可能性がある推論型を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-115">The following table lists the possible inferred types for the resulting schema.</span></span>  
  
|<span data-ttu-id="2ff11-116">単純型</span><span class="sxs-lookup"><span data-stu-id="2ff11-116">Simple Type</span></span>|<span data-ttu-id="2ff11-117">説明</span><span class="sxs-lookup"><span data-stu-id="2ff11-117">Description</span></span>|  
|-----------------|-----------------|  
|<span data-ttu-id="2ff11-118">boolean</span><span class="sxs-lookup"><span data-stu-id="2ff11-118">boolean</span></span>|<span data-ttu-id="2ff11-119">true、false、0、1</span><span class="sxs-lookup"><span data-stu-id="2ff11-119">True, false, 0, 1.</span></span>|  
|<span data-ttu-id="2ff11-120">byte</span><span class="sxs-lookup"><span data-stu-id="2ff11-120">byte</span></span>|<span data-ttu-id="2ff11-121">-128 ～ 127 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-121">Integers in the range of –128 to 127.</span></span>|  
|<span data-ttu-id="2ff11-122">unsignedByte</span><span class="sxs-lookup"><span data-stu-id="2ff11-122">unsignedByte</span></span>|<span data-ttu-id="2ff11-123">0 ～ 255 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-123">Integers in the range of 0 to 255.</span></span>|  
|<span data-ttu-id="2ff11-124">short</span><span class="sxs-lookup"><span data-stu-id="2ff11-124">short</span></span>|<span data-ttu-id="2ff11-125">-32768 ～ 32767 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-125">Integers in the range of –32768 to 32767.</span></span>|  
|<span data-ttu-id="2ff11-126">unsignedShort</span><span class="sxs-lookup"><span data-stu-id="2ff11-126">unsignedShort</span></span>|<span data-ttu-id="2ff11-127">0 ～ 65535 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-127">Integers in the range of 0 to 65535.</span></span>|  
|<span data-ttu-id="2ff11-128">int</span><span class="sxs-lookup"><span data-stu-id="2ff11-128">int</span></span>|<span data-ttu-id="2ff11-129">-2147483648 ～ 2147483647 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-129">Integers in the range of –2147483648 to 2147483647.</span></span>|  
|<span data-ttu-id="2ff11-130">unsignedInt</span><span class="sxs-lookup"><span data-stu-id="2ff11-130">unsignedInt</span></span>|<span data-ttu-id="2ff11-131">0 ～ 4294967295 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-131">Integers in the range of 0 to 4294967295.</span></span>|  
|<span data-ttu-id="2ff11-132">long</span><span class="sxs-lookup"><span data-stu-id="2ff11-132">long</span></span>|<span data-ttu-id="2ff11-133">-9223372036854775808 ～ 9223372036854775807 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-133">Integers in the range of –9223372036854775808 to 9223372036854775807.</span></span>|  
|<span data-ttu-id="2ff11-134">unsignedLong</span><span class="sxs-lookup"><span data-stu-id="2ff11-134">unsignedLong</span></span>|<span data-ttu-id="2ff11-135">0 ～ 18446744073709551615 の整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-135">Integers in the range of 0 to 18446744073709551615.</span></span>|  
|<span data-ttu-id="2ff11-136">整数</span><span class="sxs-lookup"><span data-stu-id="2ff11-136">integer</span></span>|<span data-ttu-id="2ff11-137">先頭に "-" 記号が付く可能性がある有限桁の数値。</span><span class="sxs-lookup"><span data-stu-id="2ff11-137">A finite number of digits possibly prefixed with "-".</span></span>|  
|<span data-ttu-id="2ff11-138">decimal</span><span class="sxs-lookup"><span data-stu-id="2ff11-138">decimal</span></span>|<span data-ttu-id="2ff11-139">精度が 0 ～ 28 桁の数値。</span><span class="sxs-lookup"><span data-stu-id="2ff11-139">Numerical values that contain from 0 to 28 digits of precision.</span></span>|  
|<span data-ttu-id="2ff11-140">float</span><span class="sxs-lookup"><span data-stu-id="2ff11-140">float</span></span>|<span data-ttu-id="2ff11-141">小数点数。指数を表す整数値を伴った、省略可能な "E" または "e" を付ける表記法もあります。</span><span class="sxs-lookup"><span data-stu-id="2ff11-141">Decimals optionally followed by "E" or "e" followed by an integer value representing the exponent.</span></span> <span data-ttu-id="2ff11-142">仮数部の範囲は -16777216 ～ 16777216 です。</span><span class="sxs-lookup"><span data-stu-id="2ff11-142">Decimal values can be in the range of -16777216 to 16777216.</span></span> <span data-ttu-id="2ff11-143">指数部の範囲は -149 ～ 104 です。</span><span class="sxs-lookup"><span data-stu-id="2ff11-143">Exponent values can be in the range of –149 to 104.</span></span><br /><br /> <span data-ttu-id="2ff11-144">float では、無限大および非数を表す特殊値が使用可能です。</span><span class="sxs-lookup"><span data-stu-id="2ff11-144">Float allows for special values to represent infinity and non-numeric values.</span></span> <span data-ttu-id="2ff11-145">float の特殊値は、0、-0、INF、-INF、NaN です。</span><span class="sxs-lookup"><span data-stu-id="2ff11-145">Special values for float are: 0, -0, INF, -INF, NaN.</span></span>|  
|<span data-ttu-id="2ff11-146">double</span><span class="sxs-lookup"><span data-stu-id="2ff11-146">double</span></span>|<span data-ttu-id="2ff11-147">仮数部の範囲が -9007199254740992 ～ 9007199254740992 で、指数部の範囲が -1075 ～ 970 である点を除いて、float と同じです。</span><span class="sxs-lookup"><span data-stu-id="2ff11-147">The same as float except decimal values can be in the range of -9007199254740992 to 9007199254740992, and exponent values can be in the range of –1075 to 970.</span></span><br /><br /> <span data-ttu-id="2ff11-148">double では、無限大および非数を表す特殊値が使えます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-148">Double allows for special values to represent infinity and non-numeric values.</span></span> <span data-ttu-id="2ff11-149">float の特殊値は、0、-0、INF、-INF、NaN です。</span><span class="sxs-lookup"><span data-stu-id="2ff11-149">Special values for float are: 0, -0, INF, -INF, NaN.</span></span>|  
|<span data-ttu-id="2ff11-150">duration</span><span class="sxs-lookup"><span data-stu-id="2ff11-150">duration</span></span>|<span data-ttu-id="2ff11-151">W3C の持続時間形式</span><span class="sxs-lookup"><span data-stu-id="2ff11-151">The W3C duration format.</span></span>|  
|<span data-ttu-id="2ff11-152">dateTime</span><span class="sxs-lookup"><span data-stu-id="2ff11-152">dateTime</span></span>|<span data-ttu-id="2ff11-153">W3C の日付時刻形式</span><span class="sxs-lookup"><span data-stu-id="2ff11-153">The W3C dateTime format.</span></span>|  
|<span data-ttu-id="2ff11-154">時間</span><span class="sxs-lookup"><span data-stu-id="2ff11-154">time</span></span>|<span data-ttu-id="2ff11-155">W3C の時刻形式</span><span class="sxs-lookup"><span data-stu-id="2ff11-155">The W3C time format.</span></span>|  
|<span data-ttu-id="2ff11-156">date</span><span class="sxs-lookup"><span data-stu-id="2ff11-156">date</span></span>|<span data-ttu-id="2ff11-157">年に使用できる値は 0001 ～ 9999 に制限されています。</span><span class="sxs-lookup"><span data-stu-id="2ff11-157">Year values are restricted from 0001 to 9999.</span></span>|  
|<span data-ttu-id="2ff11-158">gYearMonth</span><span class="sxs-lookup"><span data-stu-id="2ff11-158">gYearMonth</span></span>|<span data-ttu-id="2ff11-159">W3C のグレゴリオ暦の年月形式</span><span class="sxs-lookup"><span data-stu-id="2ff11-159">The W3C Gregorian month and year format.</span></span>|  
|<span data-ttu-id="2ff11-160">string</span><span class="sxs-lookup"><span data-stu-id="2ff11-160">string</span></span>|<span data-ttu-id="2ff11-161">1 つ以上の Unicode 文字</span><span class="sxs-lookup"><span data-stu-id="2ff11-161">One or more Unicode characters.</span></span>|  
  
## <a name="type-promotion"></a><span data-ttu-id="2ff11-162">型の上位変換</span><span class="sxs-lookup"><span data-stu-id="2ff11-162">Type Promotion</span></span>  

 <span data-ttu-id="2ff11-163"><xref:System.Xml.Schema.XmlSchemaInference> クラスは属性値と要素値を 1 つずつ調べます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-163">The <xref:System.Xml.Schema.XmlSchemaInference> class examines attribute and element values one at a time.</span></span> <span data-ttu-id="2ff11-164">値が検出されると、最も制限の厳しい、符号なし型が推論されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-164">As values are encountered, the most restrictive, unsigned type is inferred.</span></span> <span data-ttu-id="2ff11-165">属性または要素の型が推論されている状態で、現在推論されている型と一致しない新しい値が検出されると、推論型が現在の推論型と新しい値の両方に当てはまる新しい型に昇格します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-165">If a type has been inferred for an attribute or element, and a new value is encountered that does not match the currently inferred type, the inferred type is promoted to a new type that applies to both the currently inferred type and the new value.</span></span> <span data-ttu-id="2ff11-166"><xref:System.Xml.Schema.XmlSchemaInference> クラスは、推論型を昇格させるときに前の値を考慮します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-166">The <xref:System.Xml.Schema.XmlSchemaInference> class does consider previous values when promoting the inferred type.</span></span>  
  
 <span data-ttu-id="2ff11-167">たとえば、2 つの XML ドキュメントから取得された次の XML フラグメントを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="2ff11-167">For example, consider the following XML fragments from two XML documents:</span></span>  
  
 `<MyElement1 attr1="12" />`  
  
 `<MyElement1 attr1="52344" />`  
  
 <span data-ttu-id="2ff11-168">最初に `attr1` の値が検出されると、`attr1` の型は、値 `unsignedByte` に基づいて `12` と推論されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-168">When the first `attr1` value is encountered, the type of `attr1` is inferred as `unsignedByte` based on the value `12`.</span></span> <span data-ttu-id="2ff11-169">`attr1` の 2 番目の値が検出されると、現在推論されている型 `unsignedShort` と現在の値 `unsignedByte` に基づいて、型が `52344` に昇格します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-169">When the second `attr1` is encountered, the type is promoted to `unsignedShort` based on the currently inferred type of `unsignedByte` and the current value `52344`.</span></span>  
  
 <span data-ttu-id="2ff11-170">次に、2 つの XML ドキュメントから取得された次の XML を見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="2ff11-170">Now, consider the following XML from two XML documents:</span></span>  
  
 `<MyElement2 attr2="0" />`  
  
 `<MyElement2 attr2="true" />`  
  
 <span data-ttu-id="2ff11-171">最初に `attr2` の値が検出されると、`attr2` の型は、値 `unsignedByte` に基づいて `0` と推論されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-171">When the first `attr2` value is encountered, the type of `attr2` is inferred as `unsignedByte` based on the value `0`.</span></span> <span data-ttu-id="2ff11-172">`attr2` の 2 番目の値が検出されると、現在推論されている型 `string` と現在の値 `unsignedByte` に基づいて、型が `true` に昇格します。これは、<xref:System.Xml.Schema.XmlSchemaInference> クラスが推論型を昇格させるときに前の値を考慮するためです。</span><span class="sxs-lookup"><span data-stu-id="2ff11-172">When the second `attr2` is encountered, the type is promoted to `string` based on the currently inferred type of `unsignedByte` and the current value `true` because the <xref:System.Xml.Schema.XmlSchemaInference> class does consider previous values when promoting the inferred type.</span></span> <span data-ttu-id="2ff11-173">ただし、`attr2` の 2 つのインスタンスが、上記の説明のように 2 つの別々の XML ドキュメントで検出されたのではなく、同じ XML ドキュメントで検出された場合、`attr2` は `boolean` と推論されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-173">However, if both instances of `attr2` were encountered in the same XML document and not in two different XML documents as illustrated above, `attr2` would have been inferred as `boolean`.</span></span>  
  
### <a name="ignored-attributes-from-the-httpswwww3org2001xmlschema-instance-namespace"></a><span data-ttu-id="2ff11-174">無視される <https://www.w3.org/2001/XMLSchema-instance> 名前空間の属性</span><span class="sxs-lookup"><span data-stu-id="2ff11-174">Ignored attributes from the <https://www.w3.org/2001/XMLSchema-instance> namespace</span></span>

<span data-ttu-id="2ff11-175">スキーマの推論で無視されるスキーマ定義属性を次に示します。</span><span class="sxs-lookup"><span data-stu-id="2ff11-175">The following are schema-defining attributes that are ignored during schema inference.</span></span>  
  
|<span data-ttu-id="2ff11-176">属性</span><span class="sxs-lookup"><span data-stu-id="2ff11-176">Attribute</span></span>|<span data-ttu-id="2ff11-177">説明</span><span class="sxs-lookup"><span data-stu-id="2ff11-177">Description</span></span>|  
|---------------|-----------------|  
|`xsi:type`|<span data-ttu-id="2ff11-178">`xsi:type` が指定されている要素が検出された場合、`xsi:type` は無視されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-178">If an element is encountered with `xsi:type` specified, the `xsi:type` is ignored.</span></span>|  
|`xsi:nil`|<span data-ttu-id="2ff11-179">`xsi:nil` 属性を持った要素が検出されると、推論されるスキーマ内の要素宣言の値が `nillable="true"` に設定されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-179">If an element with an `xsi:nil` attribute is encountered, its element declaration in the inferred schema has the value of `nillable="true"`.</span></span> <span data-ttu-id="2ff11-180">`xsi:nil` 属性が `true` に設定された要素は子要素を持つことができません。</span><span class="sxs-lookup"><span data-stu-id="2ff11-180">An element with an `xsi:nil` attribute set to `true` cannot have child elements.</span></span>|  
|`xsi:schemaLocation`|<span data-ttu-id="2ff11-181">`xsi:schemaLocation` は検出されても無視されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-181">If `xsi:schemaLocation` is encountered, it is ignored.</span></span>|  
|`xsi:noNamespaceSchemaLocation`|<span data-ttu-id="2ff11-182">`xsi:noNamespaceSchemaLocation` は検出されても無視されます。</span><span class="sxs-lookup"><span data-stu-id="2ff11-182">If `xsi:noNamespaceSchemaLocation` is encountered, it is ignored.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="2ff11-183">関連項目</span><span class="sxs-lookup"><span data-stu-id="2ff11-183">See also</span></span>

- [<span data-ttu-id="2ff11-184">XML スキーマ オブジェクト モデル (SOM)</span><span class="sxs-lookup"><span data-stu-id="2ff11-184">XML Schema Object Model (SOM)</span></span>](xml-schema-object-model-som.md)
- [<span data-ttu-id="2ff11-185">XML ドキュメントからのスキーマの推論</span><span class="sxs-lookup"><span data-stu-id="2ff11-185">Inferring Schemas from XML Documents</span></span>](inferring-schemas-from-xml-documents.md)
- [<span data-ttu-id="2ff11-186">スキーマのノード型および構造を推論するときの規則</span><span class="sxs-lookup"><span data-stu-id="2ff11-186">Rules for Inferring Schema Node Types and Structure</span></span>](rules-for-inferring-schema-node-types-and-structure.md)
