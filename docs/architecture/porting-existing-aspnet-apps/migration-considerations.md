---
title: 移行に関する注意事項
description: ASP.NET MVC から .NET Core に移行するかどうか、およびその方法について適切に判断するために、チームが知っておくべきことは何でしょうか。
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: efa1efc99cbe46ef289cfd6b53ba83b3bc1b56b1
ms.sourcegitcommit: bdbf6472de867a0a11aaa5b9384a2506c24f27d2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/05/2021
ms.locfileid: "102401479"
---
# <a name="migration-considerations"></a><span data-ttu-id="d8ed6-103">移行に関する注意事項</span><span class="sxs-lookup"><span data-stu-id="d8ed6-103">Migration considerations</span></span>

<span data-ttu-id="d8ed6-104">.NET Core へのアプリの移植についてチームが答えなければならない最も基本的な質問は、"そもそもアプリを移植する必要があるのか" です。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-104">The most fundamental question teams must answer when it comes to porting their apps to .NET Core is, should they port at all?</span></span> <span data-ttu-id="d8ed6-105">ASP.NET MVC または Web API を使用して .NET Framework を維持するのが将来的に最適な方針である場合もあります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-105">In some cases, the best path forward is to remain on .NET Framework using ASP.NET MVC and/or Web API.</span></span> <span data-ttu-id="d8ed6-106">この章では、.NET Core への移行が理にかなっている理由について考察します。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-106">This chapter considers reasons why moving to .NET Core makes sense.</span></span> <span data-ttu-id="d8ed6-107">また、.NET Framework を維持するためのシナリオと方法についても考察します。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-107">The chapter also considers scenarios and counterpoints for staying on .NET Framework.</span></span>

## <a name="is-migration-to-net-core-appropriate"></a><span data-ttu-id="d8ed6-108">.NET Core への移行が適切かどうか</span><span class="sxs-lookup"><span data-stu-id="d8ed6-108">Is migration to .NET Core appropriate?</span></span>

<span data-ttu-id="d8ed6-109">まずは .NET Core (または .NET 5) への移行が推奨されるいくつかの理由を確認してみましょう。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-109">Let's start with some of the reasons why you might want to move to .NET Core (or .NET 5).</span></span> <span data-ttu-id="d8ed6-110">このリストに挙げたものは一部であり、他にも多くの理由があります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-110">There are quite a few, so don't consider this list exhaustive.</span></span>

### <a name="cross-platform-support"></a><span data-ttu-id="d8ed6-111">クロスプラットフォームのサポート</span><span class="sxs-lookup"><span data-stu-id="d8ed6-111">Cross-platform support</span></span>

<span data-ttu-id="d8ed6-112">.NET Core 上に構築されたアプリは、真のクロスプラットフォームであり、Windows、Linux、macOS で実行できます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-112">Apps built on .NET Core are truly cross-platform and can run on Windows, Linux, and macOS.</span></span> <span data-ttu-id="d8ed6-113">開発者が必要なハードウェアを使用できるだけでなく、ユーザーがアプリをどこででもホストできます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-113">Not only can your developers use whatever hardware they want, but you can also host your app anywhere.</span></span> <span data-ttu-id="d8ed6-114">たとえば、ローカル IIS からクラウド内の Azure まで、または Linux Docker コンテナーから IoT デバイスまで多岐にわたります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-114">Examples range from local IIS to Azure in the cloud or from Linux Docker containers to IoT devices.</span></span>

### <a name="performance-and-scalability"></a><span data-ttu-id="d8ed6-115">パフォーマンスと拡張性</span><span class="sxs-lookup"><span data-stu-id="d8ed6-115">Performance and scalability</span></span>

<span data-ttu-id="d8ed6-116">.NET Core で構築されたアプリは、[場所を問わず利用可能な最速の技術スタックの 1 つ](https://www.techempower.com/benchmarks/#hw=ph&test=plaintext)で実行されています。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-116">Apps built with .NET Core are running on [one of the fastest tech stacks available anywhere](https://www.techempower.com/benchmarks/#hw=ph&test=plaintext).</span></span> <span data-ttu-id="d8ed6-117">ASP.NET MVC アプリでは、(.NET Core で利用可能な新機能を利用するよう更新された場合は特に) ASP.NET Core におけるパフォーマンスの向上が多く見られます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-117">ASP.NET MVC apps often see performance improvements on ASP.NET Core, especially if they're updated to take advantage of some new features available in .NET Core.</span></span>

### <a name="cloud-native"></a><span data-ttu-id="d8ed6-118">クラウドネイティブ</span><span class="sxs-lookup"><span data-stu-id="d8ed6-118">Cloud-native</span></span>

<span data-ttu-id="d8ed6-119">上記のような理由により、.NET Core アプリはクラウド ホスティング環境での実行に適しています。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-119">For the above reasons and others, .NET Core apps are well-suited to running in cloud hosting environments.</span></span> <span data-ttu-id="d8ed6-120">軽量で高速な .NET Core アプリを Azure App Service またはコンテナーにデプロイし、必要に応じて水平方向にスケーリングして、システムの需要を即座に満たすことができます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-120">Lightweight and fast, .NET Core apps can be deployed to Azure App Services or containers and scaled horizontally as needed to meet immediate system demand.</span></span>

### <a name="maintainable"></a><span data-ttu-id="d8ed6-121">保守しやすい</span><span class="sxs-lookup"><span data-stu-id="d8ed6-121">Maintainable</span></span>

<span data-ttu-id="d8ed6-122">多くのアプリは、顧客とビジネスのニーズへの対応を続ける一方で、技術的負債が蓄積され、アプリを保守するためのコストが増加しています。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-122">For many apps, while they've continued to meet customer and business needs, technical debt has accumulated and maintaining the app has grown expensive.</span></span> <span data-ttu-id="d8ed6-123">ASP.NET Core アプリは ASP.NET MVC アプリよりもテストが簡単であるため、リファクタリングが容易になり、自信を持って拡張できます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-123">ASP.NET Core apps are more easily tested than ASP.NET MVC apps, making them easier to refactor and extend with confidence.</span></span>

### <a name="modular"></a><span data-ttu-id="d8ed6-124">モジュール式</span><span class="sxs-lookup"><span data-stu-id="d8ed6-124">Modular</span></span>

<span data-ttu-id="d8ed6-125">ASP.NET Core はモジュール式であり、フレームワークのファーストクラスのパーツとして NuGet パッケージが使用されています。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-125">ASP.NET Core is modular, using NuGet packages as a first-class part of the framework.</span></span> <span data-ttu-id="d8ed6-126">.NET Core 用に構築されたアプリはすべて依存関係の挿入をサポートしているため、特定の環境に必要な任意の実装からソリューションを簡単に作成できます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-126">Apps built for .NET Core all support dependency injection, making it easy to compose solutions from whatever implementations are needed for a given environment.</span></span> <span data-ttu-id="d8ed6-127">.NET Core でのマイクロサービスの構築は、IIS との依存関係を持つ ASP.NET MVC を使用するよりも簡単です。 .NET Core では、大規模なアプリを小さなモジュールに分割するための追加オプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-127">Building microservices with .NET Core is easier than with ASP.NET MVC with its dependency on IIS, which opens up additional options to break up large apps into smaller modules.</span></span>

### <a name="modern"></a><span data-ttu-id="d8ed6-128">モダン</span><span class="sxs-lookup"><span data-stu-id="d8ed6-128">Modern</span></span>

<span data-ttu-id="d8ed6-129">積極的に開発されたモダンな技術スタックを維持することには多くの利点があります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-129">Staying on a modern, actively developed technology stack has a host of advantages.</span></span> <span data-ttu-id="d8ed6-130">新機能と C# 言語の機能は .NET Core にのみ追加されます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-130">New features and C# language features will only be added to .NET Core.</span></span> <span data-ttu-id="d8ed6-131">.NET Framework の最新リリースはバージョン 4.8 であり、バージョン 8 以降の C# は .NET Framework を対象としていません。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-131">The .NET Framework has had its last release with version 4.8, and versions of C# beyond 8 won't target .NET Framework.</span></span> <span data-ttu-id="d8ed6-132">ASP.NET MVC は長年にわたり Microsoft によるサポートが続けられていますが、優れた .NET ソフトウェア開発者は (前述した一部のみの) 利点を考慮して、よりモダンな .NET Core フレームワークの使用に目を向けています。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-132">While ASP.NET MVC will remain supported by Microsoft for many years, the best and brightest .NET software developers are likely looking to use the more modern .NET Core framework, with all of the advantages it offers (only some of which are summarized above).</span></span> <span data-ttu-id="d8ed6-133">ASP.NET MVC アプリを維持するためのスキルを持つ開発者を探すことは、今後のどこかの時点で課題となるでしょう。これは、オンライン トレーニングやトラブルシューティングの支援が必要になるためです。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-133">Finding developers with the skills to maintain an ASP.NET MVC app will start to become a challenge at some point, as will finding online training and troubleshooting assistance.</span></span> <span data-ttu-id="d8ed6-134">おそらく ASP.NET MVC 5 に関する新規のブログ投稿はあまり多くありませんが、.NET 5.0 向けの投稿は豊富にあります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-134">There probably aren't that many new blog posts being written about ASP.NET MVC 5, while there are plenty being written for .NET 5.0, for example.</span></span>

<span data-ttu-id="d8ed6-135">.NET Core への移行を検討すべき説得力のある理由は多数ありますが、おそらくそれが本書を読んでいる理由でしょう。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-135">There are many compelling reasons to consider migrating to .NET Core, which presumably is why you're reading this book!</span></span> <span data-ttu-id="d8ed6-136">しかしここで、いくつかの欠点と、.NET Framework を使用し続ける方が賢明である理由についても考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-136">But let's consider some disadvantages and reasons why it may make more sense to remain on the .NET Framework.</span></span>

## <a name="when-is-net-framework-appropriate"></a><span data-ttu-id="d8ed6-137">.NET Framework が適している場合</span><span class="sxs-lookup"><span data-stu-id="d8ed6-137">When is .NET Framework appropriate?</span></span>

<span data-ttu-id="d8ed6-138">.NET Framework を維持する最大の理由は、アプリが積極的に開発されていない状況では前述の利点を十分に活用できないためです。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-138">The biggest reason to stay on .NET Framework is when an app isn't under active development and wouldn't benefit substantially from the advantages listed above.</span></span> <span data-ttu-id="d8ed6-139">このような場合は、アプリの移植にコストをかけるべき優れたビジネス ケースではありません。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-139">In that case, there probably isn't a good business case to incur the cost of porting the app.</span></span> <span data-ttu-id="d8ed6-140">アプリが .NET Core の利点を活用できる場合であっても、.NET Core で使用できないテクノロジが必要な状況では .NET Framework を維持する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-140">If your app might benefit from the advantages .NET Core offers, you may still need to stay on .NET Framework if you need certain technologies that are unavailable on .NET Core.</span></span> <span data-ttu-id="d8ed6-141">[.NET Core で使用できない .NET テクノロジ](../../core/porting/net-framework-tech-unavailable.md)は、アプリケーション ドメイン、リモート処理、コード アクセス セキュリティ (CAS)、セキュリティ透過性、`System.EnterpriseServices` です。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-141">There are some [.NET technologies that are unavailable on .NET Core](../../core/porting/net-framework-tech-unavailable.md), including AppDomains, Remoting, Code Access Security (CAS), Security Transparency, and `System.EnterpriseServices`.</span></span> <span data-ttu-id="d8ed6-142">これらのテクノロジとその代替手段の概要については本書で説明します。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-142">A brief summary of these technologies and their alternatives is included here.</span></span> <span data-ttu-id="d8ed6-143">詳細なガイダンスについては、ドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-143">For more detailed guidance, see the documentation.</span></span>

### <a name="application-domains"></a><span data-ttu-id="d8ed6-144">アプリケーション ドメイン</span><span class="sxs-lookup"><span data-stu-id="d8ed6-144">Application domains</span></span>

<span data-ttu-id="d8ed6-145">アプリケーション ドメイン (AppDomains) はアプリを互いに分離します。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-145">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="d8ed6-146">AppDomain にはランタイム サポートが必要で、コストがかかる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-146">AppDomains require runtime support and can be expensive.</span></span> <span data-ttu-id="d8ed6-147">追加のアプリケーション ドメインの作成はサポートされておらず、今後この機能を .NET Core に追加する予定はありません。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-147">Creating additional app domains isn't supported, and there are no plans to add this capability to .NET Core in the future.</span></span> <span data-ttu-id="d8ed6-148">コードの分離のためには、代替方法として別個のプロセスやコンテナーを使用します。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-148">For code isolation, use separate processes or containers as an alternative.</span></span>

### <a name="wcf"></a><span data-ttu-id="d8ed6-149">WCF</span><span class="sxs-lookup"><span data-stu-id="d8ed6-149">WCF</span></span>

<span data-ttu-id="d8ed6-150">サーバー側 WCF は、.NET Core ではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-150">Server-side WCF isn't supported in .NET Core.</span></span> <span data-ttu-id="d8ed6-151">.NET Core では WCF クライアントがサポートされますが、WCF ホストはサポートされません。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-151">.NET Core supports WCF clients but not WCF hosts.</span></span> <span data-ttu-id="d8ed6-152">この機能が必要なアプリは、移行の一環として別の通信テクノロジ (gRPC や REST など) にアップグレードする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-152">Apps that require this functionality will need to upgrade to a different communication technology (such as gRPC or REST) as part of a migration.</span></span>

<span data-ttu-id="d8ed6-153">[WCF クライアント ポートが .NET Foundation から提供されています](../../core/dotnet-five.md#windows-communication-foundation)。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-153">There is a [WCF client port available from the .NET Foundation](../../core/dotnet-five.md#windows-communication-foundation).</span></span> <span data-ttu-id="d8ed6-154">これは、完全にオープンソースであり、クロス プラットフォームで、Microsoft でサポートされています。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-154">It is entirely open source, cross platform, and supported by Microsoft.</span></span> <span data-ttu-id="d8ed6-155">また、コミュニティでサポートされている [CoreWCF プロジェクト](https://github.com/CoreWCF/CoreWCF)もあります。これは、Microsoft では正式にサポートされて "*いません*"。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-155">There is also a community-supported [CoreWCF project](https://github.com/CoreWCF/CoreWCF) that is *not* officially supported by Microsoft.</span></span>

### <a name="remoting"></a><span data-ttu-id="d8ed6-156">リモート処理</span><span class="sxs-lookup"><span data-stu-id="d8ed6-156">Remoting</span></span>

<span data-ttu-id="d8ed6-157">.NET リモート処理は、問題のあるアーキテクチャであると判断されました。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-157">.NET Remoting was identified as a problematic architecture.</span></span> <span data-ttu-id="d8ed6-158">AppDomain 間の通信で使用されていますが、今後はサポートされなくなります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-158">It's used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="d8ed6-159">また、リモート処理にはランタイム サポートが必要で、維持するのに高いコストがかかります。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-159">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="d8ed6-160">これらの理由から、.NET リモート処理は .NET Core でサポートされておらず、また製品チームによる将来的なサポートの追加も予定されていません。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-160">For these reasons, .NET Remoting isn't supported on .NET Core, and the product team doesn't plan on adding support for it in the future.</span></span> <span data-ttu-id="d8ed6-161">.NET Core アプリにおけるリモート処理の代替として、複数のメッセージング戦略と実装を使用できます。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-161">There are several alternative messaging strategies and implementations you can use to replace remoting in your .NET Core apps.</span></span>

### <a name="code-access-security-cas-and-security-transparency"></a><span data-ttu-id="d8ed6-162">コード アクセス セキュリティ (CAS) とセキュリティ透過性</span><span class="sxs-lookup"><span data-stu-id="d8ed6-162">Code Access Security (CAS) and Security Transparency</span></span>

<span data-ttu-id="d8ed6-163">これらのテクノロジはどちらも .NET Core ではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-163">Neither of these technologies are supported by .NET Core.</span></span> <span data-ttu-id="d8ed6-164">代わりに、オペレーティング システムが提供するセキュリティ境界を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-164">Instead, the recommendation is to use security boundaries provided by the operating system.</span></span> <span data-ttu-id="d8ed6-165">たとえば、仮想化、コンテナー、ユーザー アカウントなどです。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-165">For example, virtualization, containers, or user accounts.</span></span> <span data-ttu-id="d8ed6-166">必要最小限の特権のセットでプロセスを実行してください。</span><span class="sxs-lookup"><span data-stu-id="d8ed6-166">Run processes with the minimal set of privileges necessary.</span></span>

## <a name="references"></a><span data-ttu-id="d8ed6-167">リファレンス</span><span class="sxs-lookup"><span data-stu-id="d8ed6-167">References</span></span>

[<span data-ttu-id="d8ed6-168">.NET Core で使用できない .NET Framework テクノロジ</span><span class="sxs-lookup"><span data-stu-id="d8ed6-168">.NET Framework Technologies Unavailable on .NET Core</span></span>](../../core/porting/net-framework-tech-unavailable.md)

>[!div class="step-by-step"]
><span data-ttu-id="d8ed6-169">[前へ](introduction.md)
>[次へ](migrate-aspnet-core-2-1.md)</span><span class="sxs-lookup"><span data-stu-id="d8ed6-169">[Previous](introduction.md)
[Next](migrate-aspnet-core-2-1.md)</span></span>
