---
title: ASP.NET MVC と ASP.NET Core でのコントローラーの比較
description: MVC コントローラーは、ASP.NET MVC 5 と Web API 2 コントローラーに似ていますが、重要な違いがあります。 ASP.NET Core このセクションでは、ASP.NET MVC および Web API 2 のアプリを ASP.NET Core に移植するために必要な相違点と手順について説明します。
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: 2c2b7b848162a6ab9901ac9f7779787e2cc994ce
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401391"
---
# <a name="compare-controllers-in-aspnet-mvc-and-web-api-with-controllers-in-aspnet-core"></a><span data-ttu-id="17830-104">ASP.NET MVC と Web API のコントローラーを ASP.NET Core のコントローラーと比較する</span><span class="sxs-lookup"><span data-stu-id="17830-104">Compare controllers in ASP.NET MVC and Web API with controllers in ASP.NET Core</span></span>

<span data-ttu-id="17830-105">ASP.NET MVC 5 と Web API 2 では、2つの異なる基本型がありました `Controller` 。</span><span class="sxs-lookup"><span data-stu-id="17830-105">In ASP.NET MVC 5 and Web API 2, there were two different `Controller` base types.</span></span> <span data-ttu-id="17830-106">から継承された MVC コントローラー `Controller`から継承された Web API コントローラー `ApiController` 。</span><span class="sxs-lookup"><span data-stu-id="17830-106">MVC controllers inherited from `Controller`; Web API controllers inherited from `ApiController`.</span></span> <span data-ttu-id="17830-107">ASP.NET Core では、このオブジェクト階層はマージされています。</span><span class="sxs-lookup"><span data-stu-id="17830-107">In ASP.NET Core, this object hierarchy has been merged.</span></span> <span data-ttu-id="17830-108">ASP.NET Core の API コントローラーは、から継承して属性を追加することをお勧めし `ControllerBase` `[ApiController]` ます。</span><span class="sxs-lookup"><span data-stu-id="17830-108">It's recommended that API controllers in ASP.NET Core inherit from `ControllerBase` and add the `[ApiController]` attribute.</span></span> <span data-ttu-id="17830-109">標準のビューベースの MVC コントローラーは、から継承する必要があり `Controller` ます。</span><span class="sxs-lookup"><span data-stu-id="17830-109">Standard view-based MVC controllers should inherit from `Controller`.</span></span>

<span data-ttu-id="17830-110">どちらのフレームワークでも、コントローラーは一連のアクションメソッドを整理するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="17830-110">In both frameworks, controllers are used to organize sets of action methods.</span></span> <span data-ttu-id="17830-111">フィルターとルートは、アクションレベルに加えて、コントローラーレベルでも適用できます。</span><span class="sxs-lookup"><span data-stu-id="17830-111">Filters and routes can be applied on a controller level in addition to at the action level.</span></span> <span data-ttu-id="17830-112">これらの規則は、 `Controller` 既定の動作と属性が適用されたカスタム基本型を使用してさらに拡張できます。</span><span class="sxs-lookup"><span data-stu-id="17830-112">These conventions can be extended further by using custom base `Controller` types with default behavior and attributes applied to them.</span></span>

<span data-ttu-id="17830-113">ASP.NET MVC では、コンテンツネゴシエーションはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="17830-113">In ASP.NET MVC, content negotiation isn't supported.</span></span> <span data-ttu-id="17830-114">ASP.NET Web API 2 では、ASP.NET Core のように、コンテンツネゴシエーションがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="17830-114">ASP.NET Web API 2 does support content negotiation, as does ASP.NET Core.</span></span> <span data-ttu-id="17830-115">[コンテンツネゴシエーション](/aspnet/core/web-api/advanced/formatting)を使用すると、要求に返されるコンテンツの形式は、クライアントが提供するヘッダーによって、コンテンツを受信するための適切な方法を示すことができます。</span><span class="sxs-lookup"><span data-stu-id="17830-115">Using [content negotiation](/aspnet/core/web-api/advanced/formatting), the format of the content returned to a request can be determined by headers the client provides indicating its preferred manner of receiving the content.</span></span>

<span data-ttu-id="17830-116">ASP.NET Web API コントローラーを ASP.NET Core に移行する場合は、いくつかのコンポーネントが存在する場合は変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="17830-116">When migrating ASP.NET Web API controllers to ASP.NET Core, a few components need to be changed if they exist.</span></span> <span data-ttu-id="17830-117">これには、 `ApiController` 基底クラス、 `System.Web.Http` 名前空間、およびインターフェイスへの参照が含ま `IHttpActionResult` れます。</span><span class="sxs-lookup"><span data-stu-id="17830-117">These include references to the `ApiController` base class, the `System.Web.Http` namespace, and the `IHttpActionResult` interface.</span></span> <span data-ttu-id="17830-118">[これらの特定の相違点の移行方法に関する推奨事項につい](/aspnet/core/migration/webapi)ては、ドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="17830-118">Refer to the [documentation for recommendations on how to migrate these specific differences](/aspnet/core/migration/webapi).</span></span> <span data-ttu-id="17830-119">ASP.NET Core の API アクションの推奨される戻り値の型は `ActionResult<T>` です。</span><span class="sxs-lookup"><span data-stu-id="17830-119">Note that the preferred return type for API actions in ASP.NET Core is `ActionResult<T>`.</span></span>

<span data-ttu-id="17830-120">また、属性は `[ChildActionOnly]` ASP.NET Core ではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="17830-120">In addition, the `[ChildActionOnly]` attribute isn't supported in ASP.NET Core.</span></span> <span data-ttu-id="17830-121">ASP.NET Core では、 [表示コンポーネント](/aspnet/core/mvc/views/view-components)を使用して同様の機能が実現されます。</span><span class="sxs-lookup"><span data-stu-id="17830-121">In ASP.NET Core, similar functionality is achieved using [View Components](/aspnet/core/mvc/views/view-components).</span></span>

<span data-ttu-id="17830-122">ASP.NET Core には、 [ConsumesAttribute](/dotnet/api/microsoft.aspnetcore.mvc.consumesattribute) と [ProducesAttribute](/dotnet/api/microsoft.aspnetcore.mvc.producesattribute)という2つの新しい属性が含まれています。</span><span class="sxs-lookup"><span data-stu-id="17830-122">ASP.NET Core includes two new attributes: [ConsumesAttribute](/dotnet/api/microsoft.aspnetcore.mvc.consumesattribute) and [ProducesAttribute](/dotnet/api/microsoft.aspnetcore.mvc.producesattribute).</span></span> <span data-ttu-id="17830-123">これらは、アクションが使用または生成する型を指定するために使用されます。これは、 [Swagger/OpenAPI](/aspnet/core/tutorials/web-api-help-pages-using-swagger)などのツールを使用して API をルーティングおよびドキュメント化する場合に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="17830-123">These are used to specify the type an action consumes or produces, which can be helpful for routing and documenting the API using tools like [Swagger/OpenAPI](/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span></span>

## <a name="references"></a><span data-ttu-id="17830-124">関連項目</span><span class="sxs-lookup"><span data-stu-id="17830-124">References</span></span>

- [<span data-ttu-id="17830-125">ASP.NET Core Web API の応答データの書式設定</span><span class="sxs-lookup"><span data-stu-id="17830-125">Format response data in ASP.NET Core Web API</span></span>](/aspnet/core/web-api/advanced/formatting)
- [<span data-ttu-id="17830-126">ASP.NET Web API から ASP.NET Core への移行</span><span class="sxs-lookup"><span data-stu-id="17830-126">Migrate from ASP.NET Web API to ASP.NET Core</span></span>](/aspnet/core/migration/webapi)

>[!div class="step-by-step"]
><span data-ttu-id="17830-127">[前へ](identity-differences.md)
>[次へ](razor-differences.md)</span><span class="sxs-lookup"><span data-stu-id="17830-127">[Previous](identity-differences.md)
[Next](razor-differences.md)</span></span>
