---
title: EShopOnDapr reference アプリケーションの概要
description: EShopOnDapr 参照アプリケーションとその履歴の概要。
author: amolenk
ms.date: 02/07/2021
ms.openlocfilehash: d05d47399b9be539597778a4f7856e06d3b16a6c
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401446"
---
# <a name="dapr-reference-application"></a><span data-ttu-id="1e1ed-103">Dapr 参照アプリケーション</span><span class="sxs-lookup"><span data-stu-id="1e1ed-103">Dapr reference application</span></span>

<span data-ttu-id="1e1ed-104">前に、Dapr の基本的な利点について説明しました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-104">Earlier in the book, you've learned about the foundational benefits of Dapr.</span></span> <span data-ttu-id="1e1ed-105">Dapr は、チームが分散アプリケーションを構築するのにどのように役立つかを説明し、アーキテクチャや運用上の複雑さを軽減します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-105">You saw how Dapr can help your team construct distributed applications while reducing architectural and operational complexity.</span></span> <span data-ttu-id="1e1ed-106">その過程で、小規模な Dapr アプリを構築する機会がありました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-106">Along the way, you've had the opportunity to build some small Dapr apps.</span></span> <span data-ttu-id="1e1ed-107">次に、エンドツーエンドのマイクロサービスアプリケーションを探索します。これは、Dapr の構成要素とコンポーネントを示しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-107">Now, it's time to explore an end-to-end microservice application that demonstrates Dapr building blocks and components.</span></span>

<span data-ttu-id="1e1ed-108">しかし、まず少し歴史があります。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-108">But, first a little history.</span></span>

## <a name="eshop-on-containers"></a><span data-ttu-id="1e1ed-109">コンテナーでの eShop</span><span class="sxs-lookup"><span data-stu-id="1e1ed-109">eShop on containers</span></span>

<span data-ttu-id="1e1ed-110">数年前、Microsoft は主要なコミュニティエキスパートと提携しており、広く普及しているガイダンスブックをリリースしました。これには、コンテナー化された [.Net アプリケーション用の .Net マイクロサービス](https://dotnet.microsoft.com/download/e-book/microservices-architecture/pdf)があります。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-110">Several years ago, Microsoft, in partnership with leading community experts, released a popular guidance book, entitled [.NET Microservices for Containerized .NET Applications](https://dotnet.microsoft.com/download/e-book/microservices-architecture/pdf).</span></span> <span data-ttu-id="1e1ed-111">図3-1 は、次の書籍を示しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-111">Figure 3-1 shows the book:</span></span>

![コンテナー化されたマイクロサービス .NET アプリケーションの設計。](./media/reference-application/architecting-microservices-book.png)

<span data-ttu-id="1e1ed-113">**図 3-1**.</span><span class="sxs-lookup"><span data-stu-id="1e1ed-113">**Figure 3-1**.</span></span> <span data-ttu-id="1e1ed-114">.NET マイクロサービス: コンテナー化された .NET アプリケーションのアーキテクチャ。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-114">.NET Microservices: Architecture for Containerized .NET Applications.</span></span>

<span data-ttu-id="1e1ed-115">この書籍では、分散アプリケーションを構築するための原則、パターン、およびベストプラクティスに dove を掘り下げています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-115">The book dove deep into the principles, patterns, and best practices for building distributed applications.</span></span> <span data-ttu-id="1e1ed-116">これには、アーキテクチャの概念を紹介する完全な機能を備えたマイクロサービス参照アプリケーションが含まれていました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-116">It included a full-featured microservice reference application that showcased the architectural concepts.</span></span> <span data-ttu-id="1e1ed-117">[EShopOnContainers](https://github.com/dotnet-architecture/eShopOnContainers)のアプリケーションは、さまざまな .net アイテム (衣料やコーヒーマグを含む) を販売する e コマースショップを示しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-117">Entitled, [eShopOnContainers](https://github.com/dotnet-architecture/eShopOnContainers), the application shows an e-Commerce storefront that sells various .NET items, including clothing and coffee mugs.</span></span>  <span data-ttu-id="1e1ed-118">.NET Core に組み込まれているアプリケーションはクロスプラットフォームで、Linux または Windows コンテナーのいずれかで実行できます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-118">Built in .NET Core, the application is cross-platform and can run in either Linux or Windows containers.</span></span> <span data-ttu-id="1e1ed-119">図3-2 は、元の eShop アーキテクチャを示しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-119">Figure 3-2 shows the original eShop architecture.</span></span>

![eShopOnContainers リファレンスアプリケーションアーキテクチャ。](./media/reference-application/eshop-on-containers.png)

<span data-ttu-id="1e1ed-121">**図 3-2**.</span><span class="sxs-lookup"><span data-stu-id="1e1ed-121">**Figure 3-2**.</span></span> <span data-ttu-id="1e1ed-122">元 `ShopOnContainers` の参照アプリケーション。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-122">Original `ShopOnContainers` reference application.</span></span>

<span data-ttu-id="1e1ed-123">ご覧のように、eShopOnContainers には多くの移動要素が含まれています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-123">As you can see, eShopOnContainers includes many moving parts:</span></span>

1. <span data-ttu-id="1e1ed-124">3つの異なるフロントエンドクライアント。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-124">Three different front-end clients.</span></span>
1. <span data-ttu-id="1e1ed-125">フロントエンドからバックエンドを抽象化するアプリケーションゲートウェイ。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-125">An application gateway to abstract the back end from the front end.</span></span>
1. <span data-ttu-id="1e1ed-126">複数のバックエンドコアマイクロサービス。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-126">Several back-end core microservices.</span></span>
1. <span data-ttu-id="1e1ed-127">非同期の pub/sub メッセージングを有効にするイベントバスコンポーネント。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-127">An event bus component that enables asynchronous pub/sub messaging.</span></span>

<span data-ttu-id="1e1ed-128">EShopOnContainers reference アプリケーションは、.NET コミュニティ全体で広く受け入れられており、多数の大規模な商用マイクロサービスアプリケーションをモデル化するために使用されています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-128">The eShopOnContainers reference application has been widely accepted across the .NET community and used to model many large commercial microservice applications.</span></span>

## <a name="eshop-on-dapr"></a><span data-ttu-id="1e1ed-129">Dapr の eShop</span><span class="sxs-lookup"><span data-stu-id="1e1ed-129">eShop on Dapr</span></span>

<span data-ttu-id="1e1ed-130">この書籍には、eShop アプリケーションの代替バージョンが付属しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-130">An alternative version of the eShop application accompanies this book.</span></span> <span data-ttu-id="1e1ed-131">これは [eShopOnDapr](https://github.com/dotnet-architecture/eShopOnDapr)と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-131">It's called [eShopOnDapr](https://github.com/dotnet-architecture/eShopOnDapr).</span></span> <span data-ttu-id="1e1ed-132">更新されたバージョンは、Dapr のビルディングブロックとコンポーネントを統合することによって、以前の eShopOnContainers アプリケーションを進化させるものです。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-132">The updated version evolves the earlier eShopOnContainers application by integrating Dapr building blocks and components.</span></span> <span data-ttu-id="1e1ed-133">図3-3 は、新しい合理化されたソリューションアーキテクチャを示しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-133">Figure 3-3 shows the new streamlined solution architecture:</span></span>  

![eShopOnDapr リファレンスアプリケーションアーキテクチャ。](./media/reference-application/eshop-on-dapr.png)

<span data-ttu-id="1e1ed-135">**図 3-3**.</span><span class="sxs-lookup"><span data-stu-id="1e1ed-135">**Figure 3-3**.</span></span> <span data-ttu-id="1e1ed-136">eShopOnDapr リファレンスアプリケーションアーキテクチャ。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-136">eShopOnDapr reference application architecture.</span></span>

<span data-ttu-id="1e1ed-137">EShopOnDapr 参照アプリケーションのフォーカスが Dapr にあると、元のアプリケーションが更新されています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-137">As focus of the eShopOnDapr reference application is on Dapr, the original application has been updated.</span></span> <span data-ttu-id="1e1ed-138">アーキテクチャは次の要素で構成されます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-138">The architecture consists of:</span></span>

1. <span data-ttu-id="1e1ed-139">人気のある角 SPA フレームワークで記述された [単一ページアプリケーション](/archive/msdn-magazine/2013/november/asp-net-single-page-applications-build-modern-responsive-web-apps-with-asp-net) のフロントエンド。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-139">A [Single Page Application](/archive/msdn-magazine/2013/november/asp-net-single-page-applications-build-modern-responsive-web-apps-with-asp-net) front end written in the popular Angular SPA framework.</span></span> <span data-ttu-id="1e1ed-140">API ゲートウェイマイクロサービスにユーザー要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-140">It sends user requests to an API gateway microservice.</span></span>

1. <span data-ttu-id="1e1ed-141">API ゲートウェイは、フロントエンドクライアントからバックエンドコアマイクロサービスを抽出します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-141">The API gateway abstracts the back-end core microservices from the front-end client.</span></span> <span data-ttu-id="1e1ed-142">これは、高パフォーマンスのオープンソースのサービスプロキシである [エンボイ](https://www.envoyproxy.io/)を使用して実装されます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-142">It's implemented using [Envoy](https://www.envoyproxy.io/), a high performant, open-source service proxy.</span></span> <span data-ttu-id="1e1ed-143">エンボイは、着信要求をさまざまなバックエンドマイクロサービスにルーティングします。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-143">Envoy routes  incoming requests to various back-end microservices.</span></span> <span data-ttu-id="1e1ed-144">ほとんどの要求は単純な CRUD 操作 (カタログからブランドの一覧を取得するなど) であり、バックエンドマイクロサービスへの直接呼び出しによって処理されます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-144">Most requests are simple CRUD operations (for example, get the list of brands from the catalog) and handled by a direct call to a back-end microservice.</span></span>

1. <span data-ttu-id="1e1ed-145">その他の要求は論理的に複雑で、複数のマイクロサービスを連携させる必要があります。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-145">Other requests are logically more complex and require multiple microservices to work together.</span></span> <span data-ttu-id="1e1ed-146">このような場合、eShopOnDapr は、操作を完了するために必要なマイクロサービス間でワークフローを調整する [アグリゲーターマイクロサービス](../cloud-native/service-to-service-communication.md#service-aggregator-pattern) を実装します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-146">For these cases, eShopOnDapr implements an [aggregator microservice](../cloud-native/service-to-service-communication.md#service-aggregator-pattern) that orchestrates a workflow across the microservices needed to complete the operation.</span></span>

1. <span data-ttu-id="1e1ed-147">一連のコアバックエンドマイクロサービスには、e コマースストアに必要な機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-147">The set of core back-end microservices includes functionality required for an e-Commerce store.</span></span> <span data-ttu-id="1e1ed-148">各は自己完結型であり、他のユーザーとは独立しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-148">Each is self-contained and independent of the others.</span></span> <span data-ttu-id="1e1ed-149">広く受け入れられているドメイン分解パターンに従うと、各マイクロサービスは特定の *ビジネス機能* を分離します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-149">Following widely accepted domain decomposing patterns, each microservice isolates a specific *business capability*:</span></span>

   - <span data-ttu-id="1e1ed-150">バスケットサービスは、お客様のショッピングカートのエクスペリエンスを管理します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-150">The basket service manages the customer's shopping basket experience.</span></span>
   - <span data-ttu-id="1e1ed-151">カタログサービスは、販売に使用できる製品アイテムを管理します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-151">The catalog service manages product items available for sale.</span></span>
   - <span data-ttu-id="1e1ed-152">Id サービスは、認証と id を管理します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-152">The identity service manages authentication and identity.</span></span>
   - <span data-ttu-id="1e1ed-153">注文サービスでは、注文の配置と管理のすべての側面が処理されます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-153">The ordering service handles all aspects of placing and managing orders.</span></span>
   - <span data-ttu-id="1e1ed-154">支払いサービスは、お客様の支払いを処理します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-154">The payment service transacts the customer's payment.</span></span>

   <span data-ttu-id="1e1ed-155">各サービスには、独自の永続的なストレージがあります。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-155">Each service has its own persistent storage.</span></span> <span data-ttu-id="1e1ed-156">マイクロサービスの [ベストプラクティス](../cloud-native/distributed-data.md#database-per-microservice-why)に準拠しているため、すべてのサービスがやり取りする共有データストアはありません。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-156">Adhering to microservice [best practices](../cloud-native/distributed-data.md#database-per-microservice-why), there's not a shared datastore with which all services interact.</span></span>

   <span data-ttu-id="1e1ed-157">各マイクロサービスの設計は、個々の要件に基づいています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-157">The design of each microservice is based on its individual requirements.</span></span> <span data-ttu-id="1e1ed-158">単純なサービスでは、基本的な CRUD 操作を使用して、基になるデータストアにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-158">The simple services use basic CRUD operations to access to their underlying data stores.</span></span> <span data-ttu-id="1e1ed-159">順序付けなどの高度なサービスは、Domain-Driven 設計アプローチを使用して、ビジネスの複雑さを管理します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-159">Advanced services, like Ordering, use a  Domain-Driven Design approach to manage business complexity.</span></span> <span data-ttu-id="1e1ed-160">必要に応じて、.NET Core、Java、ゴー、NodeJS などのさまざまなテクノロジスタックでサービスを構築できます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-160">If necessary, services could be built across different technology stacks, such as .NET Core, Java, Go, NodeJS, and more.</span></span>

1. <span data-ttu-id="1e1ed-161">最後に、イベントバスは、Dapr のパブリッシュ/サブスクライブコンポーネントをラップします。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-161">Finally, the event bus wraps the Dapr publish/subscribe components.</span></span> <span data-ttu-id="1e1ed-162">マイクロサービス間で非同期の公開/サブスクライブメッセージングを有効にします。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-162">It enables asynchronous publish/subscribe messaging across microservices.</span></span> <span data-ttu-id="1e1ed-163">開発者は、任意の Dapr でサポートされているメッセージブローカーをプラグインできます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-163">Developers can plug in any Dapr-supported message broker.</span></span>

### <a name="application-of-dapr-building-blocks"></a><span data-ttu-id="1e1ed-164">Dapr 構成ブロックの適用</span><span class="sxs-lookup"><span data-stu-id="1e1ed-164">Application of Dapr building blocks</span></span>

<span data-ttu-id="1e1ed-165">EShopOnDapr codebase は、eShopOnContainers codebase よりも簡素化されています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-165">The eShopOnDapr codebase is more streamlined than the eShopOnContainers codebase.</span></span> <span data-ttu-id="1e1ed-166">Dapr ビルディングブロックは、大量のエラーが発生しやすい組み込みコードを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-166">Dapr building blocks replace a large amount of error-prone plumbing code.</span></span>

<span data-ttu-id="1e1ed-167">図3-4 は、eShop 参照アプリケーションにおける Dapr の統合を示しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-167">Figure 3-4 shows the Dapr integration in the eShop reference application.</span></span>

![eShopOnDapr リファレンスアプリケーションのアーキテクチャ](./media/reference-application/eshop-on-dapr-buildingblocks.png)

<span data-ttu-id="1e1ed-169">**図 3-4**.</span><span class="sxs-lookup"><span data-stu-id="1e1ed-169">**Figure 3-4**.</span></span> <span data-ttu-id="1e1ed-170">EShopOnDapr での dapr の統合。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-170">Dapr integration in eShopOnDapr.</span></span>

<span data-ttu-id="1e1ed-171">前の図では、どのサービスがどの Dapr の構成要素を使用しているかを確認できます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-171">In the previous figure, you can see which services use which Dapr building blocks.</span></span>

1. <span data-ttu-id="1e1ed-172">元の eShopOnContainers アプリケーションは、注文サービスの DDD の概念とパターンを示しています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-172">The original eShopOnContainers application demonstrates DDD concepts and patterns in the ordering service.</span></span> <span data-ttu-id="1e1ed-173">更新された eShopOnDapr では、注文サービスは *アクター構成ブロック* を代替の実装として使用します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-173">In the updated eShopOnDapr, the ordering service uses the *actor building block* as an alternative implementation.</span></span> <span data-ttu-id="1e1ed-174">アクターのターンベースのアクセスモデルを使用すると、キャンセルをサポートするステートフルな順序付けプロセスを簡単に実装できます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-174">The turn-based access model of actors makes it easy to implement a stateful ordering process with support for cancellation.</span></span>
1. <span data-ttu-id="1e1ed-175">注文サービスは、 [バインド構成ブロック](bindings.md)を使用して注文確認電子メールを送信します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-175">The ordering service sends order confirmation e-mails using the [bindings building block](bindings.md).</span></span>
1. <span data-ttu-id="1e1ed-176">バックエンドサービスは、 [publish & subscribe ビルディングブロック](publish-subscribe.md)を使用して非同期に通信します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-176">The back-end services communicate asynchronously using the [publish & subscribe building block](publish-subscribe.md).</span></span>
1. <span data-ttu-id="1e1ed-177">シークレットの管理は、 [シークレットの構成ブロック](secrets.md)によって行われます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-177">Secret management is done by the [secrets building block](secrets.md).</span></span>
1. <span data-ttu-id="1e1ed-178">API ゲートウェイと web ショッピングアグリゲーターサービスは、 [サービス呼び出しの構成要素](service-invocation.md) を使用して、バックエンドサービスでメソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-178">The API gateway and web shopping aggregator services use the [service invocation building block](service-invocation.md) to invoke methods on the back-end services.</span></span>
1. <span data-ttu-id="1e1ed-179">バスケットサービスは、 [state management ビルディングブロック](state-management.md) を使用して、顧客の買い物かごの状態を格納します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-179">The basket service uses the [state management building block](state-management.md) to store the state of the customer's shopping basket.</span></span>

### <a name="benefits-of-applying-dapr-to-eshop"></a><span data-ttu-id="1e1ed-180">EShop に Dapr を適用する利点</span><span class="sxs-lookup"><span data-stu-id="1e1ed-180">Benefits of applying Dapr to eShop</span></span>

<span data-ttu-id="1e1ed-181">一般に、Dapr 構成ブロックを使用すると、可観測性と柔軟性がアプリケーションに追加されます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-181">In general, the use of Dapr building blocks add observability and flexibility to the application:</span></span>

1. <span data-ttu-id="1e1ed-182">可観測性: Dapr 構成ブロックを使用することにより、コードを記述しなくても、サービス間および Dapr コンポーネントとの両方の呼び出しに対して、豊富な分散トレースを取得できます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-182">Observability: By using the Dapr building blocks, you gain rich distributed tracing for both calls between services and to Dapr components without having to write any code.</span></span> <span data-ttu-id="1e1ed-183">EShopOnContainers では、大量のカスタムログを使用して洞察を得ることができます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-183">In eShopOnContainers, a large amount of custom logging is used to provide insight.</span></span>
1. <span data-ttu-id="1e1ed-184">柔軟性: コンポーネント構成ファイルを変更するだけで、インフラストラクチャを *入れ替える* ことができるようになりました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-184">Flexibility: You can now *swap out* infrastructure simply by changing a component configuration file.</span></span> <span data-ttu-id="1e1ed-185">コードに変更を加える必要はありません。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-185">No code changes are necessary.</span></span>

<span data-ttu-id="1e1ed-186">次に、特定の構成要素で提供される利点の例をいくつか示します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-186">Here are some more examples of benefits offered by specific building blocks:</span></span>

- <span data-ttu-id="1e1ed-187">**サービスの呼び出し**</span><span class="sxs-lookup"><span data-stu-id="1e1ed-187">**Service Invocation**</span></span>
  - <span data-ttu-id="1e1ed-188">Dapr が [mTLS](https://blog.cloudflare.com/introducing-tls-client-auth/)をサポートすることで、サービスは暗号化されたチャネルを介して通信できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-188">With Dapr's support for [mTLS](https://blog.cloudflare.com/introducing-tls-client-auth/), services now communicate through encrypted channels.</span></span>
  - <span data-ttu-id="1e1ed-189">一時的なエラーが発生すると、サービス呼び出しは自動的に再試行されます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-189">When transient errors occur, service calls are automatically retried.</span></span>
  - <span data-ttu-id="1e1ed-190">自動サービス検出を使用すると、サービスが互いを検索するために必要な構成の量を減らすことができます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-190">Automatic service discovery reduces the amount of configuration needed for services to find each other.</span></span>

- <span data-ttu-id="1e1ed-191">**パブリッシュ/サブスクライブ**</span><span class="sxs-lookup"><span data-stu-id="1e1ed-191">**Publish/Subscribe**</span></span>
  - <span data-ttu-id="1e1ed-192">eShopOnContainer と RabbitMQ の Azure Service Bus 両方をサポートするための多数のカスタムコードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-192">eShopOnContainer included a large amount of custom code to support both Azure Service Bus and RabbitMQ.</span></span> <span data-ttu-id="1e1ed-193">開発者は、ローカルでの開発とテストのために Azure Service Bus を実稼働用と RabbitMQ に使用していました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-193">Developers used Azure Service Bus for production and RabbitMQ for local development and testing.</span></span> <span data-ttu-id="1e1ed-194">`IEventBus`これらのメッセージブローカー間のスワップを可能にするために、抽象化レイヤーが作成されました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-194">An `IEventBus` abstraction layer was created to enable swapping between these message brokers.</span></span> <span data-ttu-id="1e1ed-195">このレイヤーには *、約700行のエラーが発生しやすいコード* があります。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-195">This layer consisted of approximately *700 lines of error-prone code*.</span></span> <span data-ttu-id="1e1ed-196">Dapr を使用した更新された実装には、 *35 行のコード* のみが必要です。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-196">The updated implementation with Dapr requires only *35 lines of code*.</span></span> <span data-ttu-id="1e1ed-197">これは、元のコード行の **5%** です。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-197">That's **5%** of the original lines of code!</span></span> <span data-ttu-id="1e1ed-198">さらに重要なのは、実装が簡単でわかりやすいことです。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-198">More importantly, the implementation is straightforward and easy to understand.</span></span>
  - <span data-ttu-id="1e1ed-199">eShopOnDapr は、Dapr の豊富な ASP.NET Core 統合を使用して、pub/sub を使用します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-199">eShopOnDapr uses Dapr's rich ASP.NET Core integration to use pub/sub.</span></span> <span data-ttu-id="1e1ed-200">`Topic`ASP.NET Core コントローラーメソッドに属性を追加して、メッセージをサブスクライブします。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-200">You add `Topic` attributes to ASP.NET Core controller methods to subscribe to messages.</span></span> <span data-ttu-id="1e1ed-201">したがって、メッセージブローカーごとに個別のメッセージハンドラーループを記述する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-201">Therefore, there's no need to write a separate message handler loop for each message broker.</span></span>
  - <span data-ttu-id="1e1ed-202">HTTP 呼び出しとしてサービスにルーティングされたメッセージは、新しい概念や Sdk を導入することなく、ASP.NET Core ミドルウェアを使用して機能を追加することができます。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-202">Messages routed to the service as HTTP calls enable the use of ASP.NET Core middleware to add functionality, without introducing new concepts or SDKs to learn.</span></span>

- <span data-ttu-id="1e1ed-203">**バインド**</span><span class="sxs-lookup"><span data-stu-id="1e1ed-203">**Bindings**</span></span>
  - <span data-ttu-id="1e1ed-204">EShopOnContainers ソリューションには、顧客への注文確認を電子メールで送信 *する to do* 項目が含まれていました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-204">The eShopOnContainers solution contained a *to-do* item for e-mailing an order confirmation to the customer.</span></span> <span data-ttu-id="1e1ed-205">最終的には、SendGrid などのサードパーティ製の電子メール API を実装することを考えました。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-205">The thought was to eventually implement a third-party email API such as SendGrid.</span></span> <span data-ttu-id="1e1ed-206">Dapr では、電子メール通知の実装は、リソースバインドを構成するのと同じように簡単でした。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-206">With Dapr, implementing email notification was as easy as configuring a resource binding.</span></span> <span data-ttu-id="1e1ed-207">外部 Api または Sdk について学ぶ必要はありませんでした。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-207">There wasn't any need to learn external APIs or SDKs.</span></span>

> [!NOTE]
> <span data-ttu-id="1e1ed-208">アクターのビルディングブロックは、このブックの最初のバージョンでは説明されていません。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-208">The Actors building block isn't covered in the first version of this book.</span></span> <span data-ttu-id="1e1ed-209">アクターの構成要素と eShopOnDapr との統合についての広範な章は、1.1 更新プログラムに含まれています。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-209">An extensive chapter on the Actor building block and its integration with eShopOnDapr will be included in the 1.1 update.</span></span>

## <a name="summary"></a><span data-ttu-id="1e1ed-210">まとめ</span><span class="sxs-lookup"><span data-stu-id="1e1ed-210">Summary</span></span>

<span data-ttu-id="1e1ed-211">この章では、eShopOnDapr 参照アプリケーションについて紹介します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-211">In this chapter, you're introduced to the eShopOnDapr reference application.</span></span> <span data-ttu-id="1e1ed-212">これは、広く普及している eShopOnContainers マイクロサービス参照アプリケーションの進化です。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-212">It's an evolution of the widely popular eShopOnContainers microservice reference application.</span></span> <span data-ttu-id="1e1ed-213">eShopOnDapr は、大量のカスタム機能を Dapr の構成要素およびコンポーネントに置き換え、マイクロサービスアプリケーションの構築に必要な複雑さを劇的に簡素化します。</span><span class="sxs-lookup"><span data-stu-id="1e1ed-213">eShopOnDapr replaces a large amount of custom functionality with Dapr building blocks and components, dramatically simplifying the complexities required to build a microservices application.</span></span>

### <a name="references"></a><span data-ttu-id="1e1ed-214">関連項目</span><span class="sxs-lookup"><span data-stu-id="1e1ed-214">References</span></span>

- [<span data-ttu-id="1e1ed-215">eShopOnDapr</span><span class="sxs-lookup"><span data-stu-id="1e1ed-215">eShopOnDapr</span></span>](https://github.com/dotnet-architecture/eShopOnDapr)

- [<span data-ttu-id="1e1ed-216">eShopOnContainers</span><span class="sxs-lookup"><span data-stu-id="1e1ed-216">eShopOnContainers</span></span>](https://github.com/dotnet-architecture/eShopOnContainers)

- [<span data-ttu-id="1e1ed-217">コンテナー化された .NET アプリケーション用の .NET マイクロサービス</span><span class="sxs-lookup"><span data-stu-id="1e1ed-217">.NET Microservices for Containerized .NET Applications</span></span>](https://dotnet.microsoft.com/download/e-book/microservices-architecture/pdf)

- [<span data-ttu-id="1e1ed-218">Azure 向け Cloud-Native .NET アプリの設計</span><span class="sxs-lookup"><span data-stu-id="1e1ed-218">Architecting Cloud-Native .NET Apps for Azure</span></span>](https://dotnet.microsoft.com/download/e-book/cloud-native-azure/pdf)

> [!div class="step-by-step"]
> <span data-ttu-id="1e1ed-219">[前へ](getting-started.md)
> [次へ](state-management.md)</span><span class="sxs-lookup"><span data-stu-id="1e1ed-219">[Previous](getting-started.md)
[Next](state-management.md)</span></span>
