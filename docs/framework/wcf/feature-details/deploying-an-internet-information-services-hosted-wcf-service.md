---
title: インターネット インフォメーション サービスでホストされる WCF サービスの配置
description: IIS でホストされる WCF サービスを開発および展開するために必要なタスクについて説明します。これは、コンポーネントのインストールの確認から始まります。
ms.date: 03/30/2017
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
ms.openlocfilehash: a51cf09309a5a5c9ac8c8a4cc4fecc0a203b7b3c
ms.sourcegitcommit: 1dbe25ff484a02025d5c34146e517c236f7161fb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/19/2021
ms.locfileid: "104653479"
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="385d6-103">インターネット インフォメーション サービスでホストされる WCF サービスの配置</span><span class="sxs-lookup"><span data-stu-id="385d6-103">Deploying an Internet Information Services-Hosted WCF Service</span></span>

<span data-ttu-id="385d6-104">インターネット インフォメーション サービス (IIS) でホストされる Windows Communication Foundation (WCF) サービスの開発および展開には、次のタスクが含まれます。</span><span class="sxs-lookup"><span data-stu-id="385d6-104">Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>

- <span data-ttu-id="385d6-105">IIS、ASP.NET、WCF、WCF アクティブ化コンポーネントが正しくインストールおよび登録されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="385d6-105">Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</span></span>

- <span data-ttu-id="385d6-106">新しい IIS アプリケーションを作成するか、既存の ASP.NET アプリケーションを再利用します。</span><span class="sxs-lookup"><span data-stu-id="385d6-106">Create a new IIS application, or reuse an existing ASP.NET application.</span></span>

- <span data-ttu-id="385d6-107">WCF サービス用の .svc ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="385d6-107">Create a .svc file for the WCF service.</span></span>

- <span data-ttu-id="385d6-108">IIS アプリケーションにサービス実装を展開します。</span><span class="sxs-lookup"><span data-stu-id="385d6-108">Deploy the service implementation to the IIS application.</span></span>

- <span data-ttu-id="385d6-109">WCF サービスを構成します。</span><span class="sxs-lookup"><span data-stu-id="385d6-109">Configure the WCF service.</span></span>

<span data-ttu-id="385d6-110">IIS でホストされる WCF サービスの作成に関する詳細なチュートリアルについては、「[方法: IIS で WCF サービスをホストする](how-to-host-a-wcf-service-in-iis.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-110">For a detailed walkthrough of creating an IIS-hosted WCF service, see [How to: Host a WCF Service in IIS](how-to-host-a-wcf-service-in-iis.md).</span></span>

## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="385d6-111">IIS、ASP.NET、および WCF が正しくインストールおよび登録されていることの確認</span><span class="sxs-lookup"><span data-stu-id="385d6-111">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>

<span data-ttu-id="385d6-112">IIS でホストされる WCF サービスを正常に機能させるには、WCF、IIS、ASP.NET をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-112">WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</span></span> <span data-ttu-id="385d6-113">WCF (.NET Framework の一部として)、ASP.NET、IIS のインストール手順は、ご使用のオペレーティング システムのバージョンによって異なります。</span><span class="sxs-lookup"><span data-stu-id="385d6-113">The procedures for installing WCF (as part of the .NET Framework), ASP.NET, and IIS vary depending on your operating system.</span></span> <span data-ttu-id="385d6-114">WCF と .NET Framework のインストールの詳細については、「[開発者向けの .NET Framework のインストール](../../install/guide-for-developers.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-114">For more information about installing WCF and the .NET Framework, see [Install the .NET Framework for developers](../../install/guide-for-developers.md).</span></span> <span data-ttu-id="385d6-115">Windows 10 に IIS をインストールするには、 **[コントロール パネル]** 内の **[プログラムと機能]** を開き、 **[Windows の機能の有効化または無効化]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="385d6-115">To install IIS on Windows 10, open **Programs and Features** in **Control Panel** and then select **Turn Windows features on or off**.</span></span> <span data-ttu-id="385d6-116">**[Windows の機能]** で **[インターネット インフォメーション サービス]** を選択し、 **[OK]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="385d6-116">In **Windows Features**, select **Internet Information Services** and then choose **OK**.</span></span>

![IIS が強調表示された [Windows の機能]](./media/windows-features-iis.png)

<span data-ttu-id="385d6-118">他のオペレーティング システムに IIS をインストールする手順については、「[Windows Vista および Windows 7 に IIS をインストールする](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)」と「[Windows Server 2012 R2 に IIS 8.5 をインストールする](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-118">Instructions for installing IIS on other operating systems can be found at [Install IIS on Windows Vista and Windows 7](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7) and [Install IIS 8.5 on Windows Server 2012 R2](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2).</span></span>

<span data-ttu-id="385d6-119">コンピューター上に既に IIS が存在する場合は、.NET Framework のインストール プロセスによって WCF が自動的に IIS に登録されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-119">The installation process for .NET Framework automatically registers WCF with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="385d6-120">.NET Framework の後に IIS をインストールした場合は、WCF を IIS と ASP.NET に登録するために追加の手順が必要になります。</span><span class="sxs-lookup"><span data-stu-id="385d6-120">If IIS is installed after .NET Framework, an additional step is required to register WCF with IIS and ASP.NET.</span></span> <span data-ttu-id="385d6-121">使用しているオペレーティング システムに応じて、次のように実行します。</span><span class="sxs-lookup"><span data-stu-id="385d6-121">You can do this as follows, depending on your operating system:</span></span>

- <span data-ttu-id="385d6-122">Windows 7 および Windows Server 2003: [ServiceModel 登録ツール (ServiceModelReg.exe)](../servicemodelreg-exe.md) を使用して、WCF を IIS に登録します。</span><span class="sxs-lookup"><span data-stu-id="385d6-122">Windows 7 and Windows Server 2003: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../servicemodelreg-exe.md) tool to register WCF with IIS.</span></span> <span data-ttu-id="385d6-123">このツールを使用するには、[Visual Studio 開発者コマンド プロンプトまたは Visual Studio Developer PowerShell](/visualstudio/ide/reference/command-prompt-powershell) に `ServiceModelReg.exe /i /x` と入力します。</span><span class="sxs-lookup"><span data-stu-id="385d6-123">To use this tool, enter `ServiceModelReg.exe /i /x` in [Visual Studio Developer Command Prompt or Visual Studio Developer PowerShell](/visualstudio/ide/reference/command-prompt-powershell).</span></span>

- <span data-ttu-id="385d6-124">Windows 7: 最後に、ASP.NET が .NET Framework バージョン 4 以降を使用するように構成されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-124">Windows 7: Finally, you must verify that ASP.NET is configured to use .NET Framework version 4 or later.</span></span> <span data-ttu-id="385d6-125">これを行うには、`–i` オプションを指定して ASPNET_Regiis ツールを実行します。</span><span class="sxs-lookup"><span data-stu-id="385d6-125">You do this by running the ASPNET_Regiis tool with the `–i` option.</span></span> <span data-ttu-id="385d6-126">詳細については、「[ASP.NET IIS 登録ツール](/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-126">For more information, see [ASP.NET IIS Registration Tool](/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90)).</span></span>

## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="385d6-127">新しい IIS アプリケーションの作成、または既存の ASP.NET アプリケーションの再利用</span><span class="sxs-lookup"><span data-stu-id="385d6-127">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>

<span data-ttu-id="385d6-128">IIS でホストされる WCF サービスは、IIS アプリケーションの内部に存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-128">IIS-hosted WCF services must reside inside of an IIS application.</span></span> <span data-ttu-id="385d6-129">WCF サービスのみをホストする新しい IIS アプリケーションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="385d6-129">You can create a new IIS application to host WCF services exclusively.</span></span> <span data-ttu-id="385d6-130">または、既に ASP.NET 2.0 コンテンツ (.aspx ページや ASP.NET Web サービス [ASMX] など) をホストしている既存のアプリケーションに WCF サービスを展開することもできます。</span><span class="sxs-lookup"><span data-stu-id="385d6-130">Alternatively, you can deploy an WCF service into an existing application that is already hosting ASP.NET 2.0 content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="385d6-131">これらのオプションの詳細については、「[WCF サービスと ASP.NET](wcf-services-and-aspnet.md)」の「WCF を ASP.NET とサイドバイサイドでホストする」および「ASP.NET 互換モードでの WCF サービスのホスト」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-131">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](wcf-services-and-aspnet.md).</span></span>

<span data-ttu-id="385d6-132">IIS 6.0 以降のバージョンでは、隔離されているオブジェクト指向プログラミング アプリケーションは定期的に再起動されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-132">Note that IIS 6.0 and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="385d6-133">既定値は 1740 分です。</span><span class="sxs-lookup"><span data-stu-id="385d6-133">The default value is 1740 minutes.</span></span> <span data-ttu-id="385d6-134">サポートされている最大値は 71,582 分です。</span><span class="sxs-lookup"><span data-stu-id="385d6-134">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="385d6-135">この再起動は、無効にできます。</span><span class="sxs-lookup"><span data-stu-id="385d6-135">This restart can be disabled.</span></span> <span data-ttu-id="385d6-136">このプロパティの詳細については、「[PeriodicRestartTime](/previous-versions/iis/6.0-sdk/ms525914(v=vs.90))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-136">For more information about this property, see the [PeriodicRestartTime](/previous-versions/iis/6.0-sdk/ms525914(v=vs.90)).</span></span>

## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="385d6-137">WCF サービス用の .svc ファイルの作成</span><span class="sxs-lookup"><span data-stu-id="385d6-137">Create an .svc File for the WCF Service</span></span>

<span data-ttu-id="385d6-138">IIS でホストされる WCF サービスは、IIS アプリケーションの内部で特別なコンテンツ ファイル (.svc ファイル) として表現されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-138">WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="385d6-139">これは、ASMX ページが、IIS アプリケーションの内部で .asmx ファイルとして表現されるのと同様です。</span><span class="sxs-lookup"><span data-stu-id="385d6-139">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="385d6-140">.svc ファイルには、WCF ホスティング インフラストラクチャで、ホストされているサービスを受信メッセージに応えてアクティブ化できるようにする、WCF 固有の処理ディレクティブ ([\@ServiceHost](../../configure-apps/file-schema/wcf-directive/servicehost.md)) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="385d6-140">A .svc file contains a WCF-specific processing directive ([\@ServiceHost](../../configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="385d6-141">.svc ファイルの最も一般的な構文を次のステートメントに示します。</span><span class="sxs-lookup"><span data-stu-id="385d6-141">The most common syntax for a .svc file is in the following statement.</span></span>

`<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>`

<span data-ttu-id="385d6-142">これは [\@ServiceHost](../../configure-apps/file-schema/wcf-directive/servicehost.md) ディレクティブと 1 つの属性 `Service` で構成されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-142">It consists of the [\@ServiceHost](../../configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="385d6-143">`Service` 属性の値は、サービス実装の共通言語ランタイム (CLR: Common Language Runtime) 型名です。</span><span class="sxs-lookup"><span data-stu-id="385d6-143">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="385d6-144">このディレクティブを使用することは、次のコードを使用してサービス ホストを作成することと基本的に同じです。</span><span class="sxs-lookup"><span data-stu-id="385d6-144">Using this directive is basically equivalent to creating a service host using the following code.</span></span>

```csharp
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );
```

<span data-ttu-id="385d6-145">サービスのベース アドレスの一覧を作成するなど、追加のホスト構成を実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="385d6-145">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="385d6-146">カスタム <xref:System.ServiceModel.Activation.ServiceHostFactory> を使用して、このディレクティブをカスタム ホスト ソリューション用に拡張することもできます。</span><span class="sxs-lookup"><span data-stu-id="385d6-146">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="385d6-147">WCF サービスをホストする IIS アプリケーションには、<xref:System.ServiceModel.ServiceHost> インスタンスの作成と有効期間を管理する責任はありません。</span><span class="sxs-lookup"><span data-stu-id="385d6-147">The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="385d6-148">マネージド WCF ホスティング インフラストラクチャは、.svc ファイルに対する最初の要求を受け取ったときに、必要な <xref:System.ServiceModel.ServiceHost> インスタンスを動的に作成します。</span><span class="sxs-lookup"><span data-stu-id="385d6-148">The managed WCF hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="385d6-149">このインスタンスは、コードによって明示的に閉じられるか、アプリケーションがリサイクルされるときまで解放されません。</span><span class="sxs-lookup"><span data-stu-id="385d6-149">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>

<span data-ttu-id="385d6-150">.svc ファイルの構文の詳細については、「[\@ServiceHost](../../configure-apps/file-schema/wcf-directive/servicehost.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-150">For more information about the syntax for .svc files, see [\@ServiceHost](../../configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>

## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="385d6-151">IIS アプリケーションへのサービス実装の展開</span><span class="sxs-lookup"><span data-stu-id="385d6-151">Deploy the Service Implementation to the IIS Application</span></span>

<span data-ttu-id="385d6-152">IIS でホストされる WCF サービスでは、ASP.NET 2.0 と同一の動的なコンパイル モデルが使用されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-152">WCF services hosted in IIS use the same dynamic compilation model as ASP.NET 2.0.</span></span> <span data-ttu-id="385d6-153">ASP.NET の場合と同様に、IIS でホストされる WCF サービスの実装コードは、次のようにさまざまな方法でさまざまな場所に展開できます。</span><span class="sxs-lookup"><span data-stu-id="385d6-153">Just as with ASP.NET, you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</span></span>

- <span data-ttu-id="385d6-154">グローバル アセンブリ キャッシュ (GAC: Global Assembly Cache) またはアプリケーションの \bin ディレクトリに配置される、プリコンパイルされた .dll ファイルとして展開します。</span><span class="sxs-lookup"><span data-stu-id="385d6-154">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="385d6-155">プリコンパイルされたバイナリは、新しいバージョンのクラス ライブラリが展開されるまで更新されません。</span><span class="sxs-lookup"><span data-stu-id="385d6-155">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>

- <span data-ttu-id="385d6-156">アプリケーションの \App_Code ディレクトリ内に配置された、コンパイルされていないソース ファイルとして。</span><span class="sxs-lookup"><span data-stu-id="385d6-156">As uncompiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="385d6-157">このディレクトリに配置されたソース ファイルは、アプリケーションの最初の要求を処理するときに動的に要求されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-157">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="385d6-158">\App_Code ディレクトリ内のファイルを変更すると、次の要求を受け取ったときにアプリケーション全体がリサイクルされ、再コンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="385d6-158">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>

- <span data-ttu-id="385d6-159">.svc ファイル内に直接配置された、コンパイルされていないコードとして。</span><span class="sxs-lookup"><span data-stu-id="385d6-159">As uncompiled code placed directly in the .svc file.</span></span> <span data-ttu-id="385d6-160">実装コードは、サービスの .svc ファイル内の \@ServiceHost ディレクティブの後にインラインで配置することもできます。</span><span class="sxs-lookup"><span data-stu-id="385d6-160">Implementation code can also be located inline in the service’s .svc file, after the \@ServiceHost directive.</span></span> <span data-ttu-id="385d6-161">インライン コードを変更すると、次の要求を受け取ったときにアプリケーションがリサイクルされ、再コンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="385d6-161">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>

<span data-ttu-id="385d6-162">ASP.NET 2.0 のコンパイル モデルの詳細については、「[ASP.NET のコンパイルの概要](/previous-versions/aspnet/ms178466(v=vs.100))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="385d6-162">For more information about the ASP.NET 2.0 compilation model, see [ASP.NET Compilation Overview](/previous-versions/aspnet/ms178466(v=vs.100)).</span></span>

## <a name="configure-the-wcf-service"></a><span data-ttu-id="385d6-163">WCF サービスの構成</span><span class="sxs-lookup"><span data-stu-id="385d6-163">Configure the WCF Service</span></span>

<span data-ttu-id="385d6-164">IIS でホストされる WCF サービスの構成は、アプリケーションの Web.config ファイル内に格納されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-164">IIS-hosted WCF services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="385d6-165">IIS でホストされるサービスは、IIS の外部でホストされる WCF サービスと同じ構成要素と構文を使用します。</span><span class="sxs-lookup"><span data-stu-id="385d6-165">IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</span></span> <span data-ttu-id="385d6-166">ただし、次の制約は、IIS ホスト環境に固有です。</span><span class="sxs-lookup"><span data-stu-id="385d6-166">However, the following constraints are unique to the IIS hosting environment:</span></span>

- <span data-ttu-id="385d6-167">IIS でホストされるサービスのベース アドレス。</span><span class="sxs-lookup"><span data-stu-id="385d6-167">Base addresses for IIS-hosted services.</span></span>

- <span data-ttu-id="385d6-168">IIS の外部の WCF サービスをホストするアプリケーションは、ベース アドレス URI のセットを <xref:System.ServiceModel.ServiceHost> コンストラクターに渡すか、サービスの構成内で [\<host>](../../configure-apps/file-schema/wcf/host.md) 要素を指定することによって、ホストするサービスのベース アドレスを制御できます。</span><span class="sxs-lookup"><span data-stu-id="385d6-168">Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="385d6-169">IIS でホストされるサービスは、それぞれのベース アドレスを制御できません。IIS でホストされるサービスのベース アドレスは、その .svc ファイルのアドレスです。</span><span class="sxs-lookup"><span data-stu-id="385d6-169">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>

### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="385d6-170">IIS でホストされるサービスのエンドポイント アドレス</span><span class="sxs-lookup"><span data-stu-id="385d6-170">Endpoint Addresses for IIS-Hosted Services</span></span>

<span data-ttu-id="385d6-171">IIS でホストされるときのエンドポイント アドレスは、常にサービスを表す .svc ファイルのアドレスを基準にした相対アドレスと見なされます。</span><span class="sxs-lookup"><span data-stu-id="385d6-171">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="385d6-172">たとえば、WCF サービスのベース アドレスが `http://localhost/Application1/MyService.svc` で、エンドポイント構成が次のとおりであるとします。</span><span class="sxs-lookup"><span data-stu-id="385d6-172">For example, if the base address of a WCF service is `http://localhost/Application1/MyService.svc` with the following endpoint configuration:</span></span>

```xml
<endpoint address="anotherEndpoint" />
```

<span data-ttu-id="385d6-173">これにより、`http://localhost/Application1/MyService.svc/anotherEndpoint` でアクセスできるエンドポイントが提供されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-173">This provides an endpoint that can be reached at `http://localhost/Application1/MyService.svc/anotherEndpoint`.</span></span>

<span data-ttu-id="385d6-174">同様に、空の文字列が相対アドレスとして使用されるエンドポイント構成要素では、ベース アドレスである `http://localhost/Application1/MyService.svc` でアクセスできるエンドポイントが提供されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-174">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at `http://localhost/Application1/MyService.svc`, which is the base address.</span></span>

```xml
<endpoint address="" />
```

<span data-ttu-id="385d6-175">IIS でホストされるサービスのエンドポイントには、常に相対エンドポイント アドレスを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-175">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="385d6-176">完全修飾されたエンドポイント アドレス (たとえば `http://localhost/MyService.svc`) を指定すると、エンドポイント アドレスが、エンドポイントを公開するサービスをホストする IIS アプリケーションを指していない場合、サービスの展開時にエラーが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-176">Supplying a fully-qualified endpoint address (for example, `http://localhost/MyService.svc`) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="385d6-177">ホストされるサービスに相対エンドポイント アドレスを使用すると、このような競合が回避されます。</span><span class="sxs-lookup"><span data-stu-id="385d6-177">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>

### <a name="available-transports"></a><span data-ttu-id="385d6-178">利用可能なトランスポート</span><span class="sxs-lookup"><span data-stu-id="385d6-178">Available Transports</span></span>

<span data-ttu-id="385d6-179">IIS 5.1 および IIS 6.0 でホストされる WCF サービスで使用できるのは、HTTP ベースの通信のみに制限されています。</span><span class="sxs-lookup"><span data-stu-id="385d6-179">WCF services hosted in IIS 5.1 and IIS 6.0 are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="385d6-180">これらの IIS プラットフォームでホストされるサービスで、非 HTTP バインドを使用するように構成すると、サービスをアクティブ化するときにエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="385d6-180">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="385d6-181">IIS 7.0 でサポートされるトランスポートには、既存の MSMQ アプリケーションとの後方互換性を実現する HTTP、Net.TCP、Net.Pipe、Net.MSMQ、msmq.formatname があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-181">For IIS 7.0, the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>

### <a name="http-transport-security"></a><span data-ttu-id="385d6-182">HTTP トランスポート セキュリティ</span><span class="sxs-lookup"><span data-stu-id="385d6-182">HTTP Transport Security</span></span>

<span data-ttu-id="385d6-183">IIS でホストされる WCF サービスでは、サービスが格納されている IIS 仮想ディレクトリで設定がサポートされていれば、HTTP トランスポート セキュリティ (たとえば、基本認証、ダイジェスト認証、Windows 統合認証などの HTTPS および HTTP 認証) を利用できます。</span><span class="sxs-lookup"><span data-stu-id="385d6-183">IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="385d6-184">ホストされるエンドポイントのバインディングでの HTTP トランスポート セキュリティ設定は、そのエンドポイントを格納する IIS 仮想ディレクトリでのトランスポート セキュリティ設定と一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-184">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>

<span data-ttu-id="385d6-185">たとえば、HTTP ダイジェスト認証を使用するように構成された WCF エンドポイントは、同じく HTTP ダイジェスト認証を使用できるように構成された IIS 仮想ディレクトリ内に存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d6-185">For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="385d6-186">IIS の設定と WCF エンドポイントの設定の組み合わせが一致しない場合、サービスをアクティブ化するときにエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="385d6-186">Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</span></span>

## <a name="see-also"></a><span data-ttu-id="385d6-187">関連項目</span><span class="sxs-lookup"><span data-stu-id="385d6-187">See also</span></span>

- [<span data-ttu-id="385d6-188">インターネット インフォメーション サービスでのホスティング</span><span class="sxs-lookup"><span data-stu-id="385d6-188">Hosting in Internet Information Services</span></span>](hosting-in-internet-information-services.md)
- [<span data-ttu-id="385d6-189">インターネット インフォメーション サービス ホスティングのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="385d6-189">Internet Information Services Hosting Best Practices</span></span>](internet-information-services-hosting-best-practices.md)
- <span data-ttu-id="385d6-190">[AppFabric のホスティング機能](/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="385d6-190">[Windows Server App Fabric Hosting Features](/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
