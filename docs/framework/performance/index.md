---
title: .NET Framework のパフォーマンス
description: .NET アプリのパフォーマンスを設計し、計画します。 Microsoft によって提供されるツールを使用して、アプリのパフォーマンスを測定し、向上させます。
ms.date: 03/30/2017
helpviewer_keywords:
- performance [.NET Framework]
- reliability [.NET Framework]
ms.assetid: c1676cca-3f1a-41ec-b469-9029566074fc
ms.openlocfilehash: f15cd9b38285e88dac727bcfe51c8dc542a735f6
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2020
ms.locfileid: "96277986"
---
# <a name="net-framework-performance"></a><span data-ttu-id="f0351-104">.NET Framework のパフォーマンス</span><span class="sxs-lookup"><span data-stu-id="f0351-104">.NET Framework Performance</span></span>

<span data-ttu-id="f0351-105">優れたパフォーマンスのアプリを作成する場合は、アプリのその他の機能を設計する場合と同様に、パフォーマンスについて設計および計画する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0351-105">If you want to create apps with great performance, you should design and plan for performance just as you would design any other feature of your app.</span></span> <span data-ttu-id="f0351-106">Microsoft が提供するツールを使用して、アプリのパフォーマンスを測定し、必要に応じて、メモリの使用、コードのスループット コード、および応答性を向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="f0351-106">You can use the tools provided by Microsoft to measure your app's performance, and, if needed, make improvements to memory use, code throughput, and responsiveness.</span></span> <span data-ttu-id="f0351-107">ここでは、Microsoft が提供するパフォーマンス分析ツールの一覧と、アプリ開発の特定の領域のパフォーマンスに関する他のトピックへのリンクを示します。</span><span class="sxs-lookup"><span data-stu-id="f0351-107">This topic lists the performance analysis tools that Microsoft provides, and provides links to other topics that cover performance for specific areas of app development.</span></span>  
  
## <a name="designing-and-planning-for-performance"></a><span data-ttu-id="f0351-108">パフォーマンスのための設計と計画</span><span class="sxs-lookup"><span data-stu-id="f0351-108">Designing and planning for performance</span></span>  

 <span data-ttu-id="f0351-109">優れたパフォーマンスのアプリが必要な場合は、他の機能を設計する場合と同様に、パフォーマンスの設計をアプリに組み込む必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0351-109">If you want a great performing app, you must design performance into your app just as you would design any other feature.</span></span> <span data-ttu-id="f0351-110">アプリのパフォーマンスが重要なシナリオを決定し、パフォーマンスの目標を設定して、それらのアプリのシナリオのパフォーマンスを早い段階から頻繁に計測する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0351-110">You should determine the performance-critical scenarios in your app, set performance goals, and measure performance for these app scenarios early and often.</span></span> <span data-ttu-id="f0351-111">アプリはそれぞれ異なり、パフォーマンスが重要な実行パスも異なるため、このようなパスを早期に特定し、労力を集中させることによって生産性を最大化できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-111">Because each app is different and has different performance-critical execution paths, determining those paths early and focusing your efforts enable you to maximize your productivity.</span></span>  
  
 <span data-ttu-id="f0351-112">高いパフォーマンスのアプリを作成するために、ターゲット プラットフォームを完全に理解する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f0351-112">You don’t have to be completely familiar with your target platform to create a high-performance app.</span></span> <span data-ttu-id="f0351-113">ただし、ターゲット プラットフォームのどの部分が、パフォーマンスの面で大きな負担が生じるのかを理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0351-113">However, you should develop an understanding of which parts of your target platform are costly in terms of performance.</span></span> <span data-ttu-id="f0351-114">開発プロセスの早い段階でパフォーマンスの計測することで、これを実現できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-114">You can do this by measuring performance early in your development process.</span></span>  
  
 <span data-ttu-id="f0351-115">パフォーマンスにとって重要な領域を特定し、パフォーマンスの目標を確立するには、ユーザー エクスペリエンスを常に検討します。</span><span class="sxs-lookup"><span data-stu-id="f0351-115">To determine the areas that are crucial to performance and to establish your performance goals, always consider the user experience.</span></span> <span data-ttu-id="f0351-116">起動時間と応答性は、ユーザーのアプリに対する認識に影響する 2 つの重要な部分です。</span><span class="sxs-lookup"><span data-stu-id="f0351-116">Startup time and responsiveness are two key areas that will affect the user’s perception of your app.</span></span> <span data-ttu-id="f0351-117">アプリが多くのメモリを使用する場合、ユーザーにとっては動作が遅いように見えたり、システムで実行中の他のアプリに影響を与える可能性があります。また、Windows ストアや Windows Phone ストアの送信プロセスでエラーとなる可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="f0351-117">If your app uses a lot of memory, it may appear sluggish to the user or affect other apps running on the system, or, in some cases, it could fail the Windows Store or Windows Phone Store submission process.</span></span> <span data-ttu-id="f0351-118">また、コードのどの部分を頻繁に実行するかを判断すると、コード内でこれらの部分が適切に最適化されていることを確認できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-118">Also, if you determine which parts of your code execute more frequently, you can make sure that these portions of your code are well optimized.</span></span>  
  
## <a name="analyzing-performance"></a><span data-ttu-id="f0351-119">パフォーマンスを分析する</span><span class="sxs-lookup"><span data-stu-id="f0351-119">Analyzing performance</span></span>  

 <span data-ttu-id="f0351-120">全体的な開発計画の一部として、開発中にアプリのパフォーマンスを計測し、その結果を以前に設定した目標と比較するポイントを設定します。</span><span class="sxs-lookup"><span data-stu-id="f0351-120">As part of your overall development plan, set points during development where you will measure the performance of your app and compare the results with the goals you set previously.</span></span> <span data-ttu-id="f0351-121">ユーザーが使用すると想定している環境およびハードウェアでアプリを計測します。</span><span class="sxs-lookup"><span data-stu-id="f0351-121">Measure your app in the environment and hardware that you expect your users to have.</span></span> <span data-ttu-id="f0351-122">アプリのパフォーマンスを早い段階で頻繁に分析することによって、開発サイクルの後半ではコストがかかり、負担の大きいアーキテクチャの決定を変更できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-122">By analyzing your app’s performance early and often you can change architectural decisions that would be costly and expensive to fix later in the development cycle.</span></span> <span data-ttu-id="f0351-123">次のセクションでは、アプリの分析に使用できるパフォーマンス ツールと、これらのツールによって使用さえるイベント トレーシングについて説明します。</span><span class="sxs-lookup"><span data-stu-id="f0351-123">The following sections describe performance tools you can use to analyze your apps and discuss event tracing, which is used by these tools.</span></span>  
  
### <a name="performance-tools"></a><span data-ttu-id="f0351-124">パフォーマンス ツール</span><span class="sxs-lookup"><span data-stu-id="f0351-124">Performance tools</span></span>  

 <span data-ttu-id="f0351-125">.NET Framework アプリで使用できるパフォーマンス ツールの一部を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f0351-125">Here are some of the performance tools you can use with your .NET Framework apps.</span></span>  
  
|<span data-ttu-id="f0351-126">ツール</span><span class="sxs-lookup"><span data-stu-id="f0351-126">Tool</span></span>|<span data-ttu-id="f0351-127">説明</span><span class="sxs-lookup"><span data-stu-id="f0351-127">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="f0351-128">Visual Studio パフォーマンス分析</span><span class="sxs-lookup"><span data-stu-id="f0351-128">Visual Studio Performance Analysis</span></span>|<span data-ttu-id="f0351-129">Windows オペレーティング システムを実行しているコンピューターに配置されている .NET Framework アプリの CPU 使用量の分析に使用します。</span><span class="sxs-lookup"><span data-stu-id="f0351-129">Use to analyze the CPU usage of your .NET Framework apps that will be deployed to computers that are running the Windows operating system.</span></span><br /><br /> <span data-ttu-id="f0351-130">このツールは、Visual Studio でプロジェクトを開いた後、**[デバッグ]** メニューから使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-130">This tool is available from the **Debug** menu in Visual Studio after you open a project.</span></span> <span data-ttu-id="f0351-131">詳細については、「[Performance Explorer](/visualstudio/profiling/performance-explorer)」(パフォーマンス エクスプローラー) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0351-131">For more information, see [Performance Explorer](/visualstudio/profiling/performance-explorer).</span></span> <span data-ttu-id="f0351-132">**注:** Windows Phone を対象とする場合は、Windows Phone アプリケーション分析を使用します (次の行を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="f0351-132">**Note:**  Use Windows Phone Application Analysis (see next row) when targeting Windows Phone.</span></span>|  
|<span data-ttu-id="f0351-133">Windows Phone アプリケーション分析</span><span class="sxs-lookup"><span data-stu-id="f0351-133">Windows Phone Application Analysis</span></span>|<span data-ttu-id="f0351-134">Windows Phone アプリの CPU やメモリ、ネットワーク データ転送率、アプリの応答性、バッテリの使用量の分析に使用します。</span><span class="sxs-lookup"><span data-stu-id="f0351-134">Use to analyze the CPU and memory, network data transfer rate, app responsiveness, and battery consumption in your Windows Phone apps.</span></span><br /><br /> <span data-ttu-id="f0351-135">このツールは、[Windows Phone SDK](https://go.microsoft.com/fwlink/?LinkId=265773) のインストール後に、Visual Studio の Windows Phone プロジェクトの **[デバッグ]** メニューから使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-135">This tool is available from the **Debug** menu for a Windows Phone project in Visual Studio after you install the [Windows Phone SDK](https://go.microsoft.com/fwlink/?LinkId=265773).</span></span> <span data-ttu-id="f0351-136">詳細については、「[Windows Phone 8 のアプリ プロファイリング](/previous-versions/windows/apps/jj215908(v=vs.105))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0351-136">For more information, see [App profiling for Windows Phone 8](/previous-versions/windows/apps/jj215908(v=vs.105)).</span></span>|  
|[<span data-ttu-id="f0351-137">PerfView</span><span class="sxs-lookup"><span data-stu-id="f0351-137">PerfView</span></span>](https://www.microsoft.com/download/details.aspx?id=28567)|<span data-ttu-id="f0351-138">CPU とメモリ関連のパフォーマンスの問題を識別するために使用します。</span><span class="sxs-lookup"><span data-stu-id="f0351-138">Use to identify CPU and memory-related performance issues.</span></span> <span data-ttu-id="f0351-139">このツールは、Windows イベント トレーシング (ETW) と CLR プロファイル API を使用して、メモリと CPU の高度な調査およびガベージ コレクションや JIT コンパイルに関する情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="f0351-139">This tool uses event tracing for Windows (ETW)  and CLR profiling APIs to provide advanced memory and CPU investigations as well as information about garbage collection and JIT compilation.</span></span> <span data-ttu-id="f0351-140">PerfView を使用する方法の詳細については、アプリに含まれるチュートリアルやヘルプ ファイル、[Channel 9 のビデオ チュートリアル](https://channel9.msdn.com/Series/PerfView-Tutorial)、および[ブログの投稿](/archive/blogs/vancem/)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0351-140">For more information about how to use PerfView, see the tutorial and help files that are included with the app, [Channel 9 video tutorials](https://channel9.msdn.com/Series/PerfView-Tutorial), and [blog posts](/archive/blogs/vancem/).</span></span><br /><br /> <span data-ttu-id="f0351-141">メモリ固有の問題については、[PerfView を使用したメモリの調査に関するビデオ チュートリアル](https://channel9.msdn.com/Series/PerfView-Tutorial/PerfView-Tutorial-9-NET-Memory-Investigation-Basics-of-GC-Heap-Snapshots)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0351-141">For memory-specific issues, see [Using PerfView for Memory Investigations](https://channel9.msdn.com/Series/PerfView-Tutorial/PerfView-Tutorial-9-NET-Memory-Investigation-Basics-of-GC-Heap-Snapshots).</span></span>|  
|[<span data-ttu-id="f0351-142">Windows Performance Analyzer</span><span class="sxs-lookup"><span data-stu-id="f0351-142">Windows Performance Analyzer</span></span>](https://www.microsoft.com/p/windows-performance-analyzer/9n0w1b2bxgnz?activetab=pivot:overviewtab)|<span data-ttu-id="f0351-143">複数のアプリが同じコンピューターで実行されているときに、アプリのメモリやストレージの使用量などの全体的なシステム パフォーマンスを特定するために使用します。</span><span class="sxs-lookup"><span data-stu-id="f0351-143">Use to determine overall system performance such as your app's memory and storage use when multiple apps are running on the same computer.</span></span> <span data-ttu-id="f0351-144">このツールは、Windows 8 用の Windows アセスメント &amp; デプロイメント キット (ADK) の一部としてダウンロード センターから入手できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-144">This tool is available from the download center as part of the Windows Assessment and Deployment Kit (ADK) for Windows 8.</span></span> <span data-ttu-id="f0351-145">詳細については、「[Windows Performance Analyzer (Windows パフォーマンス アナライザー)](/windows-hardware/test/wpt/windows-performance-analyzer)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0351-145">For more information, see [Windows Performance Analyzer](/windows-hardware/test/wpt/windows-performance-analyzer).</span></span>|
  
### <a name="event-tracing-for-windows-etw"></a><span data-ttu-id="f0351-146">Windows イベント トレーシング (ETW)</span><span class="sxs-lookup"><span data-stu-id="f0351-146">Event tracing for Windows (ETW)</span></span>  

 <span data-ttu-id="f0351-147">ETW は、実行中のコードに関する診断情報を取得できるようにする手法であり、前に説明したパフォーマンス ツールの多くで必要なテクノロジです。</span><span class="sxs-lookup"><span data-stu-id="f0351-147">ETW is a technique that lets you obtain diagnostic information about running code and is essential for many of the performance tools mentioned previously.</span></span> <span data-ttu-id="f0351-148">ETW は、特定のイベントが .NET Framework アプリおよび Windows によって発生したときにログを作成します。</span><span class="sxs-lookup"><span data-stu-id="f0351-148">ETW creates logs when particular events are raised by .NET Framework apps and Windows.</span></span> <span data-ttu-id="f0351-149">ETW を使用すると、ログの記録を動的に有効または無効にすることができ、稼動環境でアプリを再起動せずに詳細なトレースを実行できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-149">With ETW, you can enable and disable logging dynamically, so that you can perform detailed tracing in a production environment without restarting your app.</span></span> <span data-ttu-id="f0351-150">.NET Framework は ETW イベントをサポートしており、ETW はパフォーマンス データを生成する多くのプロファイル ツールやパフォーマンス ツールで使用されます。</span><span class="sxs-lookup"><span data-stu-id="f0351-150">The .NET Framework offers support for ETW events, and ETW is used by many profiling and performance tools to generate performance data.</span></span> <span data-ttu-id="f0351-151">これらのツールは、ETW イベントを有効または無効にするため、ETW イベントの知識が役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f0351-151">These tools often enable and disable ETW events, so familiarity with them is helpful.</span></span> <span data-ttu-id="f0351-152">アプリの特定のコンポーネントに関するパフォーマンス情報を収集するために、特定の ETW イベントを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0351-152">You can use specific ETW events to collect performance information about particular components of your app.</span></span> <span data-ttu-id="f0351-153">.NET Framework での ETW のサポートの詳細については、「[共通言語ランタイムの ETW イベント](etw-events-in-the-common-language-runtime.md)」と「[タスク並列ライブラリおよび PLINQ での ETW イベント](etw-events-in-task-parallel-library-and-plinq.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0351-153">For more information about ETW support in the .NET Framework, see [ETW Events in the Common Language Runtime](etw-events-in-the-common-language-runtime.md) and [ETW Events in Task Parallel Library and PLINQ](etw-events-in-task-parallel-library-and-plinq.md).</span></span>  
  
## <a name="performance-by-app-type"></a><span data-ttu-id="f0351-154">アプリの種類別のパフォーマンス</span><span class="sxs-lookup"><span data-stu-id="f0351-154">Performance by app type</span></span>  

 <span data-ttu-id="f0351-155">.NET Framework アプリの種類ごとに、パフォーマンスを評価するためのベスト プラクティス、考慮事項、およびツールがあります。</span><span class="sxs-lookup"><span data-stu-id="f0351-155">Each type of .NET Framework app has its own best practices, considerations, and tools for evaluating performance.</span></span> <span data-ttu-id="f0351-156">次の表では、特定の種類の .NET Framework アプリのパフォーマンスに関するトピックへのリンクを示します。</span><span class="sxs-lookup"><span data-stu-id="f0351-156">The following table links to performance topics for specific .NET Framework app types.</span></span>  
  
|<span data-ttu-id="f0351-157">アプリの種類</span><span class="sxs-lookup"><span data-stu-id="f0351-157">App type</span></span>|<span data-ttu-id="f0351-158">解決方法については、</span><span class="sxs-lookup"><span data-stu-id="f0351-158">See</span></span>|  
|--------------|---------|  
|<span data-ttu-id="f0351-159">すべてのプラットフォームに対応した .NET Framework アプリ</span><span class="sxs-lookup"><span data-stu-id="f0351-159">.NET Framework apps for all platforms</span></span>|[<span data-ttu-id="f0351-160">ガベージ コレクションとパフォーマンス</span><span class="sxs-lookup"><span data-stu-id="f0351-160">Garbage Collection and Performance</span></span>](../../standard/garbage-collection/performance.md)<br /><br /> [<span data-ttu-id="f0351-161">パフォーマンスに関するヒント</span><span class="sxs-lookup"><span data-stu-id="f0351-161">Performance Tips</span></span>](performance-tips.md)|  
|<span data-ttu-id="f0351-162">C++、C#、および Visual Basic で記述された Windows 8.x ストア アプリ</span><span class="sxs-lookup"><span data-stu-id="f0351-162">Windows 8.x Store apps written in C++, C#, and Visual Basic</span></span>|<span data-ttu-id="f0351-163">[C++、C#、または Visual Basic を使った Windows ストア アプリのパフォーマンスのベスト プラクティス](/previous-versions/windows/apps/hh750313(v=win.10))</span><span class="sxs-lookup"><span data-stu-id="f0351-163">[Performance best practices for Windows Store apps using C++, C#, and Visual Basic](/previous-versions/windows/apps/hh750313(v=win.10))</span></span>|  
|<span data-ttu-id="f0351-164">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="f0351-164">Windows Presentation Foundation (WPF)</span></span>|<span data-ttu-id="f0351-165">[WPF Performance Suite](/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="f0351-165">[WPF Performance Suite](/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100))</span></span>|  
|<span data-ttu-id="f0351-166">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="f0351-166">ASP.NET</span></span>|<span data-ttu-id="f0351-167">[ASP.NET のパフォーマンスの概要](/previous-versions/aspnet/cc668225(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="f0351-167">[ASP.NET Performance Overview](/previous-versions/aspnet/cc668225(v=vs.100))</span></span>|  
  
## <a name="related-topics"></a><span data-ttu-id="f0351-168">関連トピック</span><span class="sxs-lookup"><span data-stu-id="f0351-168">Related Topics</span></span>  
  
|<span data-ttu-id="f0351-169">Title</span><span class="sxs-lookup"><span data-stu-id="f0351-169">Title</span></span>|<span data-ttu-id="f0351-170">説明</span><span class="sxs-lookup"><span data-stu-id="f0351-170">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="f0351-171">.NET Framework アプリケーションでのキャッシュ</span><span class="sxs-lookup"><span data-stu-id="f0351-171">Caching in .NET Framework Applications</span></span>](caching-in-net-framework-applications.md)|<span data-ttu-id="f0351-172">データをキャッシュしてアプリケーションのパフォーマンスを向上させる手法について説明します。</span><span class="sxs-lookup"><span data-stu-id="f0351-172">Describes techniques for caching data to improve performance in your app.</span></span>|  
|[<span data-ttu-id="f0351-173">限定的な初期化</span><span class="sxs-lookup"><span data-stu-id="f0351-173">Lazy Initialization</span></span>](lazy-initialization.md)|<span data-ttu-id="f0351-174">特にアプリの起動時にパフォーマンスを向上させるために、必要に応じてオブジェクトを初期化する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="f0351-174">Describes how to initialize objects as-needed to improve performance, particularly at app startup.</span></span>|  
|[<span data-ttu-id="f0351-175">信頼性</span><span class="sxs-lookup"><span data-stu-id="f0351-175">Reliability</span></span>](reliability.md)|<span data-ttu-id="f0351-176">サーバー環境での非同期例外の発生防止について説明します。</span><span class="sxs-lookup"><span data-stu-id="f0351-176">Provides information about preventing asynchronous exceptions in a server environment.</span></span>|  
|[<span data-ttu-id="f0351-177">規模が大きく、応答性の高い .NET Framework アプリの作成</span><span class="sxs-lookup"><span data-stu-id="f0351-177">Writing Large, Responsive .NET Framework Apps</span></span>](writing-large-responsive-apps.md)|<span data-ttu-id="f0351-178">マネージド コードで C# および Visual Basic コンパイラを再作成する際に得られたパフォーマンスに関するヒントを説明し、C# コンパイラでの実際の例をいくつか紹介します。</span><span class="sxs-lookup"><span data-stu-id="f0351-178">Provides performance tips gathered from rewriting the C# and Visual Basic compilers in managed code, and includes several real examples from the C# compiler.</span></span>|
