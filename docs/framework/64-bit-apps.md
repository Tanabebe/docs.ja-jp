---
title: 64 ビット アプリケーション
description: ネイティブ 64 ビット アプリケーションとしてか WOW64 (Windows 64 ビット上の Windows 32 ビット) の下で、Windows 64 ビット OS 上でアプリケーションを構成する方法に関する情報を取得します。
ms.date: 03/30/2017
helpviewer_keywords:
- applications [C++], 64-bit
- 64-bit applications [C++]
- 64-bit programming [C++]
ms.assetid: fd4026bc-2c3d-4b27-86dc-ec5e96018181
ms.openlocfilehash: 8274fe8f5d32b0f6258e450cc7d649fe3e184d78
ms.sourcegitcommit: 0bb8074d524e0dcf165430b744bb143461f17026
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/15/2021
ms.locfileid: "103477216"
---
# <a name="64-bit-applications"></a><span data-ttu-id="8d851-103">64 ビット アプリケーション</span><span class="sxs-lookup"><span data-stu-id="8d851-103">64-bit Applications</span></span>

<span data-ttu-id="8d851-104">アプリケーションをコンパイルするときに、Windows 64 ビット オペレーティング システム上で、ネイティブ アプリケーションとして実行するか、WOW64 (Windows 64 ビット上の Windows 32 ビット) の制御下で実行するかを指定できます。</span><span class="sxs-lookup"><span data-stu-id="8d851-104">When you compile an application, you can specify that it should run on a Windows 64-bit operating system either as a native application or under WOW64 (Windows 32-bit on Windows 64-bit).</span></span> <span data-ttu-id="8d851-105">WOW64 は互換環境であり、32 ビット アプリケーションを 64 ビット オペレーティング システム上で実行できるようにします。</span><span class="sxs-lookup"><span data-stu-id="8d851-105">WOW64 is a compatibility environment that enables a 32-bit application to run on a 64-bit system.</span></span> <span data-ttu-id="8d851-106">WOW64 は、Windows オペレーティング システムのすべての 64 ビット バージョンに含まれています。</span><span class="sxs-lookup"><span data-stu-id="8d851-106">WOW64 is included in all 64-bit versions of the Windows operating system.</span></span>  
  
## <a name="running-32-bit-vs-64-bit-applications-on-windows"></a><span data-ttu-id="8d851-107">Windows における 32 ビット アプリケーションと 64 ビット アプリケーションの実行の比較</span><span class="sxs-lookup"><span data-stu-id="8d851-107">Running 32-bit vs. 64-bit Applications on Windows</span></span>  

 <span data-ttu-id="8d851-108">.NET Framework 1.0 および 1.1 リリースでビルドされたアプリケーションはすべて、64 ビットのオペレーティング システム上の 32 ビット アプリケーションとして扱われます。そして常に、WOW64 と 32 ビットの共通言語ランタイム (CLR: Common Language Runtime) のもとで実行します。</span><span class="sxs-lookup"><span data-stu-id="8d851-108">All applications that are built on the .NET Framework 1.0 or 1.1 are treated as 32-bit applications on a 64-bit operating system and are always executed under WOW64 and the 32-bit common language runtime (CLR).</span></span> <span data-ttu-id="8d851-109">.NET Framework 4 以降のバージョンでビルドされた 32 ビット アプリケーションも、64 ビット システムでは WOW64 のもとで実行します。</span><span class="sxs-lookup"><span data-stu-id="8d851-109">32-bit applications that are built on the .NET Framework 4 or later versions also run under WOW64 on 64-bit systems.</span></span>  
  
 <span data-ttu-id="8d851-110">Visual Studio は、x86 コンピューターには 32 ビット版の CLR をインストールし、64 ビットの Windows コンピューターには、32 ビット版の CLR と適切な 64 ビット版の CLR の両方をインストールします</span><span class="sxs-lookup"><span data-stu-id="8d851-110">Visual Studio installs the 32-bit version of the CLR on an x86 computer, and both the 32-bit version and the appropriate 64-bit version of the CLR on a 64-bit Windows computer.</span></span> <span data-ttu-id="8d851-111">(Visual Studio は 32 ビット アプリケーションであるため、64 ビット システムにインストールすると WOW64 の制御下で実行されます)。</span><span class="sxs-lookup"><span data-stu-id="8d851-111">(Because Visual Studio is a 32-bit application, when it is installed on a 64-bit system, it runs under WOW64.)</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8d851-112">x86 エミュレーションと、Itanium プロセッサ ファミリ向け WOW64 サブシステムの設計のために、アプリケーションの実行は単一のプロセッサ上に制限されます。</span><span class="sxs-lookup"><span data-stu-id="8d851-112">Because of the design of x86 emulation and the WOW64 subsystem for the Itanium processor family, applications are restricted to execution on one processor.</span></span> <span data-ttu-id="8d851-113">これらの要因により、Itanium ベースのシステム上で実行する 32 ビット .NET Framework アプリケーションのパフォーマンスとスケーラビリティは低下します。</span><span class="sxs-lookup"><span data-stu-id="8d851-113">These factors reduce the performance and scalability of 32-bit .NET Framework applications that run on Itanium-based systems.</span></span> <span data-ttu-id="8d851-114">パフォーマンスおよびスケーラビリティを向上させるために、Itanium ベースのシステム用のネイティブ 64 ビット サポートを含む .NET Framework 4 を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8d851-114">We recommend that you use the .NET Framework 4, which includes native 64-bit support for Itanium-based systems, for increased performance and scalability.</span></span>  
  
 <span data-ttu-id="8d851-115">既定では、64 ビット Windows オペレーティング システムで 64 ビット マネージド アプリケーションを実行するときに、最大 2 GB のオブジェクトを作成できます。</span><span class="sxs-lookup"><span data-stu-id="8d851-115">By default, when you run a 64-bit managed application on a 64-bit Windows operating system, you can create an object of no more than 2 gigabytes (GB).</span></span> <span data-ttu-id="8d851-116">ただし、.NET Framework 4.5 ではこの制限を上げることができます。</span><span class="sxs-lookup"><span data-stu-id="8d851-116">However, in the .NET Framework 4.5, you can increase this limit.</span></span>  <span data-ttu-id="8d851-117">詳細については、[\<gcAllowVeryLargeObjects> 要素](./configure-apps/file-schema/runtime/gcallowverylargeobjects-element.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8d851-117">For more information, see the [\<gcAllowVeryLargeObjects> element](./configure-apps/file-schema/runtime/gcallowverylargeobjects-element.md).</span></span>  
  
 <span data-ttu-id="8d851-118">多くのアセンブリは 32 ビットの CLR と 64 ビットの CLR で同じように実行します。</span><span class="sxs-lookup"><span data-stu-id="8d851-118">Many assemblies run identically on both the 32-bit CLR and the 64-bit CLR.</span></span> <span data-ttu-id="8d851-119">しかし、次の条件が当てはまる場合、一部のプログラムでは動作が CLR によって異なります。</span><span class="sxs-lookup"><span data-stu-id="8d851-119">However, some programs may behave differently, depending on the CLR, if they contain one or more of the following:</span></span>  
  
- <span data-ttu-id="8d851-120">プラットフォームによってメンバーのサイズが変わる構造体 (ポインター型など)</span><span class="sxs-lookup"><span data-stu-id="8d851-120">Structures that contain members that change size depending on the platform (for example, any pointer type).</span></span>  
  
- <span data-ttu-id="8d851-121">定数のサイズを含むポインター演算</span><span class="sxs-lookup"><span data-stu-id="8d851-121">Pointer arithmetic that includes constant sizes.</span></span>  
  
- <span data-ttu-id="8d851-122">ハンドルに `Int32` ではなく `IntPtr` を使用した不適切なプラットフォーム呼び出しまたは COM 宣言</span><span class="sxs-lookup"><span data-stu-id="8d851-122">Incorrect platform invoke or COM declarations that use `Int32` for handles instead of `IntPtr`.</span></span>  
  
- <span data-ttu-id="8d851-123">`IntPtr` を `Int32` にキャストするコード</span><span class="sxs-lookup"><span data-stu-id="8d851-123">Code that casts `IntPtr` to `Int32`.</span></span>  
  
 <span data-ttu-id="8d851-124">32 ビット アプリケーションを 64 ビットの CLR に移行して実行する方法の詳細については、「[32 ビット マネージド コードを 64 ビットに移行する](/previous-versions/dotnet/articles/ms973190(v=msdn.10))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8d851-124">For more information about how to port a 32-bit application to run on the 64-bit CLR, see [Migrating 32-bit Managed Code to 64-bit](/previous-versions/dotnet/articles/ms973190(v=msdn.10)).</span></span>  
  
## <a name="general-64-bit-programming-information"></a><span data-ttu-id="8d851-125">一般的な 64 ビット プログラミングについて</span><span class="sxs-lookup"><span data-stu-id="8d851-125">General 64-Bit Programming Information</span></span>  

 <span data-ttu-id="8d851-126">64 ビット プログラミングの一般的な問題については、次のドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="8d851-126">For general information about 64-bit programming, see the following documents:</span></span>  
  
- <span data-ttu-id="8d851-127">Windows SDK ドキュメントの「[Programming Guide for 64-bit Windows](/windows/win32/winprog64/programming-guide-for-64-bit-windows)」 (64 ビット Windows のプログラミング ガイド) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8d851-127">In the Windows SDK documentation, see [Programming Guide for 64-bit Windows](/windows/win32/winprog64/programming-guide-for-64-bit-windows).</span></span>  
  
- <span data-ttu-id="8d851-128">64 ビット アプリケーションを作成するための Visual Studio のサポート機能については、「[Visual Studio 開発環境の 64 ビット サポート](/visualstudio/ide/visual-studio-ide-64-bit-support)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8d851-128">For information about Visual Studio support for creating 64-bit applications, see [Visual Studio IDE 64-Bit Support](/visualstudio/ide/visual-studio-ide-64-bit-support).</span></span>  
  
## <a name="compiler-support-for-creating-64-bit-applications"></a><span data-ttu-id="8d851-129">64 ビット アプリケーションを作成するためのコンパイラのサポート</span><span class="sxs-lookup"><span data-stu-id="8d851-129">Compiler Support for Creating 64-Bit Applications</span></span>  

 <span data-ttu-id="8d851-130">既定では、.NET Framework を使用して 32 ビット コンピューターまたは 64 ビット コンピューターでアプリケーションをビルドする場合、アプリケーションは 64 ビット コンピューターでネイティブ アプリケーションとして (WOW64 の制御下ではなく) 実行します。</span><span class="sxs-lookup"><span data-stu-id="8d851-130">By default, when you use the .NET Framework to build an application on either a 32-bit or a 64-bit computer, the application will run on a 64-bit computer as a native application (that is, not under WOW64).</span></span> <span data-ttu-id="8d851-131">次の表に、Visual Studio コンパイラを使用して、ネイティブなアプリケーションとして実行する 64 ビット アプリケーション、WOW64 の下で実行する 64 ビット アプリケーション、またはその両方が可能な 64 ビット アプリケーションを作成するための方法を説明するドキュメントを示します。</span><span class="sxs-lookup"><span data-stu-id="8d851-131">The following table lists documents that explain how to use Visual Studio compilers to create 64-bit applications that will run as native, under WOW64, or both.</span></span>  
  
|<span data-ttu-id="8d851-132">コンパイラ</span><span class="sxs-lookup"><span data-stu-id="8d851-132">Compiler</span></span>|<span data-ttu-id="8d851-133">コンパイラ オプション</span><span class="sxs-lookup"><span data-stu-id="8d851-133">Compiler option</span></span>|  
|--------------|---------------------|  
|<span data-ttu-id="8d851-134">Visual Basic</span><span class="sxs-lookup"><span data-stu-id="8d851-134">Visual Basic</span></span>|[<span data-ttu-id="8d851-135">-platform (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="8d851-135">-platform (Visual Basic)</span></span>](../visual-basic/reference/command-line-compiler/platform.md)|  
|<span data-ttu-id="8d851-136">Visual C#</span><span class="sxs-lookup"><span data-stu-id="8d851-136">Visual C#</span></span>|[<span data-ttu-id="8d851-137">-platform (C# コンパイラ オプション)</span><span class="sxs-lookup"><span data-stu-id="8d851-137">-platform (C# Compiler Options)</span></span>](../csharp/language-reference/compiler-options/output.md#platformtarget)|  
|<span data-ttu-id="8d851-138">Visual C++</span><span class="sxs-lookup"><span data-stu-id="8d851-138">Visual C++</span></span>|<span data-ttu-id="8d851-139">**/clr:safe** を使用すると、プラットフォームに依存しない、Microsoft Intermediate Language (MSIL) アプリケーションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="8d851-139">You can create platform-agnostic, Microsoft intermediate language (MSIL) applications by using **/clr:safe**.</span></span> <span data-ttu-id="8d851-140">詳細については、「[/clr (共通言語ランタイムのコンパイル)](/cpp/build/reference/clr-common-language-runtime-compilation)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8d851-140">For more information, see [-clr (Common Language Runtime Compilation)](/cpp/build/reference/clr-common-language-runtime-compilation).</span></span><br /><br /> <span data-ttu-id="8d851-141">Visual C++ には、それぞれの 64 ビット オペレーティング システムを対象とする個別のコンパイラが含まれます。</span><span class="sxs-lookup"><span data-stu-id="8d851-141">Visual C++ includes a separate compiler for each 64-bit operating system.</span></span> <span data-ttu-id="8d851-142">Visual C++ を使用して 64 ビット Windows オペレーティング システム上で実行するネイティブ アプリケーションを作成する方法の詳細については、「[Visual C++ による 64 ビット プログラミング](/cpp/build/configuring-programs-for-64-bit-visual-cpp)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8d851-142">For more information about how to use Visual C++ to create native applications that run on a 64-bit Windows operating system, see [64-bit Programming](/cpp/build/configuring-programs-for-64-bit-visual-cpp).</span></span>|  
  
## <a name="determining-the-status-of-an-exe-file-or-dll-file"></a><span data-ttu-id="8d851-143">.exe ファイルまたは .dll ファイルのステータスの特定</span><span class="sxs-lookup"><span data-stu-id="8d851-143">Determining the Status of an .exe File or .dll File</span></span>  

 <span data-ttu-id="8d851-144">.exe ファイルまたは .dll ファイルが、特定のプラットフォーム上または WOW64 の下でのみ動作するように意図されているかどうかを確認するには、[CorFlags.exe (CorFlags 変換ツール)](./tools/corflags-exe-corflags-conversion-tool.md) を使用します (オプションは指定しません)。</span><span class="sxs-lookup"><span data-stu-id="8d851-144">To determine whether an .exe file or .dll file is meant to run only on a specific platform or under WOW64, use [CorFlags.exe (CorFlags Conversion Tool)](./tools/corflags-exe-corflags-conversion-tool.md) with no options.</span></span> <span data-ttu-id="8d851-145">また、CorFlags.exe を使用して、.exe ファイルまたは .dll ファイルのプラットフォームのステータスを変更することもできます。</span><span class="sxs-lookup"><span data-stu-id="8d851-145">You can also use CorFlags.exe to change the platform status of an .exe file or .dll file.</span></span> <span data-ttu-id="8d851-146">Visual Studio アセンブリの CLR ヘッダーのメジャー ランタイム バージョン番号が 2、マイナー ランタイム バージョン番号が 5 に設定されています。</span><span class="sxs-lookup"><span data-stu-id="8d851-146">The CLR header of a Visual Studio assembly has the major runtime version number set to 2 and the minor runtime version number set to 5.</span></span> <span data-ttu-id="8d851-147">マイナー ランタイム バージョンが 0 に設定されたアプリケーションは、レガシ アプリケーションとして扱われ、常に WOW64 の下で実行されます。</span><span class="sxs-lookup"><span data-stu-id="8d851-147">Applications that have the minor runtime version set to 0 are treated as legacy applications and are always executed under WOW64.</span></span>  
  
 <span data-ttu-id="8d851-148">プログラムによって .exe または .dll を照会し、それが特定のプラットフォーム上または WOW64 の下でのみ動作するように意図されているかどうかを確認するには、<xref:System.Reflection.Module.GetPEKind%2A?displayProperty=nameWithType> メソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="8d851-148">To programmatically query an .exe or .dll to see whether it is meant to run only on a specific platform or under WOW64, use the <xref:System.Reflection.Module.GetPEKind%2A?displayProperty=nameWithType> method.</span></span>
